{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/animated_sprite_demo/AnimatedSpriteDemo.ts","src/wolfie2d/Game.ts","src/wolfie2d/files/ResourceManager.ts","src/wolfie2d/loop/GameLoopTemplate.ts","src/wolfie2d/math/MathUtilities.ts","src/wolfie2d/math/Matrix.ts","src/wolfie2d/math/Vector3.ts","src/wolfie2d/rendering/TextRenderer.ts","src/wolfie2d/rendering/WebGLGameCircleRenderer.ts","src/wolfie2d/rendering/WebGLGameRenderingSystem.ts","src/wolfie2d/rendering/WebGLGameShader.ts","src/wolfie2d/rendering/WebGLGameSpriteRenderer.ts","src/wolfie2d/rendering/WebGLGameTexture.ts","src/wolfie2d/scene/GradientCircle.ts","src/wolfie2d/scene/SceneGraph.ts","src/wolfie2d/scene/SceneObject.ts","src/wolfie2d/scene/sprite/AnimatedSprite.ts","src/wolfie2d/scene/sprite/AnimatedSpriteType.ts","src/wolfie2d/ui/UIController.ts"],"names":[],"mappings":"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","file":"demo.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import { GradientCircle } from './../wolfie2d/scene/GradientCircle';\r\nimport { UIController } from './../wolfie2d/ui/UIController';\r\nimport { WebGLGameShader } from './../wolfie2d/rendering/WebGLGameShader';\r\nimport { WebGLGameSpriteRenderer } from './../wolfie2d/rendering/WebGLGameSpriteRenderer';\r\n/*\r\n * AnimatedSpriteDemo.ts - demonstrates some simple sprite rendering and \r\n * animation as well as some basic mouse interactions. Note that the\r\n * AnimationSpriteDemo class loads and creates custom content for the\r\n * purpose of demonstrating basic functionality.\r\n */\r\nimport {Game} from '../wolfie2d/Game'\r\nimport {ResourceManager} from '../wolfie2d/files/ResourceManager'\r\nimport {TextToRender} from '../wolfie2d/rendering/TextRenderer'\r\nimport {WebGLGameRenderingSystem} from '../wolfie2d/rendering/WebGLGameRenderingSystem'\r\nimport {SceneGraph} from '../wolfie2d/scene/SceneGraph'\r\nimport {AnimatedSprite} from '../wolfie2d/scene/sprite/AnimatedSprite'\r\nimport {AnimatedSpriteType} from '../wolfie2d/scene/sprite/AnimatedSpriteType'\r\nimport { SceneObject } from '../wolfie2d/scene/SceneObject';\r\n\r\n\r\n// IN THIS EXAMPLE WE'LL HAVE 2 SPRITE TYPES THAT EACH HAVE THE SAME 2 STATES\r\n// AND WHERE EACH SPRITE TYPE HAS ITS OWN SPRITE SHEET\r\nconst DEMO_SPRITE_TYPES : string[] = [\r\n    'resources/animated_sprites/RedCircleMan.json',\r\n    'resources/animated_sprites/MultiColorBlock.json'\r\n];\r\nconst DEMO_SPRITE_STATES = {\r\n    FORWARD_STATE: 'FORWARD',\r\n    REVERSE_STATE: 'REVERSE'\r\n};\r\nconst DEMO_TEXTURES : string[] = [\r\n    'resources/images/EightBlocks.png', \r\n    'resources/images/RedCircleMan.png'\r\n];\r\n\r\nclass AnimatedSpriteDemo {\r\n    constructor() {}\r\n\r\n    /**\r\n     * This method initializes the application, building all the needed\r\n     * game objects and setting them up for use.\r\n     */\r\n    public buildTestScene(game : Game, callback : Function) {\r\n        let renderingSystem : WebGLGameRenderingSystem = game.getRenderingSystem();\r\n        let sceneGraph : SceneGraph = game.getSceneGraph();\r\n        let resourceManager : ResourceManager = game.getResourceManager();\r\n        let builder = this;\r\n \r\n        // EMPLOY THE RESOURCE MANAGER TO BUILD ALL THE WORLD CONTENT\r\n        resourceManager.loadTextures(DEMO_TEXTURES, renderingSystem, function() {\r\n            // ONLY AFTER ALL THE TEXTURES HAVE LOADED LOAD THE SPRITE TYPES\r\n            resourceManager.loadSpriteTypes(DEMO_SPRITE_TYPES, function() {\r\n                // ONLY AFTER ALL THE SPRITE TYPES HAVE LOADED LOAD THE SPRITES\r\n                builder.buildAnimatedSprites(resourceManager, sceneGraph);\r\n\r\n                // AND BUILD ALL THE TEXT OUR APP WILL USE\r\n                builder.buildText(game);\r\n\r\n                // EVERYTHING HAS BEEN BUILT, CALL THE CALLBACK\r\n                callback();\r\n            });\r\n        });\r\n    }\r\n\r\n    /*\r\n     * Builds all the animated sprites to be used by the application and\r\n     * adds them to the scene.\r\n     */\r\n    private buildAnimatedSprites(resourceManager : ResourceManager, scene : SceneGraph) {\r\n        let canvasWidth : number = (<HTMLCanvasElement>document.getElementById(\"game_canvas\")).width;\r\n        let canvasHeight : number = (<HTMLCanvasElement>document.getElementById(\"game_canvas\")).height;\r\n\r\n        // BUILD A BUNCH OF CIRCLE SPRITES\r\n        for (let i = 0; i < DEMO_SPRITE_TYPES.length; i++) {\r\n            for (let j = 0; j < 5; j++) {\r\n                let spriteTypeToUse : string = DEMO_SPRITE_TYPES[i];\r\n                let animatedSpriteType : AnimatedSpriteType = resourceManager.getAnimatedSpriteTypeById(spriteTypeToUse);\r\n                let spriteToAdd : AnimatedSprite = new AnimatedSprite(animatedSpriteType, DEMO_SPRITE_STATES.FORWARD_STATE);\r\n                let randomX : number = Math.floor(Math.random() * canvasWidth) - (animatedSpriteType.getSpriteWidth()/2);\r\n                let randomY : number = Math.floor(Math.random() * canvasHeight) - (animatedSpriteType.getSpriteHeight()/2);\r\n                spriteToAdd.getPosition().set(randomX, randomY, 0.0, 1.0);\r\n                scene.addAnimatedSprite(spriteToAdd);\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < 5; i ++) {\r\n            let randomX : number = Math.floor(Math.random() * canvasWidth) - (200);\r\n            let randomY : number = Math.floor(Math.random() * canvasHeight) - (200);\r\n            let circleToAdd: GradientCircle = new GradientCircle(300, 300);\r\n            circleToAdd.getPosition().set(randomX, randomY, 0.0, 1.0);\r\n            scene.addGradientCircle(circleToAdd);\r\n        }\r\n\r\n        // For gradient cirlce with shader\r\n\r\n        // for (let j = 0; j < 5; j++) {\r\n            let renderingSystem: WebGLGameRenderingSystem = game.getRenderingSystem();\r\n            let spriteRenderer: WebGLGameSpriteRenderer = renderingSystem.getSpriteRenderer();\r\n            let gl: WebGLRenderingContext = renderingSystem.getWebGL();\r\n    }\r\n\r\n    \r\n\r\n    /*\r\n     * Builds all the text to be displayed in the application.\r\n     */\r\n    private buildText(game : Game) {\r\n        let sceneGraph : SceneGraph = game.getSceneGraph();\r\n        let numSpritesText = new TextToRender(\"Num Sprites\", \"\", 20, 50, function() {\r\n            numSpritesText.text = \"Number of Scene Objects: \" + sceneGraph.getTotalSceneNums();\r\n        });\r\n        let textRenderer = game.getRenderingSystem().getTextRenderer();\r\n        textRenderer.addTextToRender(numSpritesText);\r\n\r\n\r\n        let detail = new TextToRender(\"Detail\", \"\", 20, 90, function() {\r\n                \r\n            let uiController: UIController = game.getUIController();\r\n            let sprite: AnimatedSprite = uiController.getMouseOverSprite();\r\n            let circle: GradientCircle = uiController.getMouseOverCircle();\r\n            let obj: SceneObject = uiController.getMouseOverObj();\r\n\r\n            let x: number = uiController.getMouseX();\r\n            let y: number = uiController.getMouseY();\r\n            if (obj != null && obj instanceof AnimatedSprite) {\r\n                detail.text = `MouseX: ${x}, MouseY: ${y}  position:` + obj.toString();\r\n            } else if (obj != null && obj instanceof GradientCircle) {\r\n                detail.text = `MouseX: ${x}, MouseY: ${y}  position` + obj.toString();;\r\n            } else {\r\n                detail.text = \"\";\r\n            }\r\n        });\r\n        textRenderer.addTextToRender(detail);\r\n    }\r\n}\r\n\r\n// THIS IS THE ENTRY POINT INTO OUR APPLICATION, WE MAKE\r\n// THE Game OBJECT AND INITIALIZE IT WITH THE CANVASES\r\nexport let game = new Game();\r\ngame.init(\"game_canvas\", \"text_canvas\");\r\n\r\n// BUILD THE GAME SCENE\r\nlet demo = new AnimatedSpriteDemo();\r\ndemo.buildTestScene(game, function() {\r\n    // AND START THE GAME LOOP\r\n    game.start();\r\n});","/*\r\n * Game is the focal point of the application, it has 4 subsystems,\r\n * the resource manager, the scene graph, the rendering system, and\r\n * the UI controller. In addition it serves as the game loop, providing\r\n * both an update and draw function that is called on a schedule.\r\n */\r\nimport {GameLoopTemplate} from './loop/GameLoopTemplate'\r\nimport {WebGLGameRenderingSystem} from './rendering/WebGLGameRenderingSystem'\r\nimport {SceneGraph} from './scene/SceneGraph'\r\nimport {AnimatedSprite} from './scene/sprite/AnimatedSprite'\r\nimport {ResourceManager} from './files/ResourceManager'\r\nimport {UIController} from './ui/UIController'\r\nimport { SceneObject } from './scene/SceneObject';\r\n\r\nexport class Game extends GameLoopTemplate {\r\n    private resourceManager : ResourceManager = new ResourceManager();\r\n    private sceneGraph : SceneGraph = new SceneGraph();\r\n    private renderingSystem : WebGLGameRenderingSystem = new WebGLGameRenderingSystem();\r\n    private uiController : UIController = new UIController();\r\n\r\n    public constructor() {\r\n        super();\r\n    }\r\n\r\n    public getUIController(): UIController {\r\n        return this.uiController;\r\n    }\r\n\r\n    public getRenderingSystem() : WebGLGameRenderingSystem {\r\n        return this.renderingSystem;\r\n    }\r\n\r\n    public getResourceManager() : ResourceManager {\r\n        return this.resourceManager;\r\n    }\r\n\r\n    public getSceneGraph() : SceneGraph {\r\n        return this.sceneGraph;\r\n    }\r\n\r\n    public init(gameCanvasId : string, textCanvasId : string) : void {\r\n        this.renderingSystem.init(gameCanvasId, textCanvasId);\r\n        this.uiController.init(gameCanvasId, this.sceneGraph, this.getRenderingSystem());\r\n    }\r\n\r\n    public begin() : void {\r\n    }\r\n\r\n    /*\r\n     * This draws the game. Note that we are not currently using the \r\n     * interpolation value, but could once physics is involved.\r\n     */\r\n    public draw(interpolationPercentage : number) : void {\r\n        // GET THE VISIBLE SET FROM THE SCENE GRAPH\r\n        let visibleSprites : Array<SceneObject>;\r\n        visibleSprites = <Array<SceneObject>>this.sceneGraph.scope();\r\n\r\n        // RENDER THE VISIBLE SET, WHICH SHOULD ALL BE RENDERABLE\r\n        this.renderingSystem.render(visibleSprites);\r\n    }\r\n\r\n    /**\r\n     * Updates the scene.\r\n     */\r\n    public update(delta : number) : void {\r\n        this.sceneGraph.update(delta);\r\n    }\r\n    \r\n    /**\r\n     * Updates the FPS counter.\r\n     */\r\n    public end(fps : number, panic : boolean) : void {\r\n        if (panic) {\r\n            var discardedTime = Math.round(this.resetFrameDelta());\r\n            console.warn('Main loop panicked, probably because the browser tab was put in the background. Discarding ' + discardedTime + 'ms');\r\n        }\r\n    }\r\n}","/*\r\n * ResourceManager.js\r\n *\r\n * This class is responsible for managing all shared resources. This means things\r\n * that may be needed by multiple game objects. In this application this means\r\n * textures for the purpose of GPU rendering and animated sprite types.\r\n */\r\nimport {SpriteTypeData, AnimationStateData, AnimationFrameData} from './SpriteTypeData'\r\nimport {HashTable} from '../data/HashTable'\r\nimport {WebGLGameRenderingSystem} from '../rendering/WebGLGameRenderingSystem'\r\nimport {WebGLGameTexture} from '../rendering/WebGLGameTexture'\r\nimport {AnimatedSpriteType} from '../scene/sprite/AnimatedSpriteType'\r\n\r\nexport class ResourceManager {\r\n    // GAME TEXTURES \r\n    private gameTextures : Array<WebGLGameTexture> = new Array();\r\n    private gameTextureIds : HashTable<number> = {};\r\n    private numTexturesToLoad : number;\r\n    private numTexturesLoaded : number;\r\n\r\n    // ANIMATED SPRITE TYPES\r\n    private gameSpriteTypes : Array<AnimatedSpriteType> = new Array();\r\n    private gameSpriteTypeIds : HashTable<number> = {};\r\n    private numSpriteTypesToLoad : number;\r\n    private numSpriteTypesLoaded : number;\r\n\r\n    public constructor() {}\r\n\r\n    // ACCESSOR METHODS\r\n\r\n    public getAnimatedSpriteTypeByIndex(typeIndex : number) : AnimatedSpriteType {\r\n        return this.gameSpriteTypes[typeIndex];\r\n    }\r\n\r\n    public getAnimatedSpriteTypeById(typeId : string) : AnimatedSpriteType {\r\n        let typeIndex : number = this.gameSpriteTypeIds[typeId];\r\n        return this.getAnimatedSpriteTypeByIndex(typeIndex);\r\n    }\r\n    \r\n    // ADDS A NEW SPRITE TYPE \r\n    public addAnimatedSpriteType(typeId : number, spriteType : AnimatedSpriteType) : void {\r\n        this.gameSpriteTypes[typeId] = spriteType;\r\n    }\r\n\r\n    /*\r\n     * Loads all the textures listed in the texturePaths argument and once\r\n     * that is done it calls the callback function.\r\n     */\r\n    public loadTextures(    texturePaths : Array<string>, \r\n                            renderingSystem : WebGLGameRenderingSystem, \r\n                            callback : Function) : void {\r\n        // THEN LOAD THE TEXTURES WE'LL BE USING\r\n        this.numTexturesToLoad = texturePaths.length;\r\n        this.numTexturesLoaded = 0;\r\n        let thisResourceManager = this;\r\n        let startNumTextures = this.gameTextures.length;\r\n        for (let i : number = 0; i < this.numTexturesToLoad; i++) {\r\n            let textureToLoad : WebGLGameTexture = new WebGLGameTexture();\r\n            let textureId = startNumTextures + i;\r\n            thisResourceManager.gameTextures[textureId] = textureToLoad;\r\n            thisResourceManager.gameTextureIds[texturePaths[i]] = textureId;\r\n            thisResourceManager.loadImage(texturePaths[i], textureId, function(id : number, image : HTMLImageElement) {\r\n                renderingSystem.initWebGLTexture(textureToLoad, id, image, function() {\r\n                    thisResourceManager.completeLoadingTexture(callback);\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    /*\r\n     * Loads all the sprite types listed in the spriteTypePaths argument and once\r\n     * that is done it calls the callback function.\r\n     */\r\n    public loadSpriteTypes(spriteTypePaths : Array<string>, \r\n                    callback : Function) : void {\r\n        // THEN LOAD THE TEXTURES WE'LL BE USING\r\n        this.numSpriteTypesToLoad = spriteTypePaths.length;\r\n        this.numSpriteTypesLoaded = 0;\r\n        let thisResourceManager = this;\r\n        let startNumSpriteTypes = this.gameSpriteTypes.length;\r\n        for (let i : number = 0; i < this.numSpriteTypesToLoad; i++) {\r\n            let spriteTypeId = startNumSpriteTypes + i;\r\n            this.loadSpriteType(spriteTypePaths[i], spriteTypeId, function() {\r\n                thisResourceManager.completeLoadingSpriteType(callback);\r\n            });\r\n        }\r\n    }\r\n\r\n    // PRIVATE HELPER METHODS\r\n\r\n    // LOADS A NEW JSON FILE AND UPON COMPLETION CALLS THE callback FUNCTION\r\n    private loadJsonFile(testFilePath : string, callback : Function) : void {\r\n        let xobj : XMLHttpRequest = new XMLHttpRequest();\r\n        xobj.overrideMimeType(\"application/json\");\r\n        xobj.open('GET', testFilePath, true);\r\n        xobj.onreadystatechange = function () {\r\n            if ((xobj.readyState == 4) && (xobj.status == 200)) {\r\n                callback(xobj.responseText);\r\n            }\r\n        };\r\n        xobj.send(null);\r\n    }\r\n\r\n    // CHECKS TO SEE IF ALL TEXTURE LOADING IS COMPLETE, IF YES, callback IS INVOKED\r\n    private completeLoadingTexture(callback : Function) : void {\r\n        this.numTexturesLoaded++;\r\n        if (this.numTexturesLoaded === this.numTexturesToLoad) {\r\n            callback();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Loads an Image into RAM and once that process is complete it\r\n     * calls the callback method argument, presumably to then load\r\n     * it into GPU memory.\r\n     */\r\n    private loadImage(path : string, id : number, callback : Function) : void {\r\n        // MAKE THE IMAGE\r\n        var image = new Image();\r\n\r\n        // ONCE THE IMAGE LOADING IS COMPLETED, THE CALLBACK WILL GET CALLED\r\n        image.onload = function () { \r\n            callback(id, image); \r\n        }\r\n\r\n        // START IMAGE LOADING\r\n        image.src = path;\r\n    }\r\n\r\n    /*\r\n     * This function loads a single sprite type resource from a JSON file and upon\r\n     * completion calls the callback function.\r\n     */\r\n    private loadSpriteType(jsonFilePath : string, spriteTypeId : number, callback : Function) : void {\r\n        let thisResourceManager : ResourceManager = this;\r\n        this.loadJsonFile(jsonFilePath, function(jsonText : string) {\r\n            let spriteType : AnimatedSpriteType = thisResourceManager.loadSpriteTypeData(jsonText);\r\n            thisResourceManager.gameSpriteTypes[spriteTypeId] = spriteType;\r\n            thisResourceManager.gameSpriteTypeIds[jsonFilePath] = spriteTypeId;\r\n            callback();\r\n        });\r\n    }\r\n\r\n    /*\r\n     * This helper function loads all the json text into an AnimatedSpriteType\r\n     * object and returns it.\r\n     */\r\n    private loadSpriteTypeData = (jsonText : string) : AnimatedSpriteType => {\r\n        let jsonData : SpriteTypeData = <SpriteTypeData>JSON.parse(jsonText);\r\n        let texturePath = jsonData.spriteSheetImage;\r\n        let textureId = this.gameTextureIds[texturePath];\r\n        let texture : WebGLGameTexture = this.gameTextures[textureId];\r\n        let spriteWidth : number = jsonData.spriteWidth;\r\n        let spriteHeight : number = jsonData.spriteHeight;\r\n        let animatedSpriteType = new AnimatedSpriteType(texture, spriteWidth, spriteHeight);\r\n        for (let i = 0; i < jsonData.animations.length; i++) {\r\n            let animation = <AnimationStateData>jsonData.animations[i];\r\n            animatedSpriteType.addAnimation(animation.name);\r\n            for (var j = 0; j < animation.frames.length; j++) {\r\n                var frame = animation.frames[j];\r\n                animatedSpriteType.addAnimationFrame(animation.name, frame.index, frame.duration);\r\n            }\r\n        }\r\n        return animatedSpriteType;\r\n    }\r\n\r\n    // CHECKS TO SEE IF ALL SPRITE TYPE LOADING IS COMPLETE, IF YES, callback IS INVOKED\r\n    private completeLoadingSpriteType(callback : Function) : void {\r\n        this.numSpriteTypesLoaded++;\r\n        if (this.numSpriteTypesLoaded === this.numSpriteTypesToLoad) {\r\n            callback();\r\n        }\r\n    }    \r\n}","export abstract class GameLoopTemplate {\r\n    // ALL INSTANCE VARIABLES WILL BE INITIALIZED VIA THE CONSTRUCTOR\r\n    private fps: number;\r\n    private simulationTimestep: number;\r\n    private frameDelta: number;\r\n    private lastFrameTimeMs: number;\r\n    private fpsAlpha: number;\r\n    private fpsUpdateInterval: number;\r\n    private lastFpsUpdate: number;\r\n    private framesSinceLastFpsUpdate: number;\r\n    private numUpdateSteps: number;\r\n    private minFrameDelay: number;\r\n    private running: boolean;\r\n    private started: boolean;\r\n    private panic: boolean;\r\n    private raf: number;\r\n\r\n    constructor() {\r\n        // An exponential moving average of the frames per second.\r\n        this.fps = 60;\r\n\r\n        // The amount of time (in milliseconds) to simulate each time update() runs.\r\n        // See `MainLoop.setSimulationTimestep()` for details.\r\n        this.simulationTimestep = 1000 / this.fps;\r\n\r\n        // The cumulative amount of in-app time that hasn't been simulated yet.\r\n        // See the comments inside animate() for details.\r\n        this.frameDelta = 0;\r\n\r\n        // The timestamp in milliseconds of the last time the main loop was run.\r\n        // Used to compute the time elapsed between frames.\r\n        this.lastFrameTimeMs = 0;\r\n\r\n        // A factor that affects how heavily to weight more recent seconds'\r\n        // performance when calculating the average frames per second. Valid values\r\n        // range from zero to one inclusive. Higher values result in weighting more\r\n        // recent seconds more heavily.\r\n        this.fpsAlpha = 0.9;\r\n\r\n        // The minimum duration between updates to the frames-per-second estimate.\r\n        // Higher values increase accuracy, but result in slower updates.\r\n        this.fpsUpdateInterval = 1000;\r\n\r\n        // The timestamp (in milliseconds) of the last time the `fps` moving\r\n        // average was updated.\r\n        this.lastFpsUpdate = 0;\r\n\r\n        // The number of frames delivered since the last time the `fps` moving\r\n        // average was updated (i.e. since `lastFpsUpdate`).\r\n        this.framesSinceLastFpsUpdate = 0;\r\n\r\n        // The number of times update() is called in a given frame. This is only\r\n        // relevant inside of animate(), but a reference is held externally so that\r\n        // this variable is not marked for garbage collection every time the main\r\n        // loop runs.\r\n        this.numUpdateSteps = 0;\r\n\r\n        // The minimum amount of time in milliseconds that must pass since the last\r\n        // frame was executed before another frame can be executed. The\r\n        // multiplicative inverse caps the FPS (the default of zero means there is\r\n        // no cap).\r\n        this.minFrameDelay = 0;\r\n\r\n        // Whether the main loop is running.\r\n        this.running = false;\r\n\r\n        // `true` if `MainLoop.start()` has been called and the most recent time it\r\n        // was called has not been followed by a call to `MainLoop.stop()`. This is\r\n        // different than `running` because there is a delay of a few milliseconds\r\n        // after `MainLoop.start()` is called before the application is considered\r\n        // \"running.\" This delay is due to waiting for the next frame.\r\n        this.started = false;\r\n\r\n        // Whether the simulation has fallen too far behind real time.\r\n        // Specifically, `panic` will be set to `true` if too many updates occur in\r\n        // one frame. This is only relevant inside of animate(), but a reference is\r\n        // held externally so that this variable is not marked for garbage\r\n        // collection every time the main loop runs.\r\n        this.panic = false;\r\n    }\r\n\r\n    /**\r\n     * Gets how many milliseconds should be simulated by every run of update().\r\n     *\r\n     * See `MainLoop.setSimulationTimestep()` for details on this value.\r\n     *\r\n     * @return {Number}\r\n     *   The number of milliseconds that should be simulated by every run of\r\n     *   {@link #setUpdate update}().\r\n     */\r\n    getSimulationTimestep(): number {\r\n        return this.simulationTimestep;\r\n    }\r\n\r\n    /**\r\n     * Sets how many milliseconds should be simulated by every run of update().\r\n     *\r\n     * The perceived frames per second (FPS) is effectively capped at the\r\n     * multiplicative inverse of the simulation timestep. That is, if the\r\n     * timestep is 1000 / 60 (which is the default), then the maximum perceived\r\n     * FPS is effectively 60. Decreasing the timestep increases the maximum\r\n     * perceived FPS at the cost of running {@link #setUpdate update}() more\r\n     * times per frame at lower frame rates. Since running update() more times\r\n     * takes more time to process, this can actually slow down the frame rate.\r\n     * Additionally, if the amount of time it takes to run update() exceeds or\r\n     * very nearly exceeds the timestep, the application will freeze and crash\r\n     * in a spiral of death (unless it is rescued; see `MainLoop.setEnd()` for\r\n     * an explanation of what can be done if a spiral of death is occurring).\r\n     *\r\n     * The exception to this is that interpolating between updates for each\r\n     * render can increase the perceived frame rate and reduce visual\r\n     * stuttering. See `MainLoop.setDraw()` for an explanation of how to do\r\n     * this.\r\n     *\r\n     * If you are considering decreasing the simulation timestep in order to\r\n     * raise the maximum perceived FPS, keep in mind that most monitors can't\r\n     * display more than 60 FPS. Whether humans can tell the difference among\r\n     * high frame rates depends on the application, but for reference, film is\r\n     * usually displayed at 24 FPS, other videos at 30 FPS, most games are\r\n     * acceptable above 30 FPS, and virtual reality might require 75 FPS to\r\n     * feel natural. Some gaming monitors go up to 144 FPS. Setting the\r\n     * timestep below 1000 / 144 is discouraged and below 1000 / 240 is\r\n     * strongly discouraged. The default of 1000 / 60 is good in most cases.\r\n     *\r\n     * The simulation timestep should typically only be changed at\r\n     * deterministic times (e.g. before the main loop starts for the first\r\n     * time, and not in response to user input or slow frame rates) to avoid\r\n     * introducing non-deterministic behavior. The update timestep should be\r\n     * the same for all players/users in multiplayer/multi-user applications.\r\n     *\r\n     * See also `MainLoop.getSimulationTimestep()`.\r\n     *\r\n     * @param {Number} timestep\r\n     *   The number of milliseconds that should be simulated by every run of\r\n     *   {@link #setUpdate update}().\r\n     */\r\n    setSimulationTimestep(timestep: number): void {\r\n        this.simulationTimestep = timestep;\r\n    }\r\n\r\n    /**\r\n     * Returns the exponential moving average of the frames per second.\r\n     *\r\n     * @return {Number}\r\n     *   The exponential moving average of the frames per second.\r\n     */\r\n    getFPS(): number {\r\n        return this.fps;\r\n    }\r\n\r\n    /**\r\n     * Gets the maximum frame rate.\r\n     *\r\n     * Other factors also limit the FPS; see `MainLoop.setSimulationTimestep`\r\n     * for details.\r\n     *\r\n     * See also `MainLoop.setMaxAllowedFPS()`.\r\n     *\r\n     * @return {Number}\r\n     *   The maximum number of frames per second allowed.\r\n     */\r\n    getMaxAllowedFPS(): number {\r\n        return 1000 / this.minFrameDelay;\r\n    }\r\n\r\n    /**\r\n     * Sets a maximum frame rate.\r\n     *\r\n     * See also `MainLoop.getMaxAllowedFPS()`.\r\n     *\r\n     * @param {Number} [fps=Infinity]\r\n     *   The maximum number of frames per second to execute. If Infinity or not\r\n     *   passed, there will be no FPS cap (although other factors do limit the\r\n     *   FPS; see `MainLoop.setSimulationTimestep` for details). If zero, this\r\n     *   will stop the loop, and when the loop is next started, it will return\r\n     *   to the previous maximum frame rate. Passing negative values will stall\r\n     *   the loop until this function is called again with a positive value.\r\n     *\r\n     * @chainable\r\n     */\r\n    setMaxAllowedFPS(fps: number): void {\r\n        if (typeof fps === 'undefined') {\r\n            fps = Infinity;\r\n        }\r\n        if (fps === 0) {\r\n            this.stop();\r\n        }\r\n        else {\r\n            // Dividing by Infinity returns zero.\r\n            this.minFrameDelay = 1000 / fps;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Reset the amount of time that has not yet been simulated to zero.\r\n     *\r\n     * This introduces non-deterministic behavior if called after the\r\n     * application has started running (unless it is being reset, in which case\r\n     * it doesn't matter). However, this can be useful in cases where the\r\n     * amount of time that has not yet been simulated has grown very large\r\n     * (for example, when the application's tab gets put in the background and\r\n     * the browser throttles the timers as a result). In applications with\r\n     * lockstep the player would get dropped, but in other networked\r\n     * applications it may be necessary to snap or ease the player/user to the\r\n     * authoritative state and discard pending updates in the process. In\r\n     * non-networked applications it may also be acceptable to simply resume\r\n     * the application where it last left off and ignore the accumulated\r\n     * unsimulated time.\r\n     *\r\n     * @return {Number}\r\n     *   The cumulative amount of elapsed time in milliseconds that has not yet\r\n     *   been simulated, but is being discarded as a result of calling this\r\n     *   function.\r\n     */\r\n    resetFrameDelta() : number {\r\n        var oldFrameDelta = this.frameDelta;\r\n        this.frameDelta = 0;\r\n        return oldFrameDelta;\r\n    }\r\n\r\n    /**\r\n     * Starts the main loop.\r\n     *\r\n     * Note that the application is not considered \"running\" immediately after\r\n     * this function returns; rather, it is considered \"running\" after the\r\n     * application draws its first frame. The distinction is that event\r\n     * handlers should remain paused until the application is running, even\r\n     * after `MainLoop.start()` is called. Check `MainLoop.isRunning()` for the\r\n     * current status. To act after the application starts, register a callback\r\n     * with requestAnimationFrame() after calling this function and execute the\r\n     * action in that callback. It is safe to call `MainLoop.start()` multiple\r\n     * times even before the application starts running and without calling\r\n     * `MainLoop.stop()` in between, although there is no reason to do this;\r\n     * the main loop will only start if it is not already started.\r\n     *\r\n     * See also `MainLoop.stop()`.\r\n     */\r\n    start(): void {\r\n        if (!this.started) {\r\n            // Since the application doesn't start running immediately, track\r\n            // whether this function was called and use that to keep it from\r\n            // starting the main loop multiple times.\r\n            this.started = true;\r\n\r\n            // In the main loop, draw() is called after update(), so if we\r\n            // entered the main loop immediately, we would never render the\r\n            // initial state before any updates occur. Instead, we run one\r\n            // frame where all we do is draw, and then start the main loop with\r\n            // the next frame.\r\n            this.raf = requestAnimationFrame(this.startLoop.bind(this));\r\n        }\r\n    }\r\n\r\n    startLoop(timestamp : number): void {\r\n        // Render the initial state before any updates occur.\r\n        this.draw(1);\r\n\r\n        // The application isn't considered \"running\" until the\r\n        // application starts drawing.\r\n        this.running = true;\r\n\r\n        // Reset variables that are used for tracking time so that we\r\n        // don't simulate time passed while the application was paused.\r\n        this.lastFrameTimeMs = timestamp;\r\n        this.lastFpsUpdate = timestamp;\r\n        this.framesSinceLastFpsUpdate = 0;\r\n\r\n        // Start the main loop.\r\n        this.raf = window.requestAnimationFrame(this.animate.bind(this));\r\n    }\r\n\r\n    /**\r\n     * Returns whether the main loop is currently running.\r\n     *\r\n     * See also `MainLoop.start()` and `MainLoop.stop()`.\r\n     *\r\n     * @return {Boolean}\r\n     *   Whether the main loop is currently running.\r\n     */\r\n    isRunning(): boolean {\r\n        return this.running;\r\n    }\r\n\r\n    /**\r\n     * Stops the main loop.\r\n     *\r\n     * Event handling and other background tasks should also be paused when the\r\n     * main loop is paused.\r\n     *\r\n     * Note that pausing in multiplayer/multi-user applications will cause the\r\n     * player's/user's client to become out of sync. In this case the\r\n     * simulation should exit, or the player/user needs to be snapped to their\r\n     * updated position when the main loop is started again.\r\n     *\r\n     * See also `MainLoop.start()` and `MainLoop.isRunning()`.\r\n     */\r\n    stop(): void {\r\n        this.running = false;\r\n        this.started = false;\r\n        window.cancelAnimationFrame(this.raf);\r\n    }\r\n\r\n    /**\r\n     * The main loop that runs updates and rendering.\r\n     * \r\n     * @param {DOMHighResTimeStamp} timestamp\r\n     * The current timestamp. In practice this is supplied by\r\n     * requestAnimationFrame at the time that it starts to fire callbacks. This\r\n     * should only be used for comparison to other timestamps because the epoch\r\n     * (i.e. the \"zero\" time) depends on the engine running this code. In engines\r\n     * that support `DOMHighResTimeStamp` (all modern browsers except iOS Safari\r\n     * 8) the epoch is the time the page started loading, specifically\r\n     * `performance.timing.navigationStart`. Everywhere else, including node.js,\r\n     * the epoch is the Unix epoch (1970-01-01T00:00:00Z).\r\n     * \r\n     * @ignore\r\n     */\r\n    animate(timestamp : number): void {\r\n        // Run the loop again the next time the browser is ready to render.\r\n        // We set rafHandle immediately so that the next frame can be canceled\r\n        // during the current frame.\r\n        this.raf = window.requestAnimationFrame(this.animate.bind(this));\r\n\r\n        // Throttle the frame rate (if minFrameDelay is set to a non-zero value by\r\n        // `MainLoop.setMaxAllowedFPS()`).\r\n        if (timestamp < this.lastFrameTimeMs + this.minFrameDelay) {\r\n            return;\r\n        }\r\n\r\n        // frameDelta is the cumulative amount of in-app time that hasn't been\r\n        // simulated yet. Add the time since the last frame. We need to track total\r\n        // not-yet-simulated time (as opposed to just the time elapsed since the\r\n        // last frame) because not all actually elapsed time is guaranteed to be\r\n        // simulated each frame. See the comments below for details.\r\n        this.frameDelta += timestamp - this.lastFrameTimeMs;\r\n        this.lastFrameTimeMs = timestamp;\r\n\r\n        // Run any updates that are not dependent on time in the simulation. See\r\n        // `MainLoop.setBegin()` for additional details on how to use this.\r\n        this.begin(timestamp, this.frameDelta);\r\n\r\n        // Update the estimate of the frame rate, `fps`. Approximately every\r\n        // second, the number of frames that occurred in that second are included\r\n        // in an exponential moving average of all frames per second. This means\r\n        // that more recent seconds affect the estimated frame rate more than older\r\n        // seconds.\r\n        if (timestamp > this.lastFpsUpdate + this.fpsUpdateInterval) {\r\n            // Compute the new exponential moving average.\r\n            this.fps =\r\n                // Divide the number of frames since the last FPS update by the\r\n                // amount of time that has passed to get the mean frames per second\r\n                // over that period. This is necessary because slightly more than a\r\n                // second has likely passed since the last update.\r\n                this.fpsAlpha * this.framesSinceLastFpsUpdate * 1000 / (timestamp - this.lastFpsUpdate) +\r\n                (1 - this.fpsAlpha) * this.fps;\r\n\r\n            // Reset the frame counter and last-updated timestamp since their\r\n            // latest values have now been incorporated into the FPS estimate.\r\n            this.lastFpsUpdate = timestamp;\r\n            this.framesSinceLastFpsUpdate = 0;\r\n        }\r\n        // Count the current frame in the next frames-per-second update. This\r\n        // happens after the previous section because the previous section\r\n        // calculates the frames that occur up until `timestamp`, and `timestamp`\r\n        // refers to a time just before the current frame was delivered.\r\n        this.framesSinceLastFpsUpdate++;\r\n\r\n        /*\r\n         * A naive way to move an object along its X-axis might be to write a main\r\n         * loop containing the statement `obj.x += 10;` which would move the object\r\n         * 10 units per frame. This approach suffers from the issue that it is\r\n         * dependent on the frame rate. In other words, if your application is\r\n         * running slowly (that is, fewer frames per second), your object will also\r\n         * appear to move slowly, whereas if your application is running quickly\r\n         * (that is, more frames per second), your object will appear to move\r\n         * quickly. This is undesirable, especially in multiplayer/multi-user\r\n         * applications.\r\n         *\r\n         * One solution is to multiply the speed by the amount of time that has\r\n         * passed between rendering frames. For example, if you want your object to\r\n         * move 600 units per second, you might write `obj.x += 600 * delta`, where\r\n         * `delta` is the time passed since the last frame. (For convenience, let's\r\n         * move this statement to an update() function that takes `delta` as a\r\n         * parameter.) This way, your object will move a constant distance over\r\n         * time. However, at low frame rates and high speeds, your object will move\r\n         * large distances every frame, which can cause it to do strange things\r\n         * such as move through walls. Additionally, we would like our program to\r\n         * be deterministic. That is, every time we run the application with the\r\n         * same input, we would like exactly the same output. If the time between\r\n         * frames (the `delta`) varies, our output will diverge the longer the\r\n         * program runs due to accumulated rounding errors, even at normal frame\r\n         * rates.\r\n         *\r\n         * A better solution is to separate the amount of time simulated in each\r\n         * update() from the amount of time between frames. Our update() function\r\n         * doesn't need to change; we just need to change the delta we pass to it\r\n         * so that each update() simulates a fixed amount of time (that is, `delta`\r\n         * should have the same value each time update() is called). The update()\r\n         * function can be run multiple times per frame if needed to simulate the\r\n         * total amount of time passed since the last frame. (If the time that has\r\n         * passed since the last frame is less than the fixed simulation time, we\r\n         * just won't run an update() until the the next frame. If there is\r\n         * unsimulated time left over that is less than our timestep, we'll just\r\n         * leave it to be simulated during the next frame.) This approach avoids\r\n         * inconsistent rounding errors and ensures that there are no giant leaps\r\n         * through walls between frames.\r\n         *\r\n         * That is what is done below. It introduces a new problem, but it is a\r\n         * manageable one: if the amount of time spent simulating is consistently\r\n         * longer than the amount of time between frames, the application could\r\n         * freeze and crash in a spiral of death. This won't happen as long as the\r\n         * fixed simulation time is set to a value that is high enough that\r\n         * update() calls usually take less time than the amount of time they're\r\n         * simulating. If it does start to happen anyway, see `MainLoop.setEnd()`\r\n         * for a discussion of ways to stop it.\r\n         *\r\n         * Additionally, see `MainLoop.setUpdate()` for a discussion of performance\r\n         * considerations.\r\n         *\r\n         * Further reading for those interested:\r\n         *\r\n         * - http://gameprogrammingpatterns.com/game-loop.html\r\n         * - http://gafferongames.com/game-physics/fix-your-timestep/\r\n         * - https://gamealchemist.wordpress.com/2013/03/16/thoughts-on-the-javascript-game-loop/\r\n         * - https://developer.mozilla.org/en-US/docs/Games/Anatomy\r\n         */\r\n        this.numUpdateSteps = 0;\r\n        while (this.frameDelta >= this.simulationTimestep) {\r\n            this.update(this.simulationTimestep);\r\n            this.frameDelta -= this.simulationTimestep;\r\n\r\n            /*\r\n             * Sanity check: bail if we run the loop too many times.\r\n             *\r\n             * One way this could happen is if update() takes longer to run than\r\n             * the time it simulates, thereby causing a spiral of death. For ways\r\n             * to avoid this, see `MainLoop.setEnd()`. Another way this could\r\n             * happen is if the browser throttles serving frames, which typically\r\n             * occurs when the tab is in the background or the device battery is\r\n             * low. An event outside of the main loop such as audio processing or\r\n             * synchronous resource reads could also cause the application to hang\r\n             * temporarily and accumulate not-yet-simulated time as a result.\r\n             *\r\n             * 240 is chosen because, for any sane value of simulationTimestep, 240\r\n             * updates will simulate at least one second, and it will simulate four\r\n             * seconds with the default value of simulationTimestep. (Safari\r\n             * notifies users that the script is taking too long to run if it takes\r\n             * more than five seconds.)\r\n             *\r\n             * If there are more updates to run in a frame than this, the\r\n             * application will appear to slow down to the user until it catches\r\n             * back up. In networked applications this will usually cause the user\r\n             * to get out of sync with their peers, but if the updates are taking\r\n             * this long already, they're probably already out of sync.\r\n             */\r\n            if (++this.numUpdateSteps >= 240) {\r\n                this.panic = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        /*\r\n         * Render the screen. We do this regardless of whether update() has run\r\n         * during this frame because it is possible to interpolate between updates\r\n         * to make the frame rate appear faster than updates are actually\r\n         * happening. See `MainLoop.setDraw()` for an explanation of how to do\r\n         * that.\r\n         *\r\n         * We draw after updating because we want the screen to reflect a state of\r\n         * the application that is as up-to-date as possible. (`MainLoop.start()`\r\n         * draws the very first frame in the application's initial state, before\r\n         * any updates have occurred.) Some sources speculate that rendering\r\n         * earlier in the requestAnimationFrame callback can get the screen painted\r\n         * faster; this is mostly not true, and even when it is, it's usually just\r\n         * a trade-off between rendering the current frame sooner and rendering the\r\n         * next frame later.\r\n         *\r\n         * See `MainLoop.setDraw()` for details about draw() itself.\r\n         */\r\n        this.draw(this.frameDelta / this.simulationTimestep);\r\n\r\n        // Run any updates that are not dependent on time in the simulation. See\r\n        // `MainLoop.setEnd()` for additional details on how to use this.\r\n        this.end(this.fps, this.panic);\r\n\r\n        this.panic = false;\r\n    }\r\n\r\n    // SUBCLASSES MUST OVERRIDE FOUR REQUIRED METHODS:\r\n        // begin\r\n        // update\r\n        // draw\r\n        // end\r\n\r\n    /**\r\n     * A function that runs at the beginning of the main loop.\r\n     *\r\n     * The begin() function is typically used to process input before the\r\n     * updates run. Processing input here (in chunks) can reduce the running\r\n     * time of event handlers, which is useful because long-running event\r\n     * handlers can sometimes delay frames.\r\n     *\r\n     * Unlike {@link #setUpdate update}(), which can run zero or more times per\r\n     * frame, begin() always runs exactly once per frame. This makes it useful\r\n     * for any updates that are not dependent on time in the simulation.\r\n     * Examples include adjusting HUD calculations or performing long-running\r\n     * updates incrementally. Compared to {@link #setEnd end}(), generally\r\n     * actions should occur in begin() if they affect anything that\r\n     * {@link #setUpdate update}() or {@link #setDraw draw}() use.\r\n     *\r\n     * @param {Function} begin\r\n     *   The begin() function.\r\n     * @param {Number} [begin.timestamp]\r\n     *   The current timestamp (when the frame started), in milliseconds. This\r\n     *   should only be used for comparison to other timestamps because the\r\n     *   epoch (i.e. the \"zero\" time) depends on the engine running this code.\r\n     *   In engines that support `DOMHighResTimeStamp` (all modern browsers\r\n     *   except iOS Safari 8) the epoch is the time the page started loading,\r\n     *   specifically `performance.timing.navigationStart`. Everywhere else,\r\n     *   including node.js, the epoch is the Unix epoch (1970-01-01T00:00:00Z).\r\n     * @param {Number} [begin.delta]\r\n     *   The total elapsed time that has not yet been simulated, in\r\n     *   milliseconds.\r\n     */\r\n    abstract begin(timestamp : number, delta : number) : void;\r\n\r\n    /**\r\n     * A function that runs updates (i.e. AI and physics).\r\n     *\r\n     * The update() function should simulate anything that is affected by time.\r\n     * It can be called zero or more times per frame depending on the frame\r\n     * rate.\r\n     *\r\n     * As with everything in the main loop, the running time of update()\r\n     * directly affects the frame rate. If update() takes long enough that the\r\n     * frame rate drops below the target (\"budgeted\") frame rate, parts of the\r\n     * update() function that do not need to execute between every frame can be\r\n     * moved into Web Workers. (Various sources on the internet sometimes\r\n     * suggest other scheduling patterns using setTimeout() or setInterval().\r\n     * These approaches sometimes offer modest improvements with minimal\r\n     * changes to existing code, but because JavaScript is single-threaded, the\r\n     * updates will still block rendering and drag down the frame rate. Web\r\n     * Workers execute in separate threads, so they free up more time in the\r\n     * main loop.)\r\n     *\r\n     * This script can be imported into a Web Worker using importScripts() and\r\n     * used to run a second main loop in the worker. Some considerations:\r\n     *\r\n     * - Profile your code before doing the work to move it into Web Workers.\r\n     *   It could be the rendering that is the bottleneck, in which case the\r\n     *   solution is to decrease the visual complexity of the scene.\r\n     * - It doesn't make sense to move the *entire* contents of update() into\r\n     *   workers unless {@link #setDraw draw}() can interpolate between frames.\r\n     *   The lowest-hanging fruit is background updates (like calculating\r\n     *   citizens' happiness in a city-building game), physics that doesn't\r\n     *   affect the scene (like flags waving in the wind), and anything that is\r\n     *   occluded or happening far off screen.\r\n     * - If draw() needs to interpolate physics based on activity that occurs\r\n     *   in a worker, the worker needs to pass the interpolation value back to\r\n     *   the main thread so that is is available to draw().\r\n     * - Web Workers can't access the state of the main thread, so they can't\r\n     *   directly modify objects in your scene. Moving data to and from Web\r\n     *   Workers is a pain. The fastest way to do it is with Transferable\r\n     *   Objects: basically, you can pass an ArrayBuffer to a worker,\r\n     *   destroying the original reference in the process.\r\n     *\r\n     * You can read more about Web Workers and Transferable Objects at\r\n     * [HTML5 Rocks](http://www.html5rocks.com/en/tutorials/workers/basics/).\r\n     *\r\n     * @param {Function} update\r\n     *   The update() function.\r\n     * @param {Number} [update.delta]\r\n     *   The amount of time in milliseconds to simulate in the update. In most\r\n     *   cases this timestep never changes in order to ensure deterministic\r\n     *   updates. The timestep is the same as that returned by\r\n     *   `MainLoop.getSimulationTimestep()`.\r\n     */\r\n    abstract update(timeStep : number) : void;\r\n\r\n    /**\r\n     * A function that draws things on the screen.\r\n     *\r\n     * The draw() function gets passed the percent of time that the next run of\r\n     * {@link #setUpdate update}() will simulate that has actually elapsed, as\r\n     * a decimal. In other words, draw() gets passed how far between update()\r\n     * calls it is. This is useful because the time simulated by update() and\r\n     * the time between draw() calls is usually different, so the parameter to\r\n     * draw() can be used to interpolate motion between frames to make\r\n     * rendering appear smoother. To illustrate, if update() advances the\r\n     * simulation at each vertical bar in the first row below, and draw() calls\r\n     * happen at each vertical bar in the second row below, then some frames\r\n     * will have time left over that is not yet simulated by update() when\r\n     * rendering occurs in draw():\r\n     *\r\n     *     update() timesteps:  |  |  |  |  |  |  |  |  |\r\n     *     draw() calls:        |   |   |   |   |   |   |\r\n     *\r\n     * To interpolate motion for rendering purposes, objects' state after the\r\n     * last update() must be retained and used to calculate an intermediate\r\n     * state. Note that this means renders will be up to one update() behind.\r\n     * This is still better than extrapolating (projecting objects' state after\r\n     * a future update()) which can produce bizarre results. Storing multiple\r\n     * states can be difficult to set up, and keep in mind that running this\r\n     * process takes time that could push the frame rate down, so it's often\r\n     * not worthwhile unless stuttering is visible.\r\n     *\r\n     * @param {Function} draw\r\n     *   The draw() function.\r\n     * @param {Number} [draw.interpolationPercentage]\r\n     *   The cumulative amount of time that hasn't been simulated yet, divided\r\n     *   by the amount of time that will be simulated the next time update()\r\n     *   runs. Useful for interpolating frames.\r\n     */\r\n    public abstract draw(interpolationPercentage : number) : void;\r\n\r\n    /**\r\n     * A function that runs at the end of the main loop.\r\n     *\r\n     * Unlike {@link #setUpdate update}(), which can run zero or more times per\r\n     * frame, end() always runs exactly once per frame. This makes it useful\r\n     * for any updates that are not dependent on time in the simulation.\r\n     * Examples include cleaning up any temporary state set up by\r\n     * {@link #setBegin begin}(), lowering the visual quality if the frame rate\r\n     * is too low, or performing long-running updates incrementally. Compared\r\n     * to begin(), generally actions should occur in end() if they use anything\r\n     * that update() or {@link #setDraw draw}() affect.\r\n     *\r\n     * @param {Function} end\r\n     *   The end() function.\r\n     * @param {Number} [end.fps]\r\n     *   The exponential moving average of the frames per second. This is the\r\n     *   same value returned by `MainLoop.getFPS()`. It can be used to take\r\n     *   action when the FPS is too low (or to restore to normalcy if the FPS\r\n     *   moves back up). Examples of actions to take if the FPS is too low\r\n     *   include exiting the application, lowering the visual quality, stopping\r\n     *   or reducing activities outside of the main loop like event handlers or\r\n     *   audio playback, performing non-critical updates less frequently, or\r\n     *   increasing the simulation timestep (by calling\r\n     *   `MainLoop.setSimulationTimestep()`). Note that this last option\r\n     *   results in more time being simulated per update() call, which causes\r\n     *   the application to behave non-deterministically.\r\n     * @param {Boolean} [end.panic=false]\r\n     *   Indicates whether the simulation has fallen too far behind real time.\r\n     *   Specifically, `panic` will be `true` if too many updates occurred in\r\n     *   one frame. In networked lockstep applications, the application should\r\n     *   wait for some amount of time to see if the user can catch up before\r\n     *   dropping the user. In networked but non-lockstep applications, this\r\n     *   typically indicates that the user needs to be snapped or eased to the\r\n     *   current authoritative state. When this happens, it may be convenient\r\n     *   to call `MainLoop.resetFrameDelta()` to discard accumulated pending\r\n     *   updates. In non-networked applications, it may be acceptable to allow\r\n     *   the application to keep running for awhile to see if it will catch up.\r\n     *   However, this could also cause the application to look like it is\r\n     *   running very quickly for a few frames as it transitions through the\r\n     *   intermediate states. An alternative that may be acceptable is to\r\n     *   simply ignore the unsimulated elapsed time by calling\r\n     *   `MainLoop.resetFrameDelta()` even though this introduces\r\n     *   non-deterministic behavior. In all cases, if the application panics\r\n     *   frequently, this is an indication that the main loop is running too\r\n     *   slowly. However, most of the time the drop in frame rate will probably\r\n     *   be noticeable before a panic occurs. To help the application catch up\r\n     *   after a panic caused by a spiral of death, the same steps can be taken\r\n     *   that are suggested above if the FPS drops too low.\r\n     */\r\n    abstract end(fps : number, panic : boolean) : void;\r\n}","/*\r\n * MathUtilities provides a number of services for rendering using 4x4 matrices, like\r\n * transformting (i.e. translation, rotation, and scaling) 3d or 2d points from world\r\n * coordinate systems to screen coordinate systems.\r\n */\r\nimport {Matrix} from './Matrix'\r\nimport {Vector3} from './Vector3'\r\n\r\nexport namespace MathUtilities {\r\n    export function determinant4x4(result : Matrix) : number {\r\n        let det0 = result.get(0, 0) * (\r\n            (result.get(1, 1) * ((result.get(2, 2) * result.get(3, 3)) - (result.get(2, 3) * result.get(3, 2))))\r\n            - (result.get(1, 2) * ((result.get(2, 1) * result.get(3, 3)) - (result.get(2, 3) * result.get(3, 1))))\r\n            + (result.get(1, 3) * ((result.get(2, 1) * result.get(3, 2)) - (result.get(3, 1) * result.get(2, 2)))));\r\n        let det1 = result.get(0, 1) * (\r\n            (result.get(1, 0) * ((result.get(2, 2) * result.get(3, 3)) - (result.get(2, 3) * result.get(3, 2))))\r\n            - (result.get(1, 2) * ((result.get(2, 0) * result.get(3, 3)) - (result.get(3, 0) * result.get(2, 3))))\r\n            + (result.get(1, 3) * ((result.get(2, 0) * result.get(3, 2)) - (result.get(3, 0) * result.get(2, 2)))));\r\n        let det2 = result.get(0, 2) * (\r\n            (result.get(1, 0) * ((result.get(2, 1) * result.get(3, 3)) - (result.get(2, 3) * result.get(3, 1))))\r\n            - (result.get(1, 1) * ((result.get(2, 0) * result.get(3, 3)) - (result.get(2, 3) * result.get(3, 0))))\r\n            + (result.get(1, 3) * ((result.get(2, 0) * result.get(3, 1)) - (result.get(2, 1) * result.get(3, 0)))));\r\n        let det3 = result.get(0, 3) * (\r\n            (result.get(1, 0) * ((result.get(2, 1) * result.get(3, 2)) - (result.get(2, 2) * result.get(3, 1))))\r\n            - (result.get(1, 1) * ((result.get(2, 0) * result.get(3, 2)) - (result.get(2, 2) * result.get(3, 0))))\r\n            + (result.get(1, 2) * ((result.get(2, 0) * result.get(3, 1)) - (result.get(2, 1) * result.get(3, 0)))));\r\n        let det = det0 - det1 + det2 - det3;\r\n        console.log(\"det = \" + det0 + \" + \" + det1 + \" + \" + det2 + \" + \" + det3);\r\n        return det;\r\n    }\r\n    export function identity(result : Matrix) : void {\r\n        if (result.getRows() === result.getColumns()) {\r\n            for (let i = 0; i < result.getRows(); i++) {\r\n                for (let j = 0; j < result.getColumns(); j++) {\r\n                    if (i === j)\r\n                        result.set(1.0, i, j);\r\n                    else\r\n                        result.set(0.0, i, j);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    export function inverse(result : Matrix, mat : Matrix) : void {\r\n        let det = this.determinant(mat);\r\n        let m00 = mat.get(0, 0); let m01 = mat.get(0, 1); let m02 = mat.get(0, 2); let m03 = mat.get(0, 3);\r\n        let m10 = mat.get(1, 0); let m11 = mat.get(1, 1); let m12 = mat.get(1, 2); let m13 = mat.get(1, 3);\r\n        let m20 = mat.get(2, 0); let m21 = mat.get(2, 1); let m22 = mat.get(2, 2); let m23 = mat.get(2, 3);\r\n        let m30 = mat.get(3, 0); let m31 = mat.get(3, 1); let m32 = mat.get(3, 2); let m33 = mat.get(3, 3);\r\n        let temp = new Matrix(4, 4);\r\n        temp.set((m12 * m23 * m31) - (m13 * m22 * m31) + (m13 * m21 * m32) - (m11 * m23 * m32) - (m12 * m21 * m33) + (m11 * m22 * m33), 0, 0);\r\n        temp.set((m03 * m22 * m31) - (m02 * m23 * m31) - (m03 * m21 * m32) + (m01 * m23 * m32) + (m02 * m21 * m33) - (m01 * m22 * m33), 0, 1);\r\n        temp.set((m02 * m13 * m31) - (m03 * m12 * m31) + (m03 * m11 * m32) - (m01 * m13 * m32) - (m02 * m11 * m33) + (m01 * m12 * m33), 0, 2);\r\n        temp.set((m03 * m12 * m21) - (m02 * m13 * m21) - (m03 * m11 * m22) + (m01 * m13 * m22) + (m02 * m11 * m23) - (m01 * m12 * m23), 0, 3);\r\n        temp.set((m13 * m22 * m30) - (m12 * m23 * m30) - (m13 * m20 * m32) + (m10 * m23 * m32) + (m12 * m20 * m33) - (m10 * m22 * m33), 1, 0);\r\n        temp.set((m02 * m23 * m30) - (m03 * m22 * m30) + (m03 * m20 * m32) - (m00 * m23 * m32) - (m02 * m20 * m33) + (m00 * m22 * m33), 1, 1);\r\n        temp.set((m03 * m12 * m30) - (m02 * m13 * m30) - (m03 * m10 * m32) + (m00 * m13 * m32) + (m02 * m10 * m33) - (m00 * m12 * m33), 1, 2);\r\n        temp.set((m02 * m13 * m20) - (m03 * m12 * m20) + (m03 * m10 * m22) - (m00 * m13 * m22) - (m02 * m10 * m23) + (m00 * m12 * m23), 1, 3);\r\n        temp.set((m11 * m23 * m30) - (m13 * m21 * m30) + (m13 * m20 * m31) - (m10 * m23 * m31) - (m11 * m20 * m33) + (m10 * m21 * m33), 2, 0);\r\n        temp.set((m03 * m21 * m30) - (m01 * m23 * m30) - (m03 * m20 * m31) + (m00 * m23 * m31) + (m01 * m20 * m33) - (m00 * m21 * m33), 2, 1);\r\n        temp.set((m01 * m13 * m30) - (m03 * m11 * m30) + (m03 * m10 * m31) - (m00 * m13 * m31) - (m01 * m10 * m33) + (m00 * m11 * m33), 2, 2);\r\n        temp.set((m03 * m11 * m20) - (m01 * m13 * m20) - (m03 * m10 * m21) + (m00 * m13 * m21) + (m01 * m10 * m23) - (m00 * m11 * m23), 2, 3);\r\n        temp.set((m12 * m21 * m30) - (m11 * m22 * m30) - (m12 * m20 * m31) + (m10 * m22 * m31) + (m11 * m20 * m32) - (m10 * m21 * m32), 3, 0);\r\n        temp.set((m01 * m22 * m30) - (m02 * m21 * m30) + (m02 * m20 * m31) - (m00 * m22 * m31) - (m01 * m20 * m32) + (m00 * m21 * m32), 3, 1);\r\n        temp.set((m02 * m11 * m30) - (m01 * m12 * m30) - (m02 * m10 * m31) + (m00 * m12 * m31) + (m01 * m10 * m32) - (m00 * m11 * m32), 3, 2);\r\n        temp.set((m01 * m12 * m20) - (m02 * m11 * m20) + (m02 * m10 * m21) - (m00 * m12 * m21) - (m01 * m10 * m22) + (m00 * m11 * m22), 3, 3);\r\n        for (let i = 0; i < 4; i++) {\r\n            for (let j = 0; j < 4; j++) {\r\n                result.set(temp.get(i, j) / det, i, j);\r\n            }\r\n        }\r\n    }\r\n    export function model(result : Matrix, translation : Vector3, rotation : Vector3, scale : Vector3) : void {\r\n        // TRANSLATION MATRIX\t\r\n        let translationMatrix = new Matrix(4, 4);\r\n        this.identity(translationMatrix);\r\n        this.translate(translationMatrix, translation);\r\n\r\n        // ROTATION MATRIX\r\n        let rotationMatrix = new Matrix(4, 4);\r\n        this.identity(rotationMatrix);\r\n        this.rotate(rotationMatrix, rotation);\r\n\r\n        // SCALING MATRIX\r\n        let scaleMatrix = new Matrix(4, 4);\r\n        this.identity(scaleMatrix);\r\n        this.scale(scaleMatrix, scale);\r\n\r\n        // AND NOW MULTIPLY THEM TOGETHER IN THE CORRECT ORDER\r\n        let tempMatrix = new Matrix(4, 4);\r\n        this.multiply(tempMatrix, translationMatrix, rotationMatrix);\r\n        this.multiply(result, tempMatrix, scaleMatrix);\r\n    }\r\n\r\n    export function multiply(result : Matrix, mat0 : Matrix, mat1 : Matrix) : void {\r\n        // result MIGHT BE mat0 OR mat1 SO IT'S BEST IF WE\r\n        // CALCULATE TEMP VALUES FIRST BEFORE ASSIGNMENT\r\n        let r00 = (mat0.get(0, 0) * mat1.get(0, 0))\r\n            + (mat0.get(0, 1) * mat1.get(1, 0))\r\n            + (mat0.get(0, 2) * mat1.get(2, 0))\r\n            + (mat0.get(0, 3) * mat1.get(3, 0));\r\n        let r10 = (mat0.get(1, 0) * mat1.get(0, 0))\r\n            + (mat0.get(1, 1) * mat1.get(1, 0))\r\n            + (mat0.get(1, 2) * mat1.get(2, 0))\r\n            + (mat0.get(1, 3) * mat1.get(3, 0));\r\n        let r20 = (mat0.get(2, 0) * mat1.get(0, 0))\r\n            + (mat0.get(2, 1) * mat1.get(1, 0))\r\n            + (mat0.get(2, 2) * mat1.get(2, 0))\r\n            + (mat0.get(2, 3) * mat1.get(3, 0));\r\n        let r30 = (mat0.get(3, 0) * mat1.get(0, 0))\r\n            + (mat0.get(3, 1) * mat1.get(1, 0))\r\n            + (mat0.get(3, 2) * mat1.get(2, 0))\r\n            + (mat0.get(3, 3) * mat1.get(3, 0));\r\n        let r01 = (mat0.get(0, 0) * mat1.get(0, 1))\r\n            + (mat0.get(0, 1) * mat1.get(1, 1))\r\n            + (mat0.get(0, 2) * mat1.get(2, 1))\r\n            + (mat0.get(0, 3) * mat1.get(3, 1));\r\n        let r11 = (mat0.get(1, 0) * mat1.get(0, 1))\r\n            + (mat0.get(1, 1) * mat1.get(1, 1))\r\n            + (mat0.get(1, 2) * mat1.get(2, 1))\r\n            + (mat0.get(1, 3) * mat1.get(3, 1));\r\n        let r21 = (mat0.get(2, 0) * mat1.get(0, 1))\r\n            + (mat0.get(2, 1) * mat1.get(1, 1))\r\n            + (mat0.get(2, 2) * mat1.get(2, 1))\r\n            + (mat0.get(2, 3) * mat1.get(3, 1));\r\n        let r31 = (mat0.get(3, 0) * mat1.get(0, 1))\r\n            + (mat0.get(3, 1) * mat1.get(1, 1))\r\n            + (mat0.get(3, 2) * mat1.get(2, 1))\r\n            + (mat0.get(3, 3) * mat1.get(3, 1));\r\n        let r02 = (mat0.get(0, 0) * mat1.get(0, 2))\r\n            + (mat0.get(0, 1) * mat1.get(1, 2))\r\n            + (mat0.get(0, 2) * mat1.get(2, 2))\r\n            + (mat0.get(0, 3) * mat1.get(3, 2));\r\n        let r12 = (mat0.get(1, 0) * mat1.get(0, 2))\r\n            + (mat0.get(1, 1) * mat1.get(1, 2))\r\n            + (mat0.get(1, 2) * mat1.get(2, 2))\r\n            + (mat0.get(1, 3) * mat1.get(3, 2));\r\n        let r22 = (mat0.get(2, 0) * mat1.get(0, 2))\r\n            + (mat0.get(2, 1) * mat1.get(1, 2))\r\n            + (mat0.get(2, 2) * mat1.get(2, 2))\r\n            + (mat0.get(2, 3) * mat1.get(3, 2));\r\n        let r32 = (mat0.get(3, 0) * mat1.get(0, 2))\r\n            + (mat0.get(3, 1) * mat1.get(1, 2))\r\n            + (mat0.get(3, 2) * mat1.get(2, 2))\r\n            + (mat0.get(3, 3) * mat1.get(3, 2));\r\n        let r03 = (mat0.get(0, 0) * mat1.get(0, 3))\r\n            + (mat0.get(0, 1) * mat1.get(1, 3))\r\n            + (mat0.get(0, 2) * mat1.get(2, 3))\r\n            + (mat0.get(0, 3) * mat1.get(3, 3));\r\n        let r13 = (mat0.get(1, 0) * mat1.get(0, 3))\r\n            + (mat0.get(1, 1) * mat1.get(1, 3))\r\n            + (mat0.get(1, 2) * mat1.get(2, 3))\r\n            + (mat0.get(1, 3) * mat1.get(3, 3));\r\n        let r23 = (mat0.get(2, 0) * mat1.get(0, 3))\r\n            + (mat0.get(2, 1) * mat1.get(1, 3))\r\n            + (mat0.get(2, 2) * mat1.get(2, 3))\r\n            + (mat0.get(2, 3) * mat1.get(3, 3));\r\n        let r33 = (mat0.get(3, 0) * mat1.get(0, 3))\r\n            + (mat0.get(3, 1) * mat1.get(1, 3))\r\n            + (mat0.get(3, 2) * mat1.get(2, 3))\r\n            + (mat0.get(3, 3) * mat1.get(3, 3));\r\n\r\n        // NOW PUT ALL THE CALCULATED VALUES IN THE result MATRIX\r\n        result.set(r00, 0, 0);\r\n        result.set(r10, 1, 0);\r\n        result.set(r20, 2, 0);\r\n        result.set(r30, 3, 0);\r\n        result.set(r01, 0, 1);\r\n        result.set(r11, 1, 1);\r\n        result.set(r21, 2, 1);\r\n        result.set(r31, 3, 1);\r\n        result.set(r02, 0, 2);\r\n        result.set(r12, 1, 2);\r\n        result.set(r22, 2, 2);\r\n        result.set(r32, 3, 2);\r\n        result.set(r03, 0, 3);\r\n        result.set(r13, 1, 3);\r\n        result.set(r23, 2, 3);\r\n        result.set(r33, 3, 3);\r\n    }\r\n\r\n    export function projection(result : Matrix, nearZ : number, farZ : number, viewportWidth : number, viewportHeight : number, fovY : number) : void {\r\n        let aspectRatio = viewportWidth / viewportHeight;\r\n        let fieldOfViewY = this.math.degreesToRadians(fovY);\r\n        let fieldOfViewX = 2 * Math.atan(Math.tan(fieldOfViewY / 2) * aspectRatio);\r\n\r\n        // WE'LL USE THESE AS SHORTHAND FOR LOADING OUR MATRIX\r\n        let n = nearZ;\r\n        let f = farZ;\r\n        let r = Math.tan(fieldOfViewX / 2) * n;\r\n        let t = Math.tan(fieldOfViewY / 2) * n;\r\n\r\n        // 0-3\r\n        result.set(n / r, 0, 0);\r\n        result.set(0.0, 0, 1);\r\n        result.set(0.0, 0, 2);\r\n        result.set(0.0, 0, 3);\r\n        // 4-7\r\n        result.set(0.0, 1, 0);\r\n        result.set(n / t, 1, 1);\r\n        result.set(0.0, 1, 2);\r\n        result.set(0.0, 1, 3);\r\n        // 8-11\r\n        result.set(0.0, 2, 0);\r\n        result.set(0.0, 2, 1);\r\n        result.set((-(f + n)) / (f - n), 2, 2);\r\n        result.set((-2 * f * n) / (f - n), 2, 3);\r\n        // 12-15 \r\n        result.set(0.0, 3, 0);\r\n        result.set(0.0, 3, 1);\r\n        result.set(-1.0, 3, 2);\r\n        result.set(0.0, 3, 3);\r\n    }\r\n\r\n    export function rotate(result : Matrix, rotationVector : Vector3) : void {\r\n        // START WITH THE X-AXIS ROTATION\r\n        let xRotationMatrix = new Matrix(4, 4);\r\n        this.identity(xRotationMatrix);\r\n        let thetaX = rotationVector.getThetaX();\r\n        xRotationMatrix.set(Math.cos(thetaX), 1, 1);\r\n        xRotationMatrix.set(Math.sin(thetaX), 2, 1);\r\n        xRotationMatrix.set(-1 * Math.sin(thetaX), 1, 2);\r\n        xRotationMatrix.set(Math.cos(thetaX), 2, 2);\r\n\r\n        // START WITH THE Y-AXIS ROTATION\r\n        let yRotationMatrix = new Matrix(4, 4);\r\n        this.identity(yRotationMatrix);\r\n        let thetaY = rotationVector.getThetaY();\r\n        yRotationMatrix.set(Math.cos(thetaY), 0, 0);\r\n        yRotationMatrix.set(-1 * Math.sin(thetaY), 2, 0);\r\n        yRotationMatrix.set(Math.sin(thetaY), 0, 2);\r\n        yRotationMatrix.set(Math.cos(thetaY), 2, 2);\r\n\r\n        // START WITH THE Z-AXIS ROTATION\r\n        let zRotationMatrix = new Matrix(4, 4);\r\n        this.identity(zRotationMatrix);\r\n        let thetaZ = rotationVector.getThetaZ();\r\n        zRotationMatrix.set(Math.cos(thetaZ), 0, 0);\r\n        zRotationMatrix.set(Math.sin(thetaZ), 1, 0);\r\n        zRotationMatrix.set(-1 * Math.sin(thetaZ), 0, 1);\r\n        zRotationMatrix.set(Math.cos(thetaZ), 1, 1);\r\n\r\n        // START WITH THE X-AXIS ROTATION\r\n        let tempMatrix = new Matrix(4, 4);\r\n        this.identity(tempMatrix);\r\n        this.multiply(tempMatrix, xRotationMatrix, yRotationMatrix);\r\n        this.multiply(result, tempMatrix, zRotationMatrix);\r\n    }\r\n\r\n    export function scale(result : Matrix, scaleVector : Vector3) : void {\r\n        // START WITH THE IDENTITY MATRIX\r\n        this.identity(result, scaleVector);\r\n\r\n        // AND THEN LOAD IN THE TRANSLATION VALUES\r\n        result.set(scaleVector.getX(), 0, 0);\r\n        result.set(scaleVector.getY(), 1, 1);\r\n        result.set(scaleVector.getZ(), 2, 2);\r\n    }\r\n\r\n    export function transform(result : Vector3, mat : Matrix, vec : Vector3) : void {\r\n        result.setX((mat.get(0, 0) * vec.getX()) + (mat.get(0, 1) * vec.getY()) + (mat.get(0, 2) * vec.getZ()) + (mat.get(0, 3) * vec.getW()));\r\n        result.setY((mat.get(1, 0) * vec.getX()) + (mat.get(1, 1) * vec.getY()) + (mat.get(1, 2) * vec.getZ()) + (mat.get(1, 3) * vec.getW()));\r\n        result.setZ((mat.get(2, 0) * vec.getX()) + (mat.get(2, 1) * vec.getY()) + (mat.get(2, 2) * vec.getZ()) + (mat.get(2, 3) * vec.getW()));\r\n        result.setW((mat.get(3, 0) * vec.getX()) + (mat.get(3, 1) * vec.getY()) + (mat.get(3, 2) * vec.getZ()) + (mat.get(3, 3) * vec.getW()));\r\n    }\r\n\r\n    export function translate(result : Matrix, translationVector : Vector3) : void {\r\n        // START WITH THE IDENTITY MATRIX\r\n        this.identity(result);\r\n\r\n        // AND THEN LOAD IN THE TRANSLATION VALUES\r\n        result.set(translationVector.getX(), 0, 3);\r\n        result.set(translationVector.getY(), 1, 3);\r\n        result.set(translationVector.getZ(), 2, 3);\r\n    }\r\n\r\n    export function transpose(result : Matrix, mat : Matrix) : void {\r\n        for (let i = 0; i < 4; i++) {\r\n            for (let j = 0; j < 4; j++) {\r\n                let temp = mat.get(i, j);\r\n                result.set(temp, j, i);\r\n            }\r\n        }\r\n    }\r\n\r\n    export function view(result : Matrix, cameraPosition : Vector3, cameraOrientation : Vector3) : void {\r\n        let pitch = this.math.degreesToRadians(cameraOrientation.getThetaX());\r\n        let yaw = this.math.degreesToRadians(cameraOrientation.getThetaY());\r\n        let roll = this.math.degreesToRadians(cameraOrientation.getThetaZ());\r\n\r\n        // TO TRANSLATE\r\n        let translateVector = this.math.vectorMath.createPositionVector();\r\n        translateVector.set(-cameraPosition.getX(), -cameraPosition.getY(), -cameraPosition.getZ());\r\n        let translateMatrix = new Matrix(4, 4);\r\n        this.identity(translateMatrix);\r\n        this.translate(translateMatrix, translateVector);\r\n\r\n        // TO ROTATE\r\n        let rotateVector = this.math.vectorMath.createRotationVector();\r\n        rotateVector.set(-pitch, -yaw, -roll);\r\n        let rotateMatrix = new Matrix(4, 4);\r\n        this.rotate(rotateMatrix, rotateVector);\r\n\r\n        // NOW COMBINE THE 2 MATRICES\r\n        this.multiply(result, rotateMatrix, translateMatrix);\r\n    }\r\n\r\n    export function addVectors(result : Vector3, vec0 : Vector3, vec1 : Vector3) : void {\r\n        for (let i = 0; i < vec0.getSize(); i++) {\r\n            let total = vec0.getAt(i) + vec1.getAt(i);\r\n            result.setAt(i, total);\r\n        }\r\n    }\r\n\r\n    export function crossProduct(result : Vector3, vec0 : Vector3, vec1 : Vector3) : void {\r\n        let result0 = (vec0.getY() * vec1.getZ())\r\n            - (vec1.getY() * vec0.getZ());\r\n        let result1 = (vec0.getZ() * vec1.getX())\r\n            - (vec1.getZ() * vec0.getX());\r\n        let result2 = (vec0.getX() * vec1.getY())\r\n            - (vec1.getX() * vec0.getY());\r\n        result.setX(result0);\r\n        result.setY(result1);\r\n        result.setZ(result2);\r\n    }\r\n\r\n    export function dotProduct(vec0 : Vector3, vec1 : Vector3) : number {\r\n        let resultX = vec0.getX() * vec1.getX();\r\n        let resultY = vec0.getY() * vec1.getY();\r\n        let resultZ = vec0.getZ() * vec1.getZ();\r\n        return resultX + resultY + resultZ;\r\n    }\r\n\r\n    export function multiplyVectors(result : Vector3, vec : Vector3, scalar : number) : void {\r\n        let vecX = vec.getX() * scalar;\r\n        let vecY = vec.getY() * scalar;\r\n        let vecZ = vec.getZ() * scalar;\r\n        result.setX(vecX);\r\n        result.setY(vecY);\r\n        result.setZ(vecZ);\r\n    }\r\n\r\n    export function normalize(result : Vector3, vec : Vector3) : void {\r\n        let xSquared = vec.getX() * vec.getX();\r\n        let ySquared = vec.getY() * vec.getY();\r\n        let zSquared = vec.getZ() * vec.getZ();\r\n        let distance = Math.sqrt(xSquared + ySquared + zSquared);\r\n        result.setX(vec.getX() / distance);\r\n        result.setY(vec.getY() / distance);\r\n        result.setZ(vec.getZ() / distance);\r\n    }\r\n\r\n    export function subtractVectors(result : Vector3, vec0 : Vector3, vec1 : Vector3) : void {\r\n        let resultX = vec0.getX() - vec1.getX();\r\n        let resultY = vec0.getY() - vec1.getY();\r\n        let resultZ = vec0.getZ() - vec1.getZ();\r\n        result.setX(resultX);\r\n        result.setY(resultY);\r\n        result.setZ(resultZ);\r\n    }\r\n}","/*\r\n * A Matrix is used for transforming points from local\r\n * coordinates to world coordinates.\r\n */\r\nexport class Matrix {\r\n    private mat : Float32Array;\r\n    private rows : number;\r\n    private columns : number;\r\n\r\n    public constructor(rows : number, columns : number) {\r\n        this.rows = rows;\r\n        this.columns = columns;\r\n        this.mat = new Float32Array(rows * columns);\r\n        for (let i = 0; i < (rows * columns); i++)\r\n            this.mat[i] = 0.0;\r\n    }\r\n\r\n    public getData() : Float32Array {\r\n        return this.mat;\r\n    }\r\n\r\n    public getRows() : number {\r\n        return this.rows;\r\n    }\r\n\r\n    public getColumns() : number {\r\n        return this.columns;\r\n    }\r\n\r\n    public getIndex (rows : number, columns : number) : number {\r\n        return (this.rows * columns) + rows;\r\n    }\r\n    \r\n    public get (row : number, column : number) : number {\r\n        let index = this.getIndex(row, column);\r\n        let valueToReturn = this.mat[index];\r\n        return valueToReturn;\r\n    }\r\n\r\n    public set (value : number, row : number, column : number) {\r\n        let index = this.getIndex(row, column);\r\n        this.mat[index] = value;\r\n    }\r\n    \r\n    public print () : void {\r\n        let maxWidth = 0;\r\n        for (let i = 0; i < 4; i++) {\r\n            for (let j = 0; j < 4; j++) {\r\n                let testNum = this.get(j, i) + \"\";\r\n                if (testNum.length > maxWidth) {\r\n                    maxWidth = testNum.length;\r\n                }\r\n            }\r\n        }\r\n        let text = \"[ \";\r\n        for (let i = 0; i < this.rows; i++) {\r\n            if (i > 0)\r\n                text += \"  \";\r\n            for (var j = 0; j < this.columns; j++) {\r\n                var numText = this.get(i, j) + \"\";\r\n                while (numText.length < maxWidth) {\r\n                    numText = \" \" + numText;\r\n                }\r\n                text += numText;\r\n                if (j < (this.columns - 1)) {\r\n                    text += \",\";\r\n                }\r\n                text += \" \";\r\n            }\r\n            if (i < (this.rows - 1)) {\r\n                text += \"\\n\";\r\n            }\r\n            text += \"]\";\r\n            console.log(text);\r\n        }\r\n    }\r\n}","/**\r\n * Vector3\r\n * \r\n * The Vector3 class can be used for any 2d or 3d point, vector, \r\n * or rotation (i.e. angles of orientation).\r\n */\r\nexport class Vector3 {\r\n    private vec : Float32Array;\r\n    private size : number;\r\n\r\n    public constructor() {\r\n        this.vec = new Float32Array(4);\r\n        for (let i = 0; i < 4; i++)\r\n            this.vec[i] = 0.0;\r\n        this.size = 4;\r\n    }\r\n\r\n    public getSize() : number {\r\n        return this.size;\r\n    }\r\n\r\n    public getAt(index : number) : number {\r\n        return this.vec[index];\r\n    }\r\n\r\n    public getX() : number {\r\n        return this.vec[0];\r\n    }\r\n\r\n    public getY() : number {\r\n        return this.vec[1];\r\n    }\r\n\r\n    public getZ() : number {\r\n        return this.vec[2];\r\n    }\r\n\r\n    public getW() : number {\r\n        return this.vec[3];\r\n    }\r\n\r\n    public getThetaX() : number {\r\n        return this.vec[0];\r\n    }\r\n\r\n    public getThetaY() : number {\r\n        return this.vec[1];\r\n    }\r\n\r\n    public getThetaZ() : number {\r\n        return this.vec[2];\r\n    }\r\n\r\n    public set(init0 : number, init1 : number, init2 : number, init3 : number) : void {\r\n        this.vec[0] = init0;\r\n        this.vec[1] = init1;\r\n        this.vec[2] = init2;\r\n        this.vec[3] = init3;\r\n    }\r\n\r\n    public setAt(index : number, value : number) : void {\r\n        this.vec[index] = value;\r\n    }\r\n\r\n    public setX(initX : number) : void {\r\n        this.vec[0] = initX;\r\n    }\r\n\r\n    public setY(initY : number) : void {\r\n        this.vec[1] = initY;\r\n    }\r\n\r\n    public setZ(initZ : number) : void {\r\n        this.vec[2] = initZ;\r\n    }\r\n\r\n    public setW(initW : number) : void {\r\n        this.vec[3] = initW;\r\n    }\r\n\r\n    public setThetaX(initThetaX : number) : void {\r\n        this.setX(initThetaX);\r\n    }\r\n\r\n    public setThetaY(initThetaY : number) : void {\r\n        this.setY(initThetaY);\r\n    }\r\n\r\n    public setThetaZ(initThetaZ : number) : void {\r\n        this.setZ(initThetaZ);\r\n    }\r\n\r\n    public print() : void {\r\n        let text = \"[\";\r\n        for (let i = 0; i < this.size; i++) {\r\n            text += this.vec[i];\r\n            if (i < (this.size - 1)) {\r\n                text += \", \";\r\n            }\r\n        }\r\n        text += \"]\";\r\n        console.log(text);\r\n    }\r\n}","/*\r\n * This class renders text to a canvas, updated each frame.\r\n */\r\nimport {HashTable} from '../data/HashTable'\r\n\r\nexport class TextToRender {\r\n    public id : string;\r\n    public text : string;\r\n    public x : number;\r\n    public y : number;\r\n    public update : Function;\r\n    public fontFamily : string;\r\n    public fontSize : number;\r\n    public fontColor : string;\r\n    public properties : HashTable<object>;\r\n\r\n    public constructor(initId : string, initText : string, initX : number, initY : number, initUpdate : Function) {\r\n        this.id = initId;\r\n        this.text = initText;\r\n        this.x = initX;\r\n        this.y = initY;\r\n        this.update = initUpdate;\r\n        this.fontFamily = \"\";\r\n        this.fontSize = 0;\r\n        this.fontColor = \"\";\r\n        this.properties = {};\r\n    }\r\n}\r\n\r\nexport class TextRenderer {\r\n    private textToRender : Array<TextToRender>;\r\n    private textCanvas : HTMLCanvasElement;\r\n    private textCanvasWidth : number;\r\n    private textCanvasHeight : number;\r\n    private textCtx : CanvasRenderingContext2D;\r\n    private defaultFontFamily : string;\r\n    private defaultFontSize : number;\r\n    private defaultFontColor : string;\r\n\r\n    public constructor(textCanvasId : string, initFontFamily : string, initFontSize : number, initFontColor : string) {\r\n        this.textToRender = new Array();\r\n        this.textCanvas = <HTMLCanvasElement>document.getElementById(textCanvasId);\r\n        this.textCanvas.width = window.innerWidth;\r\n        this.textCanvas.height = window.innerHeight;\r\n        this.textCanvasWidth = this.textCanvas.width;\r\n        this.textCanvasHeight = this.textCanvas.height;\r\n        this.textCtx = this.textCanvas.getContext(\"2d\");\r\n        this.defaultFontFamily = initFontFamily;\r\n        this.defaultFontSize = initFontSize;\r\n        this.defaultFontColor = initFontColor;\r\n    }\r\n    \r\n    public addTextToRender(textToAdd : TextToRender) : void {\r\n        textToAdd.fontFamily = this.defaultFontFamily;\r\n        textToAdd.fontSize = this.defaultFontSize;\r\n        textToAdd.fontColor = this.defaultFontColor;\r\n        this.textToRender.push(textToAdd);\r\n    }\r\n\r\n    public clear() : void {\r\n        this.textToRender = [];\r\n    }\r\n\r\n    public getCanvasWidth() : number {\r\n        return this.textCanvasWidth;\r\n    }\r\n\r\n    public getCanvasHeight() : number {\r\n        return this.textCanvasHeight;\r\n    }\r\n\r\n    public render() : void {\r\n        this.textCtx.clearRect(0, 0, this.textCanvas.width, this.textCanvas.height);\r\n        for (var i = 0; i < this.textToRender.length; i++) {\r\n            var textToRender = this.textToRender[i];\r\n            textToRender.update();\r\n            this.textCtx.font = \"\" + textToRender.fontSize + \"px \" + textToRender.fontFamily;\r\n            this.textCtx.fillStyle = textToRender.fontColor;\r\n            this.textCtx.fillText(textToRender.text, textToRender.x, textToRender.y);\r\n        }\r\n    }\r\n}","import {WebGLGameShader} from './WebGLGameShader'\r\nimport {MathUtilities} from '../math/MathUtilities'\r\nimport { Matrix } from '../math/Matrix'\r\nimport { Vector3 } from '../math/Vector3'\r\nimport {AnimatedSprite} from '../scene/sprite/AnimatedSprite'\r\nimport {AnimatedSpriteType} from '../scene/sprite/AnimatedSpriteType'\r\nimport {WebGLGameTexture} from './WebGLGameTexture'\r\nimport {HashTable} from '../data/HashTable'\r\nimport { GradientCircle } from '../scene/GradientCircle';\r\n\r\nvar CircleDefaults = {\r\n    A_POSITION: \"a_Position\",\r\n    A_VALUETOINTERPOLATE: \"a_ValueToInterpolate\",\r\n    U_SPRITETRANSFORM: \"u_SpriteTransform\",\r\n    VAL: \"val\",\r\n    U_OPTION: \"option\",\r\n    NUM_VERTICES: 4,\r\n    FLOATS_PER_VERTEX: 2,\r\n    FLOATS_PER_TEXTURE_COORDINATE: 2,\r\n    VERTEX_POSITION_OFFSET: 0,\r\n    TOTAL_BYTES: 20,\r\n    INDEX_OF_FIRST_VERTEX: 0\r\n}\r\n\r\nexport class WebGLGameCircleRenderer {\r\n    private shader : WebGLGameShader;\r\n    private vertexTexCoordBuffer : WebGLBuffer;\r\n    private valBuffer : WebGLBuffer;\r\n\r\n    // WE'LL USE THESE FOR TRANSOFMRING OBJECTS WHEN WE DRAW THEM\r\n    private spriteTransform : Matrix;\r\n    private spriteTranslate : Vector3;\r\n    private spriteRotate : Vector3;\r\n    private spriteScale : Vector3;    \r\n\r\n    private webGLAttributeLocations : HashTable<GLuint>;\r\n    private webGLUniformLocations : HashTable<WebGLUniformLocation>;\r\n\r\n    public constructor() {}\r\n\r\n    public getShader(): WebGLGameShader {\r\n        return this.shader;\r\n    }\r\n    \r\n    public init(webGL : WebGLRenderingContext) : void {\r\n        this.shader = new WebGLGameShader();\r\n\r\n        var fragmentShaderSource = [\r\n            'precision highp float;',\r\n            'uniform float option;',\r\n            'varying vec2 val;',\r\n            'void main() {',\r\n                'float R = 1.0;',\r\n                'float dist = sqrt(dot(val, val));',\r\n                'float alpha = 1.0;',\r\n                'if (dist > R) {',\r\n                    'discard;',\r\n                '}',\r\n                'if (option < 1.0) {',\r\n                    'gl_FragColor =', \r\n                    'vec4(0.0, 0.0, dist, alpha);',\r\n                '} else if(option < 2.0) {',\r\n                    'gl_FragColor =', \r\n                    'vec4(0.0, dist, 0.0, alpha);',\r\n                '}',\r\n                'else if(option < 3.0) {',\r\n                    'gl_FragColor =', \r\n                    'vec4(dist, 0.0, 0.0, alpha);',\r\n                '}',\r\n                'else if(option < 4.0) {',\r\n                    'gl_FragColor =', \r\n                    'vec4(dist, dist, 0.0, alpha);',\r\n                '}',\r\n                'else if(option < 5.0) {',\r\n                    'gl_FragColor =', \r\n                    'vec4(dist, 0.0, dist, alpha);',\r\n                '}',\r\n                'else if(option < 6.0) {',\r\n                    'gl_FragColor =', \r\n                    'vec4(0.0, dist, dist, alpha);',\r\n                '}',\r\n            '}'\r\n        ].join('\\n');\r\n\r\n        var vertexShaderSrc = [\r\n            'precision highp float;',\r\n            'attribute vec4 a_Position;',\r\n            'attribute vec2 a_ValueToInterpolate;',\r\n            'varying vec2 val;',    \r\n            'uniform mat4 u_SpriteTransform;',\r\n            \r\n            'void main() {',\r\n                'val = a_ValueToInterpolate;',\r\n            '    gl_Position = u_SpriteTransform',\r\n            '            * a_Position;',\r\n            '}'\r\n        ].join('\\n');\r\n        \r\n        this.shader.init(webGL, vertexShaderSrc, fragmentShaderSource);\r\n        \r\n        // GET THE webGL OBJECT TO USE\r\n        var verticesTexCoords = new Float32Array([\r\n            0.5, -0.5, 0.0, 1.0, -1.0,\r\n            0.5, 0.5, 0.0, 1.0, 1.0,\r\n            -0.5,0.5,0.0,-1.0, 1.0,\r\n            -0.5,-0.5,0.0,-1.0,-1.0,\r\n        ]);\r\n\r\n        // CREATE THE BUFFER ON THE GPU\r\n        this.vertexTexCoordBuffer = webGL.createBuffer();\r\n        this.valBuffer = webGL.createBuffer();\r\n\r\n        // BIND THE BUFFER TO BE VERTEX DATA\r\n        webGL.bindBuffer(webGL.ARRAY_BUFFER, this.vertexTexCoordBuffer);\r\n        // webGL.bindBuffer(webGL.ARRAY_BUFFER, this.valBuffer);\r\n\r\n        // AND SEND THE DATA TO THE BUFFER WE CREATED ON THE GPU\r\n        webGL.bufferData(webGL.ARRAY_BUFFER, verticesTexCoords, webGL.STATIC_DRAW);\r\n        // webGL.bufferData(webGL.ARRAY_BUFFER, val, webGL.STATIC_DRAW)\r\n\r\n        // SETUP THE SHADER ATTRIBUTES AND UNIFORMS\r\n        this.webGLAttributeLocations = {};\r\n        this.webGLUniformLocations = {};\r\n        // this.loadAttributeLocations(webGL, [SpriteDefaults.A_POSITION, SpriteDefaults.A_TEX_COORD]);\r\n        // this.loadUniformLocations(webGL, [SpriteDefaults.U_SPRITE_TRANSFORM, SpriteDefaults.U_SAMPLER, SpriteDefaults.U_TEX_COORD_FACTOR, SpriteDefaults.U_TEX_COORD_SHIFT]);\r\n\r\n        this.loadAttributeLocations(webGL, [CircleDefaults.A_POSITION, CircleDefaults.A_VALUETOINTERPOLATE]);\r\n        this.loadUniformLocations(webGL, [CircleDefaults.U_SPRITETRANSFORM, CircleDefaults.U_OPTION]);\r\n\r\n        // WE'LL USE THESE FOR TRANSOFMRING OBJECTS WHEN WE DRAW THEM\r\n        this.spriteTransform = new Matrix(4, 4);\r\n        this.spriteTranslate = new Vector3();\r\n        this.spriteRotate = new Vector3();\r\n        this.spriteScale = new Vector3();\r\n    }\r\n\r\n    public renderGradientCircle(webGL: WebGLRenderingContext,\r\n                            canvasWidth: number,\r\n                            canvasHeight: number,\r\n                            ) {\r\n        let shaderProgramToUse = this.shader.getProgram();\r\n        webGL.useProgram(shaderProgramToUse);\r\n\r\n    }\r\n\r\n    public renderGradientCircles(  webGL : WebGLRenderingContext, \r\n                            canvasWidth : number, \r\n                            canvasHeight : number, \r\n                            visibleSet : Array<GradientCircle>) : void {\r\n        // SELECT THE ANIMATED SPRITE RENDERING SHADER PROGRAM FOR USE\r\n        let shaderProgramToUse = this.shader.getProgram();\r\n        webGL.useProgram(shaderProgramToUse);\r\n\r\n       // AND THEN RENDER EACH ONE\r\n       for (let circle of visibleSet) {\r\n            this.renderCircle(webGL, canvasWidth, canvasHeight, circle);        \r\n        }\r\n    }\r\n\r\n    private loadAttributeLocations(webGL : WebGLRenderingContext, attributeLocationNames : Array<string>) {\r\n        for (var i = 0; i < attributeLocationNames.length; i++) {\r\n            let locationName : string = attributeLocationNames[i];\r\n            let location : GLuint = webGL.getAttribLocation(this.shader.getProgram(), locationName);\r\n            this.webGLAttributeLocations[locationName] = location;\r\n        }\r\n    }\r\n\r\n    private loadUniformLocations(webGL : WebGLRenderingContext, uniformLocationNames : Array<string>) {\r\n        for (let i : number = 0; i < uniformLocationNames.length; i++) {\r\n            let locationName : string = uniformLocationNames[i];\r\n            let location : WebGLUniformLocation = webGL.getUniformLocation(this.shader.getProgram(), locationName);\r\n            this.webGLUniformLocations[locationName] = location;\r\n        }\r\n    }\r\n\r\n    private renderCircle(   webGL : WebGLRenderingContext, \r\n                            canvasWidth : number, \r\n                            canvasHeight : number, \r\n                            circle : GradientCircle) {\r\n\r\n\r\n\r\n        // // CALCULATE HOW MUCH TO TRANSLATE THE QUAD PER THE SPRITE POSITION\r\n\r\n        let spriteWidth : number = circle.getWidth();\r\n        let spriteHeight : number = circle.getHeight();\r\n        console.log(\"width: \" + spriteHeight + \" height: \" + spriteHeight);\r\n        let spriteXInPixels : number = circle.getPosition().getX() + (spriteWidth/2);\r\n        let spriteYInPixels : number = circle.getPosition().getY() + (spriteHeight/2);\r\n        let spriteXTranslate : number = (spriteXInPixels - (canvasWidth/2))/(canvasWidth/2);\r\n        let spriteYTranslate : number = (spriteYInPixels - (canvasHeight/2))/(canvasHeight/2);\r\n        this.spriteTranslate.setX(spriteXTranslate);\r\n        this.spriteTranslate.setY(-spriteYTranslate);\r\n\r\n        // CALCULATE HOW MUCH TO SCALE THE QUAD PER THE SPRITE SIZE\r\n        let defaultWidth : number = canvasWidth/2;\r\n        let defaultHeight : number = canvasHeight/2;\r\n        let scaleX : number = spriteWidth/defaultWidth;\r\n        let scaleY : number = spriteHeight/defaultHeight;\r\n        this.spriteScale.setX(scaleX);\r\n        this.spriteScale.setY(scaleY);\r\n\r\n        // @todo - COMBINE THIS WITH THE ROTATE AND SCALE VALUES FROM THE SPRITE\r\n        MathUtilities.identity(this.spriteTransform);\r\n        MathUtilities.model(this.spriteTransform, this.spriteTranslate, this.spriteRotate, this.spriteScale);\r\n        \r\n        // FIGURE OUT THE TEXTURE COORDINATE FACTOR AND SHIFT\r\n        // let texCoordFactorX : number = spriteWidth/texture.width;\r\n        // let texCoordFactorY : number = spriteHeight/texture.height;\r\n        // let spriteLeft : number = sprite.getLeft();\r\n        // let spriteTop : number = sprite.getTop();\r\n        // let texCoordShiftX : number = spriteLeft/texture.width;\r\n        // let texCoordShiftY : number = spriteTop/texture.height;   \r\n\r\n        // USE THE ATTRIBUTES\r\n        webGL.bindBuffer(webGL.ARRAY_BUFFER, this.vertexTexCoordBuffer);\r\n        // webGL.bindTexture(webGL.TEXTURE_2D, texture.webGLTexture);\r\n\r\n        // HOOK UP THE ATTRIBUTES\r\n        let a_PositionLocation : GLuint = this.webGLAttributeLocations[CircleDefaults.A_POSITION];\r\n        webGL.vertexAttribPointer(\r\n            a_PositionLocation, \r\n            3, \r\n            webGL.FLOAT, \r\n            false, \r\n            20, \r\n            0);\r\n        webGL.enableVertexAttribArray(a_PositionLocation);\r\n\r\n        let a_ValueToInterpolateLocation: GLuint = this.webGLAttributeLocations[CircleDefaults.A_VALUETOINTERPOLATE];\r\n        webGL.vertexAttribPointer(\r\n            a_ValueToInterpolateLocation, \r\n            2, \r\n            webGL.FLOAT, \r\n            false, \r\n            20, \r\n            12);\r\n        webGL.enableVertexAttribArray(a_ValueToInterpolateLocation);\r\n\r\n        let colorOption: number = circle.getColor();\r\n        console.log(colorOption);\r\n        let u_optionLocation: WebGLUniformLocation = this.webGLUniformLocations[CircleDefaults.U_OPTION];\r\n        webGL.uniform1f(u_optionLocation, colorOption);\r\n\r\n\r\n        // USE THE UNIFORMS\r\n        let u_SpriteTransformLocation : WebGLUniformLocation = this.webGLUniformLocations[CircleDefaults.U_SPRITETRANSFORM];\r\n        webGL.uniformMatrix4fv(u_SpriteTransformLocation, false, this.spriteTransform.getData());\r\n\r\n        // DRAW THE SPRITE AS A TRIANGLE STRIP USING 4 VERTICES, STARTING AT THE START OF THE ARRAY (index 0)\r\n        webGL.drawArrays(webGL.TRIANGLE_FAN, 0, CircleDefaults.NUM_VERTICES);\r\n    }\r\n}","import { WebGLGameCircleRenderer } from './WebGLGameCircleRenderer';\r\n/*\r\n * This serves as the subsystem that manages all game rendering.\r\n */\r\nimport {TextRenderer} from './TextRenderer'\r\nimport {WebGLGameSpriteRenderer} from './WebGLGameSpriteRenderer'\r\nimport {AnimatedSprite} from '../scene/sprite/AnimatedSprite'\r\nimport {WebGLGameTexture } from './WebGLGameTexture';\r\nimport { GradientCircle } from '../scene/GradientCircle';\r\nimport { SceneObject } from '../scene/SceneObject';\r\n\r\nexport class WebGLGameRenderingSystem {\r\n    private renderingCanvas : HTMLCanvasElement;\r\n    private webGL : WebGLRenderingContext;\r\n    private spriteRenderer : WebGLGameSpriteRenderer;\r\n    private textRenderer : TextRenderer;\r\n    private circleRenderer: WebGLGameCircleRenderer;\r\n    private canvasWidth : number;\r\n    private canvasHeight : number;\r\n\r\n    public constructor() {}\r\n\r\n    public getTextureConstant(id : number) : number {\r\n        // WE ONLY HAVE 4 HERE, WE SHOULD HAVE A BETTER WAY OF DOING THIS\r\n        switch(id) {\r\n            case 0: return this.webGL.TEXTURE0;\r\n            case 1: return this.webGL.TEXTURE1;\r\n            case 2: return this.webGL.TEXTURE3;\r\n            default: return this.webGL.TEXTURE4;\r\n        }\r\n    }\r\n\r\n    public getWebGL() : WebGLRenderingContext {\r\n        return this.webGL;\r\n    }\r\n\r\n    public getSpriteRenderer() : WebGLGameSpriteRenderer {\r\n        return this.spriteRenderer;\r\n    }\r\n\r\n    public getTextRenderer() : TextRenderer {\r\n        return this.textRenderer;\r\n    }\r\n\r\n    public getCircleRenderer(): WebGLGameCircleRenderer {\r\n        return this.circleRenderer;\r\n    }\r\n\r\n    public init(renderingCanvasId : string, textCanvasId : string) : void {\r\n        // FIRST SETUP webGL\r\n        this.renderingCanvas = <HTMLCanvasElement>document.getElementById(renderingCanvasId);\r\n        this.renderingCanvas.width = window.innerWidth;\r\n        this.renderingCanvas.height = window.innerHeight;\r\n        this.canvasWidth = this.renderingCanvas.width;\r\n        this.canvasHeight = this.renderingCanvas.height;\r\n        this.webGL = this.renderingCanvas.getContext(\"webgl\");\r\n\r\n        // IF THE USER'S MACHINE/BROWSER DOESN'T SUPPORT\r\n        // WebGL THEN THERE'S NO POINT OF GOING ON\r\n        if (!this.webGL) {\r\n            // PROVIDE SOME FEEDBACK THAT WebGL WON'T WORK BECAUSE\r\n            // THE USER'S' GRAPHICS CARD IS FOR THE BIRDS\r\n            console.error(\"WebGL is not supported by this device\");\r\n\r\n            // AND END INITIALIZATION\r\n            return;\r\n        }\r\n\r\n        // WebGL IS SUPPORTED, SO INIT EVERYTHING THAT USES IT\r\n\r\n        // MAKE THE CLEAR COLOR BLACK\r\n        this.setClearColor(0.0, 0.0, 0.0, 1.0);\r\n\r\n        // ENABLE DEPTH TESTING\r\n        this.webGL.disable(this.webGL.DEPTH_TEST);\r\n        this.webGL.enable(this.webGL.BLEND);\r\n        this.webGL.blendFunc(this.webGL.SRC_ALPHA, this.webGL.ONE_MINUS_SRC_ALPHA);\r\n\r\n        // TURN ON BACKFACE CULLING\r\n        this.webGL.enable(this.webGL.CULL_FACE);\r\n\r\n        // THIS SPECIFIES THAT WE'RE USING THE ENTIRE CANVAS\r\n        this.webGL.viewport(0, 0, this.canvasWidth, this.canvasHeight);\r\n\r\n        // NOW MAKE THE SHADER FOR DRAWING THIS THING\r\n        this.spriteRenderer = new WebGLGameSpriteRenderer();\r\n        this.spriteRenderer.init(this.webGL);\r\n        \r\n        this.circleRenderer = new WebGLGameCircleRenderer();\r\n        this.circleRenderer.init(this.webGL);\r\n\r\n        // THIS WILL STORE OUR TEXT\r\n        this.textRenderer = new TextRenderer(textCanvasId, \"serif\", 18, \"#FFFF00\");\r\n    }\r\n\r\n    public initWebGLTexture(textureToInit : WebGLGameTexture, textureId : number, image : HTMLImageElement, callback : Function) : void {\r\n        textureToInit.width = image.width;\r\n        textureToInit.height = image.height;\r\n\r\n        // CREATE A WebGL TEXTURE ON THE GPU\r\n        textureToInit.webGLTexture = this.webGL.createTexture();\r\n        textureToInit.webGLTextureId = textureId;\r\n\r\n        // FLIP THE IMAGE'S y-AXIS\r\n        //webGL.pixelStorei(webGL.UNPACK_FLIP_Y_WEBGL, 1);\r\n\r\n        // ACTIVATE THE WebGL TEXTURE ON THE GPU\r\n        //let textureNumName : string = \"TEXTURE\" + textureId;\r\n        let textureNameConstant : number = this.getTextureConstant(textureId);\r\n        this.webGL.activeTexture(textureNameConstant);\r\n\r\n        // BIND THE TEXTURE TO A 2D TYPE\r\n        this.webGL.bindTexture(this.webGL.TEXTURE_2D, textureToInit.webGLTexture);\r\n\r\n        // SPECIFY RENDERING SETTINGS\r\n        this.webGL.texParameteri(this.webGL.TEXTURE_2D, this.webGL.TEXTURE_MIN_FILTER, this.webGL.LINEAR);\r\n\r\n        // SET THE IMAGE FOR THE TEXTURE\r\n        this.webGL.texImage2D(this.webGL.TEXTURE_2D, 0, this.webGL.RGBA, this.webGL.RGBA, this.webGL.UNSIGNED_BYTE, image);\r\n\r\n        // KEEP IT FOR WHEN WE RENDER\r\n        callback();\r\n    }\r\n\r\n    public setClearColor(r : number, g : number, b : number, a : number) : void {\r\n        this.webGL.clearColor(r, g, b, a);\r\n    }\r\n\r\n    public render(visibleSet : Array<SceneObject>) : void {\r\n        // CLEAR THE CANVAS\r\n        this.webGL.clear(this.webGL.COLOR_BUFFER_BIT | this.webGL.DEPTH_BUFFER_BIT);\r\n        \r\n        let spriteSet = new Array();\r\n        let circleSet = new Array();\r\n        for (let v of visibleSet) {\r\n            if (v instanceof GradientCircle) {\r\n                circleSet.push(v)\r\n            } else {\r\n                spriteSet.push(v)\r\n            }\r\n        }\r\n        console.log(\"circle set size: \" + circleSet.length)\r\n\r\n        // RENDER THE SPRITES ON ONE CANVAS\r\n        this.spriteRenderer.renderAnimatedSprites(this.webGL, this.canvasWidth, this.canvasHeight, spriteSet);\r\n        \r\n        // RENDER THE CIRCLES ON CANVAS\r\n        this.circleRenderer.renderGradientCircles(this.webGL, this.canvasWidth, this.canvasHeight, circleSet);\r\n\r\n        // THEN THE TEXT ON ANOTHER OVERLAPPING CANVAS\r\n        this.textRenderer.render();\r\n    }\r\n}","/*\r\n * This is a wrapper class for a WebGLProgram, i.e. a shader for custom rendering\r\n * using WebGL's programmable pipeline.\r\n */\r\nexport class WebGLGameShader {\r\n    private program : WebGLProgram;\r\n    private vertexShader : WebGLShader;\r\n    private fragmentShader : WebGLShader;\r\n\r\n    public constructor() {}\r\n\r\n    public getProgram() : WebGLProgram {\r\n        return this.program;\r\n    }\r\n\r\n    public getVertexShader(): WebGLShader {\r\n        return this.vertexShader;\r\n    }\r\n\r\n    public getFragmentShader(): WebGLShader {\r\n        return this.vertexShader;\r\n    }\r\n\r\n    public init(webGL : WebGLRenderingContext, vSource : string, fSource : string) : void {\r\n        this.vertexShader = <WebGLShader>this.createShader(webGL, webGL.VERTEX_SHADER, vSource);\r\n        this.fragmentShader = <WebGLShader>this.createShader(webGL, webGL.FRAGMENT_SHADER, fSource);\r\n        this.program = this.createShaderProgram(webGL, this.vertexShader, this.fragmentShader);\r\n    }\r\n\r\n    public createShader(webGL : WebGLRenderingContext, type : number, source : string) : WebGLShader {\r\n        // MAKE A NEW SHADER OBJECT, LOAD IT'S SOURCE, AND COMPILE IT\r\n        var shader = webGL.createShader(type);\r\n        webGL.shaderSource(shader, source);\r\n        webGL.compileShader(shader);\r\n\r\n        // DID IT COMPILE?\r\n        var success = webGL.getShaderParameter(shader, webGL.COMPILE_STATUS);\r\n        if (success) {\r\n            return shader;\r\n        }\r\n\r\n        // DISASTER\r\n        console.log(webGL.getShaderInfoLog(shader));\r\n        webGL.deleteShader(shader);\r\n        return null;\r\n    }\r\n\r\n    public createShaderProgram(webGL : WebGLRenderingContext, vShader : WebGLShader, fShader : WebGLShader) : WebGLProgram {\r\n        // MAKE THE GLSL SHADER PROGRAM\r\n        let programToCreate = webGL.createProgram();\r\n\r\n        // LINK THE VERT AND FRAG\r\n        webGL.attachShader(programToCreate, vShader);\r\n        webGL.attachShader(programToCreate, fShader);\r\n\r\n        // NOW WE CAN LINK THE SHADER PROGRAM\r\n        webGL.linkProgram(programToCreate);\r\n        let linked : boolean = webGL.getProgramParameter(programToCreate, webGL.LINK_STATUS);\r\n\r\n        // IS IT LINKED?\r\n        if (!linked) {\r\n            // DISASTER\r\n            let errorFeedback : string = webGL.getProgramInfoLog(programToCreate);\r\n            console.log(errorFeedback);\r\n\r\n            // DISASTER\r\n            console.log(webGL.getProgramInfoLog(programToCreate));\r\n            webGL.deleteProgram(programToCreate);\r\n        }\r\n        return programToCreate;\r\n    }\r\n}","import {WebGLGameShader} from './WebGLGameShader'\r\nimport {MathUtilities} from '../math/MathUtilities'\r\nimport { Matrix } from '../math/Matrix'\r\nimport { Vector3 } from '../math/Vector3'\r\nimport {AnimatedSprite} from '../scene/sprite/AnimatedSprite'\r\nimport {AnimatedSpriteType} from '../scene/sprite/AnimatedSpriteType'\r\nimport {WebGLGameTexture} from './WebGLGameTexture'\r\nimport {HashTable} from '../data/HashTable'\r\n\r\nvar SpriteDefaults = {\r\n    A_POSITION: \"a_Position\",\r\n    A_TEX_COORD: \"a_TexCoord\",\r\n    U_SPRITE_TRANSFORM: \"u_SpriteTransform\",\r\n    U_TEX_COORD_FACTOR: \"u_TexCoordFactor\",\r\n    U_TEX_COORD_SHIFT: \"u_TexCoordShift\",\r\n    U_SAMPLER: \"u_Sampler\",\r\n    NUM_VERTICES: 4,\r\n    FLOATS_PER_VERTEX: 2,\r\n    FLOATS_PER_TEXTURE_COORDINATE: 2,\r\n    TOTAL_BYTES: 16,\r\n    VERTEX_POSITION_OFFSET: 0,\r\n    TEXTURE_COORDINATE_OFFSET: 8,\r\n    INDEX_OF_FIRST_VERTEX: 0\r\n};\r\n\r\nexport class WebGLGameSpriteRenderer {\r\n    private shader : WebGLGameShader;\r\n    private vertexTexCoordBuffer : WebGLBuffer;\r\n\r\n    // WE'LL USE THESE FOR TRANSOFMRING OBJECTS WHEN WE DRAW THEM\r\n    private spriteTransform : Matrix;\r\n    private spriteTranslate : Vector3;\r\n    private spriteRotate : Vector3;\r\n    private spriteScale : Vector3;    \r\n\r\n    private webGLAttributeLocations : HashTable<GLuint>;\r\n    private webGLUniformLocations : HashTable<WebGLUniformLocation>;\r\n\r\n    public constructor() {}\r\n\r\n    public getShader(): WebGLGameShader {\r\n        return this.shader;\r\n    }\r\n    \r\n    public init(webGL : WebGLRenderingContext) : void {\r\n        this.shader = new WebGLGameShader();\r\n        var vertexShaderSource =\r\n            'uniform mat4 ' + SpriteDefaults.U_SPRITE_TRANSFORM + ';\\n' +\r\n            'uniform vec2 ' + SpriteDefaults.U_TEX_COORD_FACTOR + ';\\n' +\r\n            'uniform vec2 ' + SpriteDefaults.U_TEX_COORD_SHIFT + ';\\n' +\r\n            'attribute vec4 ' + SpriteDefaults.A_POSITION + ';\\n' +\r\n            'attribute vec2 ' + SpriteDefaults.A_TEX_COORD + ';\\n' +\r\n            'varying vec2 v_TexCoord;\\n' +\r\n            'void main() {\\n' +\r\n            '  gl_Position = ' + SpriteDefaults.U_SPRITE_TRANSFORM + ' * ' + SpriteDefaults.A_POSITION + ';\\n' +\r\n            '  vec2 tempTexCoord = ' + SpriteDefaults.A_TEX_COORD + ' * ' + SpriteDefaults.U_TEX_COORD_FACTOR + ';\\n' +\r\n            '  v_TexCoord = tempTexCoord + ' + SpriteDefaults.U_TEX_COORD_SHIFT + ';\\n' +\r\n            '}\\n';\r\n        var fragmentShaderSource =\r\n            '#ifdef GL_ES\\n' +\r\n            'precision mediump float;\\n' +\r\n            '#endif\\n' +\r\n            'uniform sampler2D ' + SpriteDefaults.U_SAMPLER + ';\\n' +\r\n            'varying vec2 v_TexCoord;\\n' +\r\n            'void main() {\\n' +\r\n            '  gl_FragColor = texture2D(' + SpriteDefaults.U_SAMPLER + ', v_TexCoord);\\n' +\r\n            '}\\n';\r\n        this.shader.init(webGL, vertexShaderSource, fragmentShaderSource);\r\n\r\n        // GET THE webGL OBJECT TO USE\r\n        var verticesTexCoords = new Float32Array([\r\n            -0.5,  0.5, 0.0, 0.0,\r\n            -0.5, -0.5, 0.0, 1.0,\r\n             0.5,  0.5, 1.0, 0.0,\r\n             0.5, -0.5, 1.0, 1.0\r\n        ]);\r\n\r\n        // CREATE THE BUFFER ON THE GPU\r\n        this.vertexTexCoordBuffer = webGL.createBuffer();\r\n\r\n        // BIND THE BUFFER TO BE VERTEX DATA\r\n        webGL.bindBuffer(webGL.ARRAY_BUFFER, this.vertexTexCoordBuffer);\r\n\r\n        // AND SEND THE DATA TO THE BUFFER WE CREATED ON THE GPU\r\n        webGL.bufferData(webGL.ARRAY_BUFFER, verticesTexCoords, webGL.STATIC_DRAW);\r\n\r\n        // SETUP THE SHADER ATTRIBUTES AND UNIFORMS\r\n        this.webGLAttributeLocations = {};\r\n        this.webGLUniformLocations = {};\r\n        this.loadAttributeLocations(webGL, [SpriteDefaults.A_POSITION, SpriteDefaults.A_TEX_COORD]);\r\n        this.loadUniformLocations(webGL, [SpriteDefaults.U_SPRITE_TRANSFORM, SpriteDefaults.U_SAMPLER, SpriteDefaults.U_TEX_COORD_FACTOR, SpriteDefaults.U_TEX_COORD_SHIFT]);\r\n\r\n        // WE'LL USE THESE FOR TRANSOFMRING OBJECTS WHEN WE DRAW THEM\r\n        this.spriteTransform = new Matrix(4, 4);\r\n        this.spriteTranslate = new Vector3();\r\n        this.spriteRotate = new Vector3();\r\n        this.spriteScale = new Vector3();\r\n    }\r\n\r\n    public renderAnimatedSprites(  webGL : WebGLRenderingContext, \r\n                            canvasWidth : number, \r\n                            canvasHeight : number, \r\n                            visibleSet : Array<AnimatedSprite>) : void {\r\n        // SELECT THE ANIMATED SPRITE RENDERING SHADER PROGRAM FOR USE\r\n        let shaderProgramToUse = this.shader.getProgram();\r\n        webGL.useProgram(shaderProgramToUse);\r\n\r\n       // AND THEN RENDER EACH ONE\r\n       for (let sprite of visibleSet) {\r\n            this.renderAnimatedSprite(webGL, canvasWidth, canvasHeight, sprite);        \r\n        }\r\n    }\r\n\r\n    private loadAttributeLocations(webGL : WebGLRenderingContext, attributeLocationNames : Array<string>) {\r\n        for (var i = 0; i < attributeLocationNames.length; i++) {\r\n            let locationName : string = attributeLocationNames[i];\r\n            let location : GLuint = webGL.getAttribLocation(this.shader.getProgram(), locationName);\r\n            this.webGLAttributeLocations[locationName] = location;\r\n        }\r\n    }\r\n\r\n    private loadUniformLocations(webGL : WebGLRenderingContext, uniformLocationNames : Array<string>) {\r\n        for (let i : number = 0; i < uniformLocationNames.length; i++) {\r\n            let locationName : string = uniformLocationNames[i];\r\n            let location : WebGLUniformLocation = webGL.getUniformLocation(this.shader.getProgram(), locationName);\r\n            this.webGLUniformLocations[locationName] = location;\r\n        }\r\n    }\r\n\r\n    private renderAnimatedSprite(   webGL : WebGLRenderingContext, \r\n                            canvasWidth : number, \r\n                            canvasHeight : number, \r\n                            sprite : AnimatedSprite) {\r\n        let spriteType : AnimatedSpriteType = sprite.getSpriteType();\r\n        let texture : WebGLGameTexture = spriteType.getSpriteSheetTexture();\r\n\r\n        // CALCULATE HOW MUCH TO TRANSLATE THE QUAD PER THE SPRITE POSITION\r\n        let spriteWidth : number = spriteType.getSpriteWidth();\r\n        let spriteHeight : number = spriteType.getSpriteHeight();\r\n        let spriteXInPixels : number = sprite.getPosition().getX() + (spriteWidth/2);\r\n        let spriteYInPixels : number = sprite.getPosition().getY() + (spriteHeight/2);\r\n        let spriteXTranslate : number = (spriteXInPixels - (canvasWidth/2))/(canvasWidth/2);\r\n        let spriteYTranslate : number = (spriteYInPixels - (canvasHeight/2))/(canvasHeight/2);\r\n        this.spriteTranslate.setX(spriteXTranslate);\r\n        this.spriteTranslate.setY(-spriteYTranslate);\r\n\r\n        // CALCULATE HOW MUCH TO SCALE THE QUAD PER THE SPRITE SIZE\r\n        let defaultWidth : number = canvasWidth/2;\r\n        let defaultHeight : number = canvasHeight/2;\r\n        let scaleX : number = spriteWidth/defaultWidth;\r\n        let scaleY : number = spriteHeight/defaultHeight;\r\n        this.spriteScale.setX(scaleX);\r\n        this.spriteScale.setY(scaleY);\r\n\r\n        // @todo - COMBINE THIS WITH THE ROTATE AND SCALE VALUES FROM THE SPRITE\r\n        MathUtilities.identity(this.spriteTransform);\r\n        MathUtilities.model(this.spriteTransform, this.spriteTranslate, this.spriteRotate, this.spriteScale);\r\n        \r\n        // FIGURE OUT THE TEXTURE COORDINATE FACTOR AND SHIFT\r\n        let texCoordFactorX : number = spriteWidth/texture.width;\r\n        let texCoordFactorY : number = spriteHeight/texture.height;\r\n        let spriteLeft : number = sprite.getLeft();\r\n        let spriteTop : number = sprite.getTop();\r\n        let texCoordShiftX : number = spriteLeft/texture.width;\r\n        let texCoordShiftY : number = spriteTop/texture.height;   \r\n\r\n        // USE THE ATTRIBUTES\r\n        webGL.bindBuffer(webGL.ARRAY_BUFFER, this.vertexTexCoordBuffer);\r\n        webGL.bindTexture(webGL.TEXTURE_2D, texture.webGLTexture);\r\n\r\n        // HOOK UP THE ATTRIBUTES\r\n        let a_PositionLocation : GLuint = this.webGLAttributeLocations[SpriteDefaults.A_POSITION];\r\n        webGL.vertexAttribPointer(a_PositionLocation, SpriteDefaults.FLOATS_PER_TEXTURE_COORDINATE, webGL.FLOAT, false, SpriteDefaults.TOTAL_BYTES, SpriteDefaults.VERTEX_POSITION_OFFSET);\r\n        webGL.enableVertexAttribArray(a_PositionLocation);\r\n        let a_TexCoordLocation : GLuint = this.webGLAttributeLocations[SpriteDefaults.A_TEX_COORD];\r\n        webGL.vertexAttribPointer(a_TexCoordLocation, SpriteDefaults.FLOATS_PER_TEXTURE_COORDINATE, webGL.FLOAT, false, SpriteDefaults.TOTAL_BYTES, SpriteDefaults.TEXTURE_COORDINATE_OFFSET);\r\n        webGL.enableVertexAttribArray(a_TexCoordLocation);\r\n\r\n        // USE THE UNIFORMS\r\n        let u_SpriteTransformLocation : WebGLUniformLocation = this.webGLUniformLocations[SpriteDefaults.U_SPRITE_TRANSFORM];\r\n        webGL.uniformMatrix4fv(u_SpriteTransformLocation, false, this.spriteTransform.getData());\r\n        let u_SamplerLocation : WebGLUniformLocation = this.webGLUniformLocations[SpriteDefaults.U_SAMPLER];\r\n        webGL.uniform1i(u_SamplerLocation, texture.webGLTextureId);\r\n        let u_TexCoordFactorLocation : WebGLUniformLocation = this.webGLUniformLocations[SpriteDefaults.U_TEX_COORD_FACTOR];\r\n        webGL.uniform2f(u_TexCoordFactorLocation, texCoordFactorX, texCoordFactorY);\r\n        let u_TexCoordShiftLocation : WebGLUniformLocation = this.webGLUniformLocations[SpriteDefaults.U_TEX_COORD_SHIFT];\r\n        webGL.uniform2f(u_TexCoordShiftLocation, texCoordShiftX, texCoordShiftY);\r\n\r\n        // DRAW THE SPRITE AS A TRIANGLE STRIP USING 4 VERTICES, STARTING AT THE START OF THE ARRAY (index 0)\r\n        webGL.drawArrays(webGL.TRIANGLE_STRIP, SpriteDefaults.INDEX_OF_FIRST_VERTEX, SpriteDefaults.NUM_VERTICES);\r\n    }\r\n}","export class WebGLGameTexture {\r\n    public webGLTextureId: number;\r\n    public webGLTexture: WebGLTexture;\r\n    public image: HTMLImageElement;\r\n    public width : number;\r\n    public height : number;\r\n}","import { SceneObject } from \"./SceneObject\";\r\n\r\n\r\nexport class GradientCircle extends SceneObject {\r\n\r\n    private width: number;\r\n    private height: number;\r\n    private r: number;\r\n    private g: number;\r\n    private b: number;\r\n    private color: number;\r\n\r\n    private radius: number\r\n\r\n    public constructor(width: number, height: number) {\r\n        super();\r\n        this.width = width\r\n        this.height = height\r\n        this.radius = 20;\r\n        let max = 5;\r\n        let min = 0;\r\n        this.color = Math.random() * (max - min + 1) + min;\r\n    }\r\n\r\n    public getColor(): number {\r\n        return this.color;\r\n    }\r\n\r\n    public getWidth(): number {\r\n        return this.width;\r\n    }\r\n\r\n    \r\n    public getHeight(): number {\r\n        return this.height;\r\n    }\r\n\r\n\r\n    public contains(testX : number, testY : number) : boolean {\r\n        let spriteWidth = this.getWidth();\r\n        let spriteHeight = this.getHeight();\r\n        let spriteLeft = this.getPosition().getX();\r\n        let spriteRight = this.getPosition().getX() + spriteWidth;\r\n        let spriteTop = this.getPosition().getY();\r\n        let spriteBottom = this.getPosition().getY() + spriteHeight;\r\n        if (    (testX < spriteLeft)\r\n            ||  (spriteRight < testX)\r\n            ||  (testY < spriteTop)\r\n            ||  (spriteBottom < testY)) {\r\n                return false;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    public toString(): string {\r\n        return `(${this.getPosition().getX()}, ${this.getPosition().getY()})`\r\n    }\r\n\r\n    \r\n}\r\n\r\n","import {SceneObject} from './SceneObject'\r\nimport {AnimatedSprite} from './sprite/AnimatedSprite'\r\nimport { Vector3 } from '../math/Vector3';\r\nimport { GradientCircle } from './GradientCircle';\r\n\r\nexport class SceneGraph {\r\n    // AND ALL OF THE ANIMATED SPRITES, WHICH ARE NOT STORED\r\n    // SORTED OR IN ANY PARTICULAR ORDER. NOTE THAT ANIMATED SPRITES\r\n    // ARE SCENE OBJECTS\r\n    private animatedSprites : Array<AnimatedSprite>;\r\n\r\n    // SET OF VISIBLE OBJECTS, NOTE THAT AT THE MOMENT OUR\r\n    // SCENE GRAPH IS QUITE SIMPLE, SO THIS IS THE SAME AS\r\n    // OUR LIST OF ANIMATED SPRITES\r\n    private visibleSet : Array<SceneObject>;\r\n\r\n    private graidentCircles: Array<GradientCircle>;\r\n\r\n    public constructor() {\r\n        // DEFAULT CONSTRUCTOR INITIALIZES OUR DATA STRUCTURES\r\n        this.animatedSprites = new Array();\r\n        this.visibleSet = new Array();\r\n        this.graidentCircles = new Array();\r\n    }\r\n\r\n    public getTotalSceneNums(): number {\r\n        return this.graidentCircles.length + this.animatedSprites.length\r\n    }\r\n\r\n    public getNumSprites() : number {\r\n        return this.animatedSprites.length;\r\n    }\r\n\r\n    public addAnimatedSprite(sprite : AnimatedSprite) : void {\r\n        this.animatedSprites.push(sprite);\r\n    }\r\n\r\n    public addGradientCircle(cirlce: GradientCircle): void{\r\n        this.graidentCircles.push(cirlce);\r\n    }\r\n\r\n    public getObjAt(testX : number, testY : number): SceneObject {\r\n        let k: number = this.visibleSet.length - 1;\r\n        let i: number;\r\n        for (i = k; i >= 0; i --) {\r\n            if (this.visibleSet[i].contains(testX, testY))\r\n                return this.visibleSet[i];\r\n        }\r\n        return null\r\n    }\r\n\r\n    public getSpriteAt(testX : number, testY : number) : AnimatedSprite {\r\n        // for (let sprite of this.animatedSprites) {\r\n        //     if (sprite.contains(testX, testY))\r\n        //         return sprite;\r\n        // }\r\n        // return null;\r\n        let k: number = this.animatedSprites.length - 1;\r\n        let i: number;\r\n        for (i = k; i >= 0; i --) {\r\n            if (this.animatedSprites[i].contains(testX, testY))\r\n                return this.animatedSprites[i];\r\n        }\r\n        return null\r\n    }\r\n\r\n    public getCircleAt(testX: number, testY: number): GradientCircle {\r\n        // for (let c of this.graidentCircles) {\r\n        //     if (c.contains(testX, testY))\r\n        //         return c\r\n        // }\r\n        // return null;\r\n        let i: number;\r\n        let k  = this.graidentCircles.length - 1;\r\n        for (i= k; i >= 0; i --) {\r\n            if (this.graidentCircles[i].contains(testX, testY))\r\n                return this.graidentCircles[i];\r\n        }\r\n        return null\r\n    }\r\n\r\n    public getAnimatedSprites(): Array<AnimatedSprite> {    \r\n        return this.animatedSprites;\r\n    }\r\n\r\n    public removeCircle(c: GradientCircle): void {\r\n        let cPos: Vector3 = c.getPosition();\r\n        let newArr = new Array<GradientCircle>();\r\n        if (c != null) {\r\n            for (let s of this.graidentCircles) {\r\n                let pos: Vector3 = s.getPosition();\r\n                if (pos.getX() !== cPos.getX() &&\r\n                    pos.getY() !== cPos.getY()) {\r\n                    newArr.push(s);\r\n                }\r\n            }\r\n        }\r\n        this.graidentCircles = newArr;\r\n    }\r\n\r\n    public removeObj(obj: SceneObject): void {\r\n        if (obj instanceof GradientCircle) { \r\n            this.removeCircle(obj as GradientCircle);\r\n        } else if (obj instanceof AnimatedSprite) {\r\n            this.removeSprite((obj as AnimatedSprite));\r\n        }\r\n    }\r\n\r\n    public removeSprite(sprite: AnimatedSprite): void {\r\n        console.log(\"removing function is called\")\r\n        var spritePos: Vector3 = sprite.getPosition();\r\n\r\n        let newArr = new Array<AnimatedSprite>();\r\n        if (sprite != null) {\r\n            for (let s of this.animatedSprites) {\r\n                let pos: Vector3 = s.getPosition();\r\n                if (pos.getX() !== spritePos.getX() &&\r\n                    pos.getY() !== spritePos.getY()) {\r\n                    newArr.push(s);\r\n                }\r\n            }\r\n        }\r\n        console.log(`old size: ${this.animatedSprites.length} ... new size:${newArr.length}`);\r\n        console.log(newArr)\r\n        this.animatedSprites = newArr;\r\n    }\r\n\r\n    /**\r\n     * update\r\n     * \r\n     * Called once per frame, this function updates the state of all the objects\r\n     * in the scene.\r\n     * \r\n     * @param delta The time that has passed since the last time this update\r\n     * funcation was called.\r\n     */\r\n    public update(delta : number) : void {\r\n        for (let sprite of this.animatedSprites) {\r\n            sprite.update(delta);\r\n        }\r\n    }\r\n\r\n    public scope() : Array<SceneObject> {\r\n        // CLEAR OUT THE OLD\r\n        this.visibleSet = [];\r\n\r\n        // PUT ALL THE SCENE OBJECTS INTO THE VISIBLE SET\r\n        for (let sprite of this.animatedSprites) {\r\n            this.visibleSet.push(sprite);\r\n        }\r\n\r\n        for (let c of this.graidentCircles) {\r\n            this.visibleSet.push(c);\r\n        }\r\n\r\n        return this.visibleSet;\r\n    }\r\n}","import {Vector3} from '../math/Vector3'\r\n\r\n/**\r\n * SceneObject\r\n * \r\n * A SceneObject is something that can be placed into the scene graph. It has\r\n * a position, rotation, and scale in the game world. Note that its position\r\n * is typically its centered location, so if we're talking about a 2d box, \r\n * it would be the center of that box.\r\n */\r\nexport abstract class SceneObject {\r\n    private position : Vector3;\r\n    private rotation : Vector3;\r\n    private scale : Vector3;\r\n\r\n    public constructor() {\r\n        this.position = new Vector3();\r\n        this.rotation = new Vector3();\r\n        this.scale = new Vector3();\r\n\r\n        // CLEAR ALL VALUES\r\n        this.position.set(0.0, 0.0, 0.0, 1.0);\r\n        this.rotation.set(0.0, 0.0, 0.0, 1.0);\r\n        this.scale.set(1.0, 1.0, 1.0, 1.0);\r\n    }\r\n\r\n    public getPosition() : Vector3 {\r\n        return this.position;\r\n    }    \r\n\r\n    public getRotation() : Vector3 {\r\n        return this.rotation;\r\n    }\r\n\r\n    public getScale() : Vector3 {\r\n        return this.scale;\r\n    }\r\n\r\n    public abstract contains(testX : number, testY : number) : boolean;\r\n}","import {SceneObject} from '../SceneObject'\r\nimport {AnimatedSpriteType} from './AnimatedSpriteType'\r\n\r\nexport class AnimatedSprite extends SceneObject {\r\n    private spriteType : AnimatedSpriteType;\r\n    private state : string;\r\n    private animationFrameIndex : number;\r\n    private frameCounter : number;\r\n    \r\n    public constructor(initSpriteType : AnimatedSpriteType, initState : string) {\r\n        super();\r\n        this.spriteType = initSpriteType;\r\n        \r\n        // START RESET\r\n        this.state = initState;\r\n        this.animationFrameIndex = 0;\r\n        this.frameCounter = 0;\r\n    }\r\n\r\n    public getAnimationFrameIndex() : number {\r\n        return this.animationFrameIndex;\r\n    }\r\n\r\n    public getFrameCounter() : number {\r\n        return this.frameCounter;\r\n    }\r\n\r\n    public getSpriteType() : AnimatedSpriteType {\r\n        return this.spriteType;\r\n    }\r\n\r\n    public getState() : string {\r\n        return this.state;\r\n    }\r\n    \r\n    public setState(initState : string) : void {\r\n        this.state = initState;\r\n        this.animationFrameIndex = 0;\r\n        this.frameCounter = 0;\r\n    }\r\n    \r\n    public update(delta : number) : void {\r\n        this.frameCounter++;\r\n        \r\n        // HAVE WE GONE PAST THE LAST FRAME IN THE ANIMATION?\r\n        var currentAnimation = this.spriteType.getAnimation(this.state);\r\n        var currentFrame = currentAnimation[this.animationFrameIndex];\r\n        if (this.frameCounter > (currentFrame.duration)) {\r\n            this.animationFrameIndex++;\r\n            if (this.animationFrameIndex >= currentAnimation.length) {\r\n                this.animationFrameIndex = 0;\r\n            }\r\n            this.frameCounter = 0;\r\n        }\r\n    }\r\n\r\n    public contains(pointX : number, pointY : number) : boolean {\r\n        let spriteWidth = this.getSpriteType().getSpriteWidth();\r\n        let spriteHeight = this.getSpriteType().getSpriteHeight();\r\n        let spriteLeft = this.getPosition().getX();\r\n        let spriteRight = this.getPosition().getX() + spriteWidth;\r\n        let spriteTop = this.getPosition().getY();\r\n        let spriteBottom = this.getPosition().getY() + spriteHeight;\r\n        if (    (pointX < spriteLeft)\r\n            ||  (spriteRight < pointX)\r\n            ||  (pointY < spriteTop)\r\n            ||  (spriteBottom < pointY)) {\r\n                return false;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n    \r\n    /**RENAME THIS METHOD SO IT DENOTES PIXEL LOCATION IN TEXTURE */\r\n    public getLeft() : number {\r\n        return this.spriteType.getLeft(this.state, this.animationFrameIndex);\r\n    }\r\n    \r\n    public getTop() : number {\r\n        return this.spriteType.getTop(this.state, this.animationFrameIndex);\r\n    }\r\n\r\n    public toString() : string {\r\n        let summary : string =  \"{ position: (\"\r\n                            +   this.getPosition().getX() + \", \" + this.getPosition().getY() + \") \"\r\n                            +   \"(state: \" + this.getState() + \") \"\r\n                            +   \"(animationFrameIndex: \" + this.getAnimationFrameIndex() + \") \"\r\n                            +   \"(frameCounter: \" + this.getFrameCounter() + \") \";\r\n        return summary;\r\n    }\r\n}","import {WebGLGameTexture} from '../../rendering/WebGLGameTexture'\r\nimport {HashTable} from '../../data/HashTable'\r\n\r\nexport class AnimationFrame {\r\n    public left : number;\r\n    public top : number;\r\n    public duration : number;\r\n\r\n    constructor(initLeft : number, initTop : number, initDuration : number) {\r\n        this.left = initLeft;\r\n        this.top = initTop;\r\n        this.duration = initDuration;\r\n    }\r\n}\r\n\r\nexport class AnimatedSpriteType {\r\n    private spriteSheetTexture : WebGLGameTexture;\r\n    private animations : HashTable<Array<AnimationFrame>>;\r\n    private spriteWidth : number;\r\n    private spriteHeight : number;\r\n\r\n    public constructor(initSpriteSheetTexture : WebGLGameTexture, \r\n                initSpriteWidth : number, initSpriteHeight : number) {\r\n        this.spriteSheetTexture = initSpriteSheetTexture;\r\n        this.animations = {};\r\n        this.spriteWidth = initSpriteWidth;\r\n        this.spriteHeight = initSpriteHeight;\r\n    }\r\n\r\n    public addAnimation(state : string) : void {\r\n        this.animations[state] = new Array<AnimationFrame>();\r\n    }\r\n\r\n    public addAnimationFrame(state : string, index : number, frameDuration : number) : void {\r\n        var columns = this.spriteSheetTexture.width/this.spriteWidth;\r\n        var rows = this.spriteSheetTexture.height/this.spriteHeight;\r\n        var col = index % columns;\r\n        var row = Math.floor(index /  columns);\r\n        var left = col * this.spriteWidth;\r\n        var top = row * this.spriteHeight;\r\n        this.animations[state].push(new AnimationFrame(left, top, frameDuration));\r\n    }\r\n\r\n    public getSpriteWidth() : number {\r\n        return this.spriteWidth;\r\n    }\r\n\r\n    public getSpriteHeight() : number {\r\n        return this.spriteHeight;\r\n    }\r\n\r\n    public getSpriteSheetTexture() : WebGLGameTexture {\r\n        return this.spriteSheetTexture;\r\n    }\r\n\r\n    public getAnimation(state : string) : Array<AnimationFrame> {\r\n        return this.animations[state];\r\n    }\r\n\r\n    public getLeft(state : string, frameIndex : number) : number {\r\n        let animationFrame : AnimationFrame = this.animations[state][frameIndex];\r\n        return animationFrame.left;\r\n    }\r\n\r\n    public getTop(state : string, frameIndex : number) : number {\r\n        let animationFrame : AnimationFrame = this.animations[state][frameIndex];\r\n        return animationFrame.top;\r\n    }\r\n}","import { game } from './../../animated_sprite_demo/AnimatedSpriteDemo';\r\nimport { GradientCircle } from './../scene/GradientCircle';\r\nimport { AnimatedSpriteType } from './../scene/sprite/AnimatedSpriteType';\r\nimport { ResourceManager } from './../files/ResourceManager';\r\n\r\n\r\n/*\r\n * This provides responses to UI input.\r\n */\r\nimport {AnimatedSprite} from \"../scene/sprite/AnimatedSprite\"\r\nimport {SceneGraph} from \"../scene/SceneGraph\"\r\nimport { TextToRender, TextRenderer } from './../rendering/TextRenderer';\r\nimport { WebGLGameRenderingSystem } from './../rendering/WebGLGameRenderingSystem';\r\nimport { SceneObject } from '../scene/SceneObject';\r\n\r\n\r\n\r\n\r\n\r\nexport class UIController {\r\n    private spriteToDrag : AnimatedSprite;\r\n    private scene : SceneGraph;\r\n    private dragOffsetX : number;\r\n    private dragOffsetY : number;\r\n    private renderingSystem : WebGLGameRenderingSystem;\r\n    private detail: TextToRender;\r\n    private mouseOverSprite: AnimatedSprite;\r\n    private circleToDrag: GradientCircle;\r\n    private mouseOverCircle: GradientCircle;\r\n    private mouseOverObj: SceneObject;\r\n\r\n    private mouseX: number;\r\n    private mouseY: number;\r\n\r\n    public constructor() {}\r\n\r\n    public init(canvasId : string, initScene : SceneGraph,\r\n            renderingSystem: WebGLGameRenderingSystem\r\n        ) : void {\r\n        this.spriteToDrag = null;\r\n        this.scene = initScene;\r\n        this.dragOffsetX = -1;\r\n        this.dragOffsetY = -1;\r\n        this.renderingSystem = renderingSystem;\r\n\r\n        let canvas : HTMLCanvasElement = <HTMLCanvasElement>document.getElementById(canvasId);\r\n        canvas.addEventListener(\"mousedown\", this.mouseDownHandler);\r\n        canvas.addEventListener(\"mousemove\", this.mouseMoveHandler);\r\n        canvas.addEventListener(\"mouseup\", this.mouseUpHandler);\r\n        canvas.addEventListener(\"click\", this.mouseOneClickHandler);\r\n        canvas.addEventListener(\"dblclick\", this.mouseDoubleClickHandler);\r\n        canvas.addEventListener(\"mousemove\", this.mouseOverHandler);\r\n    }\r\n\r\n    public getMouseX(): number {\r\n        return this.mouseX;\r\n    }\r\n\r\n    public getMouseY(): number {\r\n        return this.mouseY;\r\n    }\r\n\r\n    public getMouseOverSprite(): AnimatedSprite {\r\n        return this.mouseOverSprite;\r\n    }\r\n\r\n    public getMouseOverCircle(): GradientCircle {\r\n        return this.mouseOverCircle;\r\n    }\r\n\r\n    public getMouseOverObj(): SceneObject {\r\n        return this.mouseOverObj;\r\n    }\r\n\r\n    public mouseOverHandler = (event: MouseEvent): void => {\r\n        console.log(\"MOUSING OVER YO\");\r\n        let mousePressX : number = event.clientX;\r\n        let mousePressY : number = event.clientY;\r\n        let sprite : AnimatedSprite = this.scene.getSpriteAt(mousePressX, mousePressY);\r\n        let circle: GradientCircle  = this.scene.getCircleAt(mousePressX, mousePressY);\r\n        let obj: SceneObject = this.scene.getObjAt(mousePressX, mousePressY);\r\n        var textRenderer: TextRenderer = this.renderingSystem.getTextRenderer();\r\n        this.mouseX = event.clientX;\r\n        this.mouseY = event.clientY;\r\n\r\n        if (obj != null) {\r\n            this.mouseOverObj = obj;\r\n        } else {\r\n            this.mouseOverObj = null;\r\n        }\r\n    \r\n\r\n        // if (sprite != null) {\r\n        //     console.log(\"Mousing over the sprite\");\r\n        //     this.mouseOverSprite = sprite;\r\n        // } else if (circle != null) {\r\n        //     this.mouseOverCircle = circle;\r\n        // } else {\r\n        //     this.mouseOverSprite = null;\r\n        //     this.mouseOverCircle = null;\r\n        // }\r\n    }\r\n\r\n    public mouseDoubleClickHandler = (event: MouseEvent): void => {\r\n        console.log(\"removing operation\");\r\n        let mousePressX : number = event.clientX;\r\n        let mousePressY : number = event.clientY;\r\n        let obj: SceneObject = this.scene.getObjAt(mousePressX, mousePressY);\r\n        let sprite : AnimatedSprite = this.scene.getSpriteAt(mousePressX, mousePressY);\r\n        let circle: GradientCircle  = this.scene.getCircleAt(mousePressX, mousePressY);\r\n        console.log(\"mousePressX: \" + mousePressX);\r\n        console.log(\"mousePressY: \" + mousePressY);\r\n        console.log(\"sprite: \" + sprite);\r\n        if (obj != null) {\r\n            this.scene.removeObj(obj);\r\n        }      \r\n        // if (sprite != null) {\r\n        //     // Remove sprite\r\n        //     this.scene.removeSprite(sprite);\r\n        // } else if (circle != null) {\r\n        //     this.scene.removeCircle(circle);\r\n        // }\r\n    }\r\n\r\n    public mouseOneClickHandler = (event: MouseEvent): void => {\r\n        const DEMO_SPRITE_TYPES : string[] = [\r\n            'resources/animated_sprites/RedCircleMan.json',\r\n            'resources/animated_sprites/MultiColorBlock.json'\r\n        ];\r\n        const DEMO_SPRITE_STATES = {\r\n            FORWARD_STATE: 'FORWARD',\r\n            REVERSE_STATE: 'REVERSE'\r\n        };\r\n        let mousePressX : number = event.clientX;\r\n        let mousePressY : number = event.clientY;\r\n        let sprite : AnimatedSprite = this.scene.getSpriteAt(mousePressX, mousePressY);\r\n        let circle : GradientCircle = this.scene.getCircleAt(mousePressX, mousePressY);\r\n        var ResourceManager: ResourceManager = game.getResourceManager();\r\n        let max = 1;\r\n        let min = 0;\r\n        let k  = Math.floor(Math.random() * (max - min + 1)) + min;\r\n        if (k < 1) {\r\n            if (sprite == null && circle == null) {\r\n                // randomly add a new sprite\r\n                let max = 1;\r\n                let min = 0;\r\n                let i  = Math.floor(Math.random() * (max - min + 1)) + min;\r\n                console.log(\"adding sprite operation\");\r\n                let spriteTypeToUse : string = DEMO_SPRITE_TYPES[i];\r\n                let animatedSpriteType : AnimatedSpriteType = ResourceManager.getAnimatedSpriteTypeById(spriteTypeToUse);\r\n                let spriteToAdd : AnimatedSprite = new AnimatedSprite(animatedSpriteType, DEMO_SPRITE_STATES.FORWARD_STATE);\r\n                spriteToAdd.getPosition().set(mousePressX, mousePressY, 0.0, 1.0);\r\n                this.scene.addAnimatedSprite(spriteToAdd);\r\n            } \r\n        } else {\r\n            if (sprite == null && circle == null) {\r\n                let circleToAdd: GradientCircle = new GradientCircle(300, 300);\r\n                circleToAdd.getPosition().set(mousePressX, mousePressY, 0.0, 1.0);\r\n                this.scene.addGradientCircle(circleToAdd);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    \r\n\r\n    public mouseDownHandler = (event : MouseEvent) : void => {\r\n        let mousePressX : number = event.clientX;\r\n        let mousePressY : number = event.clientY;\r\n        let sprite : AnimatedSprite = this.scene.getSpriteAt(mousePressX, mousePressY);\r\n        let circle : GradientCircle = this.scene.getCircleAt(mousePressX, mousePressY);\r\n        console.log(\"mousePressX: \" + mousePressX);\r\n        console.log(\"mousePressY: \" + mousePressY);\r\n        console.log(\"sprite: \" + sprite);\r\n        if (sprite != null) {\r\n            // START DRAGGING IT\r\n            this.spriteToDrag = sprite;\r\n            this.dragOffsetX = sprite.getPosition().getX() - mousePressX;\r\n            this.dragOffsetY = sprite.getPosition().getY() - mousePressY;\r\n        } else if (circle != null) {\r\n            this.circleToDrag = circle;\r\n            this.dragOffsetX = circle.getPosition().getX() - mousePressX;\r\n            this.dragOffsetY = circle.getPosition().getY() - mousePressY;\r\n        }\r\n    }\r\n    \r\n    public mouseMoveHandler = (event : MouseEvent) : void => {\r\n        if (this.spriteToDrag != null) {\r\n            this.spriteToDrag.getPosition().set(event.clientX + this.dragOffsetX, \r\n                                                event.clientY + this.dragOffsetY, \r\n                                                this.spriteToDrag.getPosition().getZ(), \r\n                                                this.spriteToDrag.getPosition().getW());\r\n        } else if (this.circleToDrag != null) {\r\n            this.circleToDrag.getPosition().set(event.clientX + this.dragOffsetX, \r\n                event.clientY + this.dragOffsetY, \r\n                this.circleToDrag.getPosition().getZ(), \r\n                this.circleToDrag.getPosition().getW());\r\n        }\r\n    }\r\n\r\n    public mouseUpHandler = (event : MouseEvent) : void => {\r\n        this.spriteToDrag = null;\r\n        this.circleToDrag = null;\r\n    }\r\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYW5pbWF0ZWRfc3ByaXRlX2RlbW8vQW5pbWF0ZWRTcHJpdGVEZW1vLnRzIiwic3JjL3dvbGZpZTJkL0dhbWUudHMiLCJzcmMvd29sZmllMmQvZmlsZXMvUmVzb3VyY2VNYW5hZ2VyLnRzIiwic3JjL3dvbGZpZTJkL2xvb3AvR2FtZUxvb3BUZW1wbGF0ZS50cyIsInNyYy93b2xmaWUyZC9tYXRoL01hdGhVdGlsaXRpZXMudHMiLCJzcmMvd29sZmllMmQvbWF0aC9NYXRyaXgudHMiLCJzcmMvd29sZmllMmQvbWF0aC9WZWN0b3IzLnRzIiwic3JjL3dvbGZpZTJkL3JlbmRlcmluZy9UZXh0UmVuZGVyZXIudHMiLCJzcmMvd29sZmllMmQvcmVuZGVyaW5nL1dlYkdMR2FtZUNpcmNsZVJlbmRlcmVyLnRzIiwic3JjL3dvbGZpZTJkL3JlbmRlcmluZy9XZWJHTEdhbWVSZW5kZXJpbmdTeXN0ZW0udHMiLCJzcmMvd29sZmllMmQvcmVuZGVyaW5nL1dlYkdMR2FtZVNoYWRlci50cyIsInNyYy93b2xmaWUyZC9yZW5kZXJpbmcvV2ViR0xHYW1lU3ByaXRlUmVuZGVyZXIudHMiLCJzcmMvd29sZmllMmQvcmVuZGVyaW5nL1dlYkdMR2FtZVRleHR1cmUudHMiLCJzcmMvd29sZmllMmQvc2NlbmUvR3JhZGllbnRDaXJjbGUudHMiLCJzcmMvd29sZmllMmQvc2NlbmUvU2NlbmVHcmFwaC50cyIsInNyYy93b2xmaWUyZC9zY2VuZS9TY2VuZU9iamVjdC50cyIsInNyYy93b2xmaWUyZC9zY2VuZS9zcHJpdGUvQW5pbWF0ZWRTcHJpdGUudHMiLCJzcmMvd29sZmllMmQvc2NlbmUvc3ByaXRlL0FuaW1hdGVkU3ByaXRlVHlwZS50cyIsInNyYy93b2xmaWUyZC91aS9VSUNvbnRyb2xsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7O0FDQUEsSUFBQSxtQkFBQSxRQUFBLG9D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b24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiaW1wb3J0IHsgR3JhZGllbnRDaXJjbGUgfSBmcm9tICcuLy4uL3dvbGZpZTJkL3NjZW5lL0dyYWRpZW50Q2lyY2xlJztcclxuaW1wb3J0IHsgVUlDb250cm9sbGVyIH0gZnJvbSAnLi8uLi93b2xmaWUyZC91aS9VSUNvbnRyb2xsZXInO1xyXG5pbXBvcnQgeyBXZWJHTEdhbWVTaGFkZXIgfSBmcm9tICcuLy4uL3dvbGZpZTJkL3JlbmRlcmluZy9XZWJHTEdhbWVTaGFkZXInO1xyXG5pbXBvcnQgeyBXZWJHTEdhbWVTcHJpdGVSZW5kZXJlciB9IGZyb20gJy4vLi4vd29sZmllMmQvcmVuZGVyaW5nL1dlYkdMR2FtZVNwcml0ZVJlbmRlcmVyJztcclxuLypcclxuICogQW5pbWF0ZWRTcHJpdGVEZW1vLnRzIC0gZGVtb25zdHJhdGVzIHNvbWUgc2ltcGxlIHNwcml0ZSByZW5kZXJpbmcgYW5kIFxyXG4gKiBhbmltYXRpb24gYXMgd2VsbCBhcyBzb21lIGJhc2ljIG1vdXNlIGludGVyYWN0aW9ucy4gTm90ZSB0aGF0IHRoZVxyXG4gKiBBbmltYXRpb25TcHJpdGVEZW1vIGNsYXNzIGxvYWRzIGFuZCBjcmVhdGVzIGN1c3RvbSBjb250ZW50IGZvciB0aGVcclxuICogcHVycG9zZSBvZiBkZW1vbnN0cmF0aW5nIGJhc2ljIGZ1bmN0aW9uYWxpdHkuXHJcbiAqL1xyXG5pbXBvcnQge0dhbWV9IGZyb20gJy4uL3dvbGZpZTJkL0dhbWUnXHJcbmltcG9ydCB7UmVzb3VyY2VNYW5hZ2VyfSBmcm9tICcuLi93b2xmaWUyZC9maWxlcy9SZXNvdXJjZU1hbmFnZXInXHJcbmltcG9ydCB7VGV4dFRvUmVuZGVyfSBmcm9tICcuLi93b2xmaWUyZC9yZW5kZXJpbmcvVGV4dFJlbmRlcmVyJ1xyXG5pbXBvcnQge1dlYkdMR2FtZVJlbmRlcmluZ1N5c3RlbX0gZnJvbSAnLi4vd29sZmllMmQvcmVuZGVyaW5nL1dlYkdMR2FtZVJlbmRlcmluZ1N5c3RlbSdcclxuaW1wb3J0IHtTY2VuZUdyYXBofSBmcm9tICcuLi93b2xmaWUyZC9zY2VuZS9TY2VuZUdyYXBoJ1xyXG5pbXBvcnQge0FuaW1hdGVkU3ByaXRlfSBmcm9tICcuLi93b2xmaWUyZC9zY2VuZS9zcHJpdGUvQW5pbWF0ZWRTcHJpdGUnXHJcbmltcG9ydCB7QW5pbWF0ZWRTcHJpdGVUeXBlfSBmcm9tICcuLi93b2xmaWUyZC9zY2VuZS9zcHJpdGUvQW5pbWF0ZWRTcHJpdGVUeXBlJ1xyXG5pbXBvcnQgeyBTY2VuZU9iamVjdCB9IGZyb20gJy4uL3dvbGZpZTJkL3NjZW5lL1NjZW5lT2JqZWN0JztcclxuXHJcblxyXG4vLyBJTiBUSElTIEVYQU1QTEUgV0UnTEwgSEFWRSAyIFNQUklURSBUWVBFUyBUSEFUIEVBQ0ggSEFWRSBUSEUgU0FNRSAyIFNUQVRFU1xyXG4vLyBBTkQgV0hFUkUgRUFDSCBTUFJJVEUgVFlQRSBIQVMgSVRTIE9XTiBTUFJJVEUgU0hFRVRcclxuY29uc3QgREVNT19TUFJJVEVfVFlQRVMgOiBzdHJpbmdbXSA9IFtcclxuICAgICdyZXNvdXJjZXMvYW5pbWF0ZWRfc3ByaXRlcy9SZWRDaXJjbGVNYW4uanNvbicsXHJcbiAgICAncmVzb3VyY2VzL2FuaW1hdGVkX3Nwcml0ZXMvTXVsdGlDb2xvckJsb2NrLmpzb24nXHJcbl07XHJcbmNvbnN0IERFTU9fU1BSSVRFX1NUQVRFUyA9IHtcclxuICAgIEZPUldBUkRfU1RBVEU6ICdGT1JXQVJEJyxcclxuICAgIFJFVkVSU0VfU1RBVEU6ICdSRVZFUlNFJ1xyXG59O1xyXG5jb25zdCBERU1PX1RFWFRVUkVTIDogc3RyaW5nW10gPSBbXHJcbiAgICAncmVzb3VyY2VzL2ltYWdlcy9FaWdodEJsb2Nrcy5wbmcnLCBcclxuICAgICdyZXNvdXJjZXMvaW1hZ2VzL1JlZENpcmNsZU1hbi5wbmcnXHJcbl07XHJcblxyXG5jbGFzcyBBbmltYXRlZFNwcml0ZURlbW8ge1xyXG4gICAgY29uc3RydWN0b3IoKSB7fVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBtZXRob2QgaW5pdGlhbGl6ZXMgdGhlIGFwcGxpY2F0aW9uLCBidWlsZGluZyBhbGwgdGhlIG5lZWRlZFxyXG4gICAgICogZ2FtZSBvYmplY3RzIGFuZCBzZXR0aW5nIHRoZW0gdXAgZm9yIHVzZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGJ1aWxkVGVzdFNjZW5lKGdhbWUgOiBHYW1lLCBjYWxsYmFjayA6IEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgbGV0IHJlbmRlcmluZ1N5c3RlbSA6IFdlYkdMR2FtZVJlbmRlcmluZ1N5c3RlbSA9IGdhbWUuZ2V0UmVuZGVyaW5nU3lzdGVtKCk7XHJcbiAgICAgICAgbGV0IHNjZW5lR3JhcGggOiBTY2VuZUdyYXBoID0gZ2FtZS5nZXRTY2VuZUdyYXBoKCk7XHJcbiAgICAgICAgbGV0IHJlc291cmNlTWFuYWdlciA6IFJlc291cmNlTWFuYWdlciA9IGdhbWUuZ2V0UmVzb3VyY2VNYW5hZ2VyKCk7XHJcbiAgICAgICAgbGV0IGJ1aWxkZXIgPSB0aGlzO1xyXG4gXHJcbiAgICAgICAgLy8gRU1QTE9ZIFRIRSBSRVNPVVJDRSBNQU5BR0VSIFRPIEJVSUxEIEFMTCBUSEUgV09STEQgQ09OVEVOVFxyXG4gICAgICAgIHJlc291cmNlTWFuYWdlci5sb2FkVGV4dHVyZXMoREVNT19URVhUVVJFUywgcmVuZGVyaW5nU3lzdGVtLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgLy8gT05MWSBBRlRFUiBBTEwgVEhFIFRFWFRVUkVTIEhBVkUgTE9BREVEIExPQUQgVEhFIFNQUklURSBUWVBFU1xyXG4gICAgICAgICAgICByZXNvdXJjZU1hbmFnZXIubG9hZFNwcml0ZVR5cGVzKERFTU9fU1BSSVRFX1RZUEVTLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIC8vIE9OTFkgQUZURVIgQUxMIFRIRSBTUFJJVEUgVFlQRVMgSEFWRSBMT0FERUQgTE9BRCBUSEUgU1BSSVRFU1xyXG4gICAgICAgICAgICAgICAgYnVpbGRlci5idWlsZEFuaW1hdGVkU3ByaXRlcyhyZXNvdXJjZU1hbmFnZXIsIHNjZW5lR3JhcGgpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEFORCBCVUlMRCBBTEwgVEhFIFRFWFQgT1VSIEFQUCBXSUxMIFVTRVxyXG4gICAgICAgICAgICAgICAgYnVpbGRlci5idWlsZFRleHQoZ2FtZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gRVZFUllUSElORyBIQVMgQkVFTiBCVUlMVCwgQ0FMTCBUSEUgQ0FMTEJBQ0tcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qXHJcbiAgICAgKiBCdWlsZHMgYWxsIHRoZSBhbmltYXRlZCBzcHJpdGVzIHRvIGJlIHVzZWQgYnkgdGhlIGFwcGxpY2F0aW9uIGFuZFxyXG4gICAgICogYWRkcyB0aGVtIHRvIHRoZSBzY2VuZS5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBidWlsZEFuaW1hdGVkU3ByaXRlcyhyZXNvdXJjZU1hbmFnZXIgOiBSZXNvdXJjZU1hbmFnZXIsIHNjZW5lIDogU2NlbmVHcmFwaCkge1xyXG4gICAgICAgIGxldCBjYW52YXNXaWR0aCA6IG51bWJlciA9ICg8SFRNTENhbnZhc0VsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnYW1lX2NhbnZhc1wiKSkud2lkdGg7XHJcbiAgICAgICAgbGV0IGNhbnZhc0hlaWdodCA6IG51bWJlciA9ICg8SFRNTENhbnZhc0VsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnYW1lX2NhbnZhc1wiKSkuaGVpZ2h0O1xyXG5cclxuICAgICAgICAvLyBCVUlMRCBBIEJVTkNIIE9GIENJUkNMRSBTUFJJVEVTXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBERU1PX1NQUklURV9UWVBFUy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDU7IGorKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNwcml0ZVR5cGVUb1VzZSA6IHN0cmluZyA9IERFTU9fU1BSSVRFX1RZUEVTW2ldO1xyXG4gICAgICAgICAgICAgICAgbGV0IGFuaW1hdGVkU3ByaXRlVHlwZSA6IEFuaW1hdGVkU3ByaXRlVHlwZSA9IHJlc291cmNlTWFuYWdlci5nZXRBbmltYXRlZFNwcml0ZVR5cGVCeUlkKHNwcml0ZVR5cGVUb1VzZSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3ByaXRlVG9BZGQgOiBBbmltYXRlZFNwcml0ZSA9IG5ldyBBbmltYXRlZFNwcml0ZShhbmltYXRlZFNwcml0ZVR5cGUsIERFTU9fU1BSSVRFX1NUQVRFUy5GT1JXQVJEX1NUQVRFKTtcclxuICAgICAgICAgICAgICAgIGxldCByYW5kb21YIDogbnVtYmVyID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2FudmFzV2lkdGgpIC0gKGFuaW1hdGVkU3ByaXRlVHlwZS5nZXRTcHJpdGVXaWR0aCgpLzIpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHJhbmRvbVkgOiBudW1iZXIgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjYW52YXNIZWlnaHQpIC0gKGFuaW1hdGVkU3ByaXRlVHlwZS5nZXRTcHJpdGVIZWlnaHQoKS8yKTtcclxuICAgICAgICAgICAgICAgIHNwcml0ZVRvQWRkLmdldFBvc2l0aW9uKCkuc2V0KHJhbmRvbVgsIHJhbmRvbVksIDAuMCwgMS4wKTtcclxuICAgICAgICAgICAgICAgIHNjZW5lLmFkZEFuaW1hdGVkU3ByaXRlKHNwcml0ZVRvQWRkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpICsrKSB7XHJcbiAgICAgICAgICAgIGxldCByYW5kb21YIDogbnVtYmVyID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2FudmFzV2lkdGgpIC0gKDIwMCk7XHJcbiAgICAgICAgICAgIGxldCByYW5kb21ZIDogbnVtYmVyID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2FudmFzSGVpZ2h0KSAtICgyMDApO1xyXG4gICAgICAgICAgICBsZXQgY2lyY2xlVG9BZGQ6IEdyYWRpZW50Q2lyY2xlID0gbmV3IEdyYWRpZW50Q2lyY2xlKDMwMCwgMzAwKTtcclxuICAgICAgICAgICAgY2lyY2xlVG9BZGQuZ2V0UG9zaXRpb24oKS5zZXQocmFuZG9tWCwgcmFuZG9tWSwgMC4wLCAxLjApO1xyXG4gICAgICAgICAgICBzY2VuZS5hZGRHcmFkaWVudENpcmNsZShjaXJjbGVUb0FkZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBGb3IgZ3JhZGllbnQgY2lybGNlIHdpdGggc2hhZGVyXHJcblxyXG4gICAgICAgIC8vIGZvciAobGV0IGogPSAwOyBqIDwgNTsgaisrKSB7XHJcbiAgICAgICAgICAgIGxldCByZW5kZXJpbmdTeXN0ZW06IFdlYkdMR2FtZVJlbmRlcmluZ1N5c3RlbSA9IGdhbWUuZ2V0UmVuZGVyaW5nU3lzdGVtKCk7XHJcbiAgICAgICAgICAgIGxldCBzcHJpdGVSZW5kZXJlcjogV2ViR0xHYW1lU3ByaXRlUmVuZGVyZXIgPSByZW5kZXJpbmdTeXN0ZW0uZ2V0U3ByaXRlUmVuZGVyZXIoKTtcclxuICAgICAgICAgICAgbGV0IGdsOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQgPSByZW5kZXJpbmdTeXN0ZW0uZ2V0V2ViR0woKTtcclxuICAgIH1cclxuXHJcbiAgICBcclxuXHJcbiAgICAvKlxyXG4gICAgICogQnVpbGRzIGFsbCB0aGUgdGV4dCB0byBiZSBkaXNwbGF5ZWQgaW4gdGhlIGFwcGxpY2F0aW9uLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGJ1aWxkVGV4dChnYW1lIDogR2FtZSkge1xyXG4gICAgICAgIGxldCBzY2VuZUdyYXBoIDogU2NlbmVHcmFwaCA9IGdhbWUuZ2V0U2NlbmVHcmFwaCgpO1xyXG4gICAgICAgIGxldCBudW1TcHJpdGVzVGV4dCA9IG5ldyBUZXh0VG9SZW5kZXIoXCJOdW0gU3ByaXRlc1wiLCBcIlwiLCAyMCwgNTAsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBudW1TcHJpdGVzVGV4dC50ZXh0ID0gXCJOdW1iZXIgb2YgU2NlbmUgT2JqZWN0czogXCIgKyBzY2VuZUdyYXBoLmdldFRvdGFsU2NlbmVOdW1zKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbGV0IHRleHRSZW5kZXJlciA9IGdhbWUuZ2V0UmVuZGVyaW5nU3lzdGVtKCkuZ2V0VGV4dFJlbmRlcmVyKCk7XHJcbiAgICAgICAgdGV4dFJlbmRlcmVyLmFkZFRleHRUb1JlbmRlcihudW1TcHJpdGVzVGV4dCk7XHJcblxyXG5cclxuICAgICAgICBsZXQgZGV0YWlsID0gbmV3IFRleHRUb1JlbmRlcihcIkRldGFpbFwiLCBcIlwiLCAyMCwgOTAsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxldCB1aUNvbnRyb2xsZXI6IFVJQ29udHJvbGxlciA9IGdhbWUuZ2V0VUlDb250cm9sbGVyKCk7XHJcbiAgICAgICAgICAgIGxldCBzcHJpdGU6IEFuaW1hdGVkU3ByaXRlID0gdWlDb250cm9sbGVyLmdldE1vdXNlT3ZlclNwcml0ZSgpO1xyXG4gICAgICAgICAgICBsZXQgY2lyY2xlOiBHcmFkaWVudENpcmNsZSA9IHVpQ29udHJvbGxlci5nZXRNb3VzZU92ZXJDaXJjbGUoKTtcclxuICAgICAgICAgICAgbGV0IG9iajogU2NlbmVPYmplY3QgPSB1aUNvbnRyb2xsZXIuZ2V0TW91c2VPdmVyT2JqKCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgeDogbnVtYmVyID0gdWlDb250cm9sbGVyLmdldE1vdXNlWCgpO1xyXG4gICAgICAgICAgICBsZXQgeTogbnVtYmVyID0gdWlDb250cm9sbGVyLmdldE1vdXNlWSgpO1xyXG4gICAgICAgICAgICBpZiAob2JqICE9IG51bGwgJiYgb2JqIGluc3RhbmNlb2YgQW5pbWF0ZWRTcHJpdGUpIHtcclxuICAgICAgICAgICAgICAgIGRldGFpbC50ZXh0ID0gYE1vdXNlWDogJHt4fSwgTW91c2VZOiAke3l9ICBwb3NpdGlvbjpgICsgb2JqLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqICE9IG51bGwgJiYgb2JqIGluc3RhbmNlb2YgR3JhZGllbnRDaXJjbGUpIHtcclxuICAgICAgICAgICAgICAgIGRldGFpbC50ZXh0ID0gYE1vdXNlWDogJHt4fSwgTW91c2VZOiAke3l9ICBwb3NpdGlvbmAgKyBvYmoudG9TdHJpbmcoKTs7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkZXRhaWwudGV4dCA9IFwiXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0ZXh0UmVuZGVyZXIuYWRkVGV4dFRvUmVuZGVyKGRldGFpbCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFRISVMgSVMgVEhFIEVOVFJZIFBPSU5UIElOVE8gT1VSIEFQUExJQ0FUSU9OLCBXRSBNQUtFXHJcbi8vIFRIRSBHYW1lIE9CSkVDVCBBTkQgSU5JVElBTElaRSBJVCBXSVRIIFRIRSBDQU5WQVNFU1xyXG5leHBvcnQgbGV0IGdhbWUgPSBuZXcgR2FtZSgpO1xyXG5nYW1lLmluaXQoXCJnYW1lX2NhbnZhc1wiLCBcInRleHRfY2FudmFzXCIpO1xyXG5cclxuLy8gQlVJTEQgVEhFIEdBTUUgU0NFTkVcclxubGV0IGRlbW8gPSBuZXcgQW5pbWF0ZWRTcHJpdGVEZW1vKCk7XHJcbmRlbW8uYnVpbGRUZXN0U2NlbmUoZ2FtZSwgZnVuY3Rpb24oKSB7XHJcbiAgICAvLyBBTkQgU1RBUlQgVEhFIEdBTUUgTE9PUFxyXG4gICAgZ2FtZS5zdGFydCgpO1xyXG59KTsiLCIvKlxyXG4gKiBHYW1lIGlzIHRoZSBmb2NhbCBwb2ludCBvZiB0aGUgYXBwbGljYXRpb24sIGl0IGhhcyA0IHN1YnN5c3RlbXMsXHJcbiAqIHRoZSByZXNvdXJjZSBtYW5hZ2VyLCB0aGUgc2NlbmUgZ3JhcGgsIHRoZSByZW5kZXJpbmcgc3lzdGVtLCBhbmRcclxuICogdGhlIFVJIGNvbnRyb2xsZXIuIEluIGFkZGl0aW9uIGl0IHNlcnZlcyBhcyB0aGUgZ2FtZSBsb29wLCBwcm92aWRpbmdcclxuICogYm90aCBhbiB1cGRhdGUgYW5kIGRyYXcgZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgb24gYSBzY2hlZHVsZS5cclxuICovXHJcbmltcG9ydCB7R2FtZUxvb3BUZW1wbGF0ZX0gZnJvbSAnLi9sb29wL0dhbWVMb29wVGVtcGxhdGUnXHJcbmltcG9ydCB7V2ViR0xHYW1lUmVuZGVyaW5nU3lzdGVtfSBmcm9tICcuL3JlbmRlcmluZy9XZWJHTEdhbWVSZW5kZXJpbmdTeXN0ZW0nXHJcbmltcG9ydCB7U2NlbmVHcmFwaH0gZnJvbSAnLi9zY2VuZS9TY2VuZUdyYXBoJ1xyXG5pbXBvcnQge0FuaW1hdGVkU3ByaXRlfSBmcm9tICcuL3NjZW5lL3Nwcml0ZS9BbmltYXRlZFNwcml0ZSdcclxuaW1wb3J0IHtSZXNvdXJjZU1hbmFnZXJ9IGZyb20gJy4vZmlsZXMvUmVzb3VyY2VNYW5hZ2VyJ1xyXG5pbXBvcnQge1VJQ29udHJvbGxlcn0gZnJvbSAnLi91aS9VSUNvbnRyb2xsZXInXHJcbmltcG9ydCB7IFNjZW5lT2JqZWN0IH0gZnJvbSAnLi9zY2VuZS9TY2VuZU9iamVjdCc7XHJcblxyXG5leHBvcnQgY2xhc3MgR2FtZSBleHRlbmRzIEdhbWVMb29wVGVtcGxhdGUge1xyXG4gICAgcHJpdmF0ZSByZXNvdXJjZU1hbmFnZXIgOiBSZXNvdXJjZU1hbmFnZXIgPSBuZXcgUmVzb3VyY2VNYW5hZ2VyKCk7XHJcbiAgICBwcml2YXRlIHNjZW5lR3JhcGggOiBTY2VuZUdyYXBoID0gbmV3IFNjZW5lR3JhcGgoKTtcclxuICAgIHByaXZhdGUgcmVuZGVyaW5nU3lzdGVtIDogV2ViR0xHYW1lUmVuZGVyaW5nU3lzdGVtID0gbmV3IFdlYkdMR2FtZVJlbmRlcmluZ1N5c3RlbSgpO1xyXG4gICAgcHJpdmF0ZSB1aUNvbnRyb2xsZXIgOiBVSUNvbnRyb2xsZXIgPSBuZXcgVUlDb250cm9sbGVyKCk7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFVJQ29udHJvbGxlcigpOiBVSUNvbnRyb2xsZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnVpQ29udHJvbGxlcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UmVuZGVyaW5nU3lzdGVtKCkgOiBXZWJHTEdhbWVSZW5kZXJpbmdTeXN0ZW0ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmluZ1N5c3RlbTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UmVzb3VyY2VNYW5hZ2VyKCkgOiBSZXNvdXJjZU1hbmFnZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlc291cmNlTWFuYWdlcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0U2NlbmVHcmFwaCgpIDogU2NlbmVHcmFwaCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NlbmVHcmFwaDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW5pdChnYW1lQ2FudmFzSWQgOiBzdHJpbmcsIHRleHRDYW52YXNJZCA6IHN0cmluZykgOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnJlbmRlcmluZ1N5c3RlbS5pbml0KGdhbWVDYW52YXNJZCwgdGV4dENhbnZhc0lkKTtcclxuICAgICAgICB0aGlzLnVpQ29udHJvbGxlci5pbml0KGdhbWVDYW52YXNJZCwgdGhpcy5zY2VuZUdyYXBoLCB0aGlzLmdldFJlbmRlcmluZ1N5c3RlbSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYmVnaW4oKSA6IHZvaWQge1xyXG4gICAgfVxyXG5cclxuICAgIC8qXHJcbiAgICAgKiBUaGlzIGRyYXdzIHRoZSBnYW1lLiBOb3RlIHRoYXQgd2UgYXJlIG5vdCBjdXJyZW50bHkgdXNpbmcgdGhlIFxyXG4gICAgICogaW50ZXJwb2xhdGlvbiB2YWx1ZSwgYnV0IGNvdWxkIG9uY2UgcGh5c2ljcyBpcyBpbnZvbHZlZC5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGRyYXcoaW50ZXJwb2xhdGlvblBlcmNlbnRhZ2UgOiBudW1iZXIpIDogdm9pZCB7XHJcbiAgICAgICAgLy8gR0VUIFRIRSBWSVNJQkxFIFNFVCBGUk9NIFRIRSBTQ0VORSBHUkFQSFxyXG4gICAgICAgIGxldCB2aXNpYmxlU3ByaXRlcyA6IEFycmF5PFNjZW5lT2JqZWN0PjtcclxuICAgICAgICB2aXNpYmxlU3ByaXRlcyA9IDxBcnJheTxTY2VuZU9iamVjdD4+dGhpcy5zY2VuZUdyYXBoLnNjb3BlKCk7XHJcblxyXG4gICAgICAgIC8vIFJFTkRFUiBUSEUgVklTSUJMRSBTRVQsIFdISUNIIFNIT1VMRCBBTEwgQkUgUkVOREVSQUJMRVxyXG4gICAgICAgIHRoaXMucmVuZGVyaW5nU3lzdGVtLnJlbmRlcih2aXNpYmxlU3ByaXRlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIHRoZSBzY2VuZS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIHVwZGF0ZShkZWx0YSA6IG51bWJlcikgOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNjZW5lR3JhcGgudXBkYXRlKGRlbHRhKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIHRoZSBGUFMgY291bnRlci5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGVuZChmcHMgOiBudW1iZXIsIHBhbmljIDogYm9vbGVhbikgOiB2b2lkIHtcclxuICAgICAgICBpZiAocGFuaWMpIHtcclxuICAgICAgICAgICAgdmFyIGRpc2NhcmRlZFRpbWUgPSBNYXRoLnJvdW5kKHRoaXMucmVzZXRGcmFtZURlbHRhKCkpO1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ01haW4gbG9vcCBwYW5pY2tlZCwgcHJvYmFibHkgYmVjYXVzZSB0aGUgYnJvd3NlciB0YWIgd2FzIHB1dCBpbiB0aGUgYmFja2dyb3VuZC4gRGlzY2FyZGluZyAnICsgZGlzY2FyZGVkVGltZSArICdtcycpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8qXHJcbiAqIFJlc291cmNlTWFuYWdlci5qc1xyXG4gKlxyXG4gKiBUaGlzIGNsYXNzIGlzIHJlc3BvbnNpYmxlIGZvciBtYW5hZ2luZyBhbGwgc2hhcmVkIHJlc291cmNlcy4gVGhpcyBtZWFucyB0aGluZ3NcclxuICogdGhhdCBtYXkgYmUgbmVlZGVkIGJ5IG11bHRpcGxlIGdhbWUgb2JqZWN0cy4gSW4gdGhpcyBhcHBsaWNhdGlvbiB0aGlzIG1lYW5zXHJcbiAqIHRleHR1cmVzIGZvciB0aGUgcHVycG9zZSBvZiBHUFUgcmVuZGVyaW5nIGFuZCBhbmltYXRlZCBzcHJpdGUgdHlwZXMuXHJcbiAqL1xyXG5pbXBvcnQge1Nwcml0ZVR5cGVEYXRhLCBBbmltYXRpb25TdGF0ZURhdGEsIEFuaW1hdGlvbkZyYW1lRGF0YX0gZnJvbSAnLi9TcHJpdGVUeXBlRGF0YSdcclxuaW1wb3J0IHtIYXNoVGFibGV9IGZyb20gJy4uL2RhdGEvSGFzaFRhYmxlJ1xyXG5pbXBvcnQge1dlYkdMR2FtZVJlbmRlcmluZ1N5c3RlbX0gZnJvbSAnLi4vcmVuZGVyaW5nL1dlYkdMR2FtZVJlbmRlcmluZ1N5c3RlbSdcclxuaW1wb3J0IHtXZWJHTEdhbWVUZXh0dXJlfSBmcm9tICcuLi9yZW5kZXJpbmcvV2ViR0xHYW1lVGV4dHVyZSdcclxuaW1wb3J0IHtBbmltYXRlZFNwcml0ZVR5cGV9IGZyb20gJy4uL3NjZW5lL3Nwcml0ZS9BbmltYXRlZFNwcml0ZVR5cGUnXHJcblxyXG5leHBvcnQgY2xhc3MgUmVzb3VyY2VNYW5hZ2VyIHtcclxuICAgIC8vIEdBTUUgVEVYVFVSRVMgXHJcbiAgICBwcml2YXRlIGdhbWVUZXh0dXJlcyA6IEFycmF5PFdlYkdMR2FtZVRleHR1cmU+ID0gbmV3IEFycmF5KCk7XHJcbiAgICBwcml2YXRlIGdhbWVUZXh0dXJlSWRzIDogSGFzaFRhYmxlPG51bWJlcj4gPSB7fTtcclxuICAgIHByaXZhdGUgbnVtVGV4dHVyZXNUb0xvYWQgOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIG51bVRleHR1cmVzTG9hZGVkIDogbnVtYmVyO1xyXG5cclxuICAgIC8vIEFOSU1BVEVEIFNQUklURSBUWVBFU1xyXG4gICAgcHJpdmF0ZSBnYW1lU3ByaXRlVHlwZXMgOiBBcnJheTxBbmltYXRlZFNwcml0ZVR5cGU+ID0gbmV3IEFycmF5KCk7XHJcbiAgICBwcml2YXRlIGdhbWVTcHJpdGVUeXBlSWRzIDogSGFzaFRhYmxlPG51bWJlcj4gPSB7fTtcclxuICAgIHByaXZhdGUgbnVtU3ByaXRlVHlwZXNUb0xvYWQgOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIG51bVNwcml0ZVR5cGVzTG9hZGVkIDogbnVtYmVyO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHt9XHJcblxyXG4gICAgLy8gQUNDRVNTT1IgTUVUSE9EU1xyXG5cclxuICAgIHB1YmxpYyBnZXRBbmltYXRlZFNwcml0ZVR5cGVCeUluZGV4KHR5cGVJbmRleCA6IG51bWJlcikgOiBBbmltYXRlZFNwcml0ZVR5cGUge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdhbWVTcHJpdGVUeXBlc1t0eXBlSW5kZXhdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRBbmltYXRlZFNwcml0ZVR5cGVCeUlkKHR5cGVJZCA6IHN0cmluZykgOiBBbmltYXRlZFNwcml0ZVR5cGUge1xyXG4gICAgICAgIGxldCB0eXBlSW5kZXggOiBudW1iZXIgPSB0aGlzLmdhbWVTcHJpdGVUeXBlSWRzW3R5cGVJZF07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QW5pbWF0ZWRTcHJpdGVUeXBlQnlJbmRleCh0eXBlSW5kZXgpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBBRERTIEEgTkVXIFNQUklURSBUWVBFIFxyXG4gICAgcHVibGljIGFkZEFuaW1hdGVkU3ByaXRlVHlwZSh0eXBlSWQgOiBudW1iZXIsIHNwcml0ZVR5cGUgOiBBbmltYXRlZFNwcml0ZVR5cGUpIDogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5nYW1lU3ByaXRlVHlwZXNbdHlwZUlkXSA9IHNwcml0ZVR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgLypcclxuICAgICAqIExvYWRzIGFsbCB0aGUgdGV4dHVyZXMgbGlzdGVkIGluIHRoZSB0ZXh0dXJlUGF0aHMgYXJndW1lbnQgYW5kIG9uY2VcclxuICAgICAqIHRoYXQgaXMgZG9uZSBpdCBjYWxscyB0aGUgY2FsbGJhY2sgZnVuY3Rpb24uXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBsb2FkVGV4dHVyZXMoICAgIHRleHR1cmVQYXRocyA6IEFycmF5PHN0cmluZz4sIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyaW5nU3lzdGVtIDogV2ViR0xHYW1lUmVuZGVyaW5nU3lzdGVtLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrIDogRnVuY3Rpb24pIDogdm9pZCB7XHJcbiAgICAgICAgLy8gVEhFTiBMT0FEIFRIRSBURVhUVVJFUyBXRSdMTCBCRSBVU0lOR1xyXG4gICAgICAgIHRoaXMubnVtVGV4dHVyZXNUb0xvYWQgPSB0ZXh0dXJlUGF0aHMubGVuZ3RoO1xyXG4gICAgICAgIHRoaXMubnVtVGV4dHVyZXNMb2FkZWQgPSAwO1xyXG4gICAgICAgIGxldCB0aGlzUmVzb3VyY2VNYW5hZ2VyID0gdGhpcztcclxuICAgICAgICBsZXQgc3RhcnROdW1UZXh0dXJlcyA9IHRoaXMuZ2FtZVRleHR1cmVzLmxlbmd0aDtcclxuICAgICAgICBmb3IgKGxldCBpIDogbnVtYmVyID0gMDsgaSA8IHRoaXMubnVtVGV4dHVyZXNUb0xvYWQ7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdGV4dHVyZVRvTG9hZCA6IFdlYkdMR2FtZVRleHR1cmUgPSBuZXcgV2ViR0xHYW1lVGV4dHVyZSgpO1xyXG4gICAgICAgICAgICBsZXQgdGV4dHVyZUlkID0gc3RhcnROdW1UZXh0dXJlcyArIGk7XHJcbiAgICAgICAgICAgIHRoaXNSZXNvdXJjZU1hbmFnZXIuZ2FtZVRleHR1cmVzW3RleHR1cmVJZF0gPSB0ZXh0dXJlVG9Mb2FkO1xyXG4gICAgICAgICAgICB0aGlzUmVzb3VyY2VNYW5hZ2VyLmdhbWVUZXh0dXJlSWRzW3RleHR1cmVQYXRoc1tpXV0gPSB0ZXh0dXJlSWQ7XHJcbiAgICAgICAgICAgIHRoaXNSZXNvdXJjZU1hbmFnZXIubG9hZEltYWdlKHRleHR1cmVQYXRoc1tpXSwgdGV4dHVyZUlkLCBmdW5jdGlvbihpZCA6IG51bWJlciwgaW1hZ2UgOiBIVE1MSW1hZ2VFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJpbmdTeXN0ZW0uaW5pdFdlYkdMVGV4dHVyZSh0ZXh0dXJlVG9Mb2FkLCBpZCwgaW1hZ2UsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNSZXNvdXJjZU1hbmFnZXIuY29tcGxldGVMb2FkaW5nVGV4dHVyZShjYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qXHJcbiAgICAgKiBMb2FkcyBhbGwgdGhlIHNwcml0ZSB0eXBlcyBsaXN0ZWQgaW4gdGhlIHNwcml0ZVR5cGVQYXRocyBhcmd1bWVudCBhbmQgb25jZVxyXG4gICAgICogdGhhdCBpcyBkb25lIGl0IGNhbGxzIHRoZSBjYWxsYmFjayBmdW5jdGlvbi5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGxvYWRTcHJpdGVUeXBlcyhzcHJpdGVUeXBlUGF0aHMgOiBBcnJheTxzdHJpbmc+LCBcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayA6IEZ1bmN0aW9uKSA6IHZvaWQge1xyXG4gICAgICAgIC8vIFRIRU4gTE9BRCBUSEUgVEVYVFVSRVMgV0UnTEwgQkUgVVNJTkdcclxuICAgICAgICB0aGlzLm51bVNwcml0ZVR5cGVzVG9Mb2FkID0gc3ByaXRlVHlwZVBhdGhzLmxlbmd0aDtcclxuICAgICAgICB0aGlzLm51bVNwcml0ZVR5cGVzTG9hZGVkID0gMDtcclxuICAgICAgICBsZXQgdGhpc1Jlc291cmNlTWFuYWdlciA9IHRoaXM7XHJcbiAgICAgICAgbGV0IHN0YXJ0TnVtU3ByaXRlVHlwZXMgPSB0aGlzLmdhbWVTcHJpdGVUeXBlcy5sZW5ndGg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA6IG51bWJlciA9IDA7IGkgPCB0aGlzLm51bVNwcml0ZVR5cGVzVG9Mb2FkOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHNwcml0ZVR5cGVJZCA9IHN0YXJ0TnVtU3ByaXRlVHlwZXMgKyBpO1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRTcHJpdGVUeXBlKHNwcml0ZVR5cGVQYXRoc1tpXSwgc3ByaXRlVHlwZUlkLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHRoaXNSZXNvdXJjZU1hbmFnZXIuY29tcGxldGVMb2FkaW5nU3ByaXRlVHlwZShjYWxsYmFjayk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBQUklWQVRFIEhFTFBFUiBNRVRIT0RTXHJcblxyXG4gICAgLy8gTE9BRFMgQSBORVcgSlNPTiBGSUxFIEFORCBVUE9OIENPTVBMRVRJT04gQ0FMTFMgVEhFIGNhbGxiYWNrIEZVTkNUSU9OXHJcbiAgICBwcml2YXRlIGxvYWRKc29uRmlsZSh0ZXN0RmlsZVBhdGggOiBzdHJpbmcsIGNhbGxiYWNrIDogRnVuY3Rpb24pIDogdm9pZCB7XHJcbiAgICAgICAgbGV0IHhvYmogOiBYTUxIdHRwUmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgIHhvYmoub3ZlcnJpZGVNaW1lVHlwZShcImFwcGxpY2F0aW9uL2pzb25cIik7XHJcbiAgICAgICAgeG9iai5vcGVuKCdHRVQnLCB0ZXN0RmlsZVBhdGgsIHRydWUpO1xyXG4gICAgICAgIHhvYmoub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoKHhvYmoucmVhZHlTdGF0ZSA9PSA0KSAmJiAoeG9iai5zdGF0dXMgPT0gMjAwKSkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soeG9iai5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB4b2JqLnNlbmQobnVsbCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ0hFQ0tTIFRPIFNFRSBJRiBBTEwgVEVYVFVSRSBMT0FESU5HIElTIENPTVBMRVRFLCBJRiBZRVMsIGNhbGxiYWNrIElTIElOVk9LRURcclxuICAgIHByaXZhdGUgY29tcGxldGVMb2FkaW5nVGV4dHVyZShjYWxsYmFjayA6IEZ1bmN0aW9uKSA6IHZvaWQge1xyXG4gICAgICAgIHRoaXMubnVtVGV4dHVyZXNMb2FkZWQrKztcclxuICAgICAgICBpZiAodGhpcy5udW1UZXh0dXJlc0xvYWRlZCA9PT0gdGhpcy5udW1UZXh0dXJlc1RvTG9hZCkge1xyXG4gICAgICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIExvYWRzIGFuIEltYWdlIGludG8gUkFNIGFuZCBvbmNlIHRoYXQgcHJvY2VzcyBpcyBjb21wbGV0ZSBpdFxyXG4gICAgICogY2FsbHMgdGhlIGNhbGxiYWNrIG1ldGhvZCBhcmd1bWVudCwgcHJlc3VtYWJseSB0byB0aGVuIGxvYWRcclxuICAgICAqIGl0IGludG8gR1BVIG1lbW9yeS5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBsb2FkSW1hZ2UocGF0aCA6IHN0cmluZywgaWQgOiBudW1iZXIsIGNhbGxiYWNrIDogRnVuY3Rpb24pIDogdm9pZCB7XHJcbiAgICAgICAgLy8gTUFLRSBUSEUgSU1BR0VcclxuICAgICAgICB2YXIgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuXHJcbiAgICAgICAgLy8gT05DRSBUSEUgSU1BR0UgTE9BRElORyBJUyBDT01QTEVURUQsIFRIRSBDQUxMQkFDSyBXSUxMIEdFVCBDQUxMRURcclxuICAgICAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7IFxyXG4gICAgICAgICAgICBjYWxsYmFjayhpZCwgaW1hZ2UpOyBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNUQVJUIElNQUdFIExPQURJTkdcclxuICAgICAgICBpbWFnZS5zcmMgPSBwYXRoO1xyXG4gICAgfVxyXG5cclxuICAgIC8qXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGxvYWRzIGEgc2luZ2xlIHNwcml0ZSB0eXBlIHJlc291cmNlIGZyb20gYSBKU09OIGZpbGUgYW5kIHVwb25cclxuICAgICAqIGNvbXBsZXRpb24gY2FsbHMgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGxvYWRTcHJpdGVUeXBlKGpzb25GaWxlUGF0aCA6IHN0cmluZywgc3ByaXRlVHlwZUlkIDogbnVtYmVyLCBjYWxsYmFjayA6IEZ1bmN0aW9uKSA6IHZvaWQge1xyXG4gICAgICAgIGxldCB0aGlzUmVzb3VyY2VNYW5hZ2VyIDogUmVzb3VyY2VNYW5hZ2VyID0gdGhpcztcclxuICAgICAgICB0aGlzLmxvYWRKc29uRmlsZShqc29uRmlsZVBhdGgsIGZ1bmN0aW9uKGpzb25UZXh0IDogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIGxldCBzcHJpdGVUeXBlIDogQW5pbWF0ZWRTcHJpdGVUeXBlID0gdGhpc1Jlc291cmNlTWFuYWdlci5sb2FkU3ByaXRlVHlwZURhdGEoanNvblRleHQpO1xyXG4gICAgICAgICAgICB0aGlzUmVzb3VyY2VNYW5hZ2VyLmdhbWVTcHJpdGVUeXBlc1tzcHJpdGVUeXBlSWRdID0gc3ByaXRlVHlwZTtcclxuICAgICAgICAgICAgdGhpc1Jlc291cmNlTWFuYWdlci5nYW1lU3ByaXRlVHlwZUlkc1tqc29uRmlsZVBhdGhdID0gc3ByaXRlVHlwZUlkO1xyXG4gICAgICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qXHJcbiAgICAgKiBUaGlzIGhlbHBlciBmdW5jdGlvbiBsb2FkcyBhbGwgdGhlIGpzb24gdGV4dCBpbnRvIGFuIEFuaW1hdGVkU3ByaXRlVHlwZVxyXG4gICAgICogb2JqZWN0IGFuZCByZXR1cm5zIGl0LlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGxvYWRTcHJpdGVUeXBlRGF0YSA9IChqc29uVGV4dCA6IHN0cmluZykgOiBBbmltYXRlZFNwcml0ZVR5cGUgPT4ge1xyXG4gICAgICAgIGxldCBqc29uRGF0YSA6IFNwcml0ZVR5cGVEYXRhID0gPFNwcml0ZVR5cGVEYXRhPkpTT04ucGFyc2UoanNvblRleHQpO1xyXG4gICAgICAgIGxldCB0ZXh0dXJlUGF0aCA9IGpzb25EYXRhLnNwcml0ZVNoZWV0SW1hZ2U7XHJcbiAgICAgICAgbGV0IHRleHR1cmVJZCA9IHRoaXMuZ2FtZVRleHR1cmVJZHNbdGV4dHVyZVBhdGhdO1xyXG4gICAgICAgIGxldCB0ZXh0dXJlIDogV2ViR0xHYW1lVGV4dHVyZSA9IHRoaXMuZ2FtZVRleHR1cmVzW3RleHR1cmVJZF07XHJcbiAgICAgICAgbGV0IHNwcml0ZVdpZHRoIDogbnVtYmVyID0ganNvbkRhdGEuc3ByaXRlV2lkdGg7XHJcbiAgICAgICAgbGV0IHNwcml0ZUhlaWdodCA6IG51bWJlciA9IGpzb25EYXRhLnNwcml0ZUhlaWdodDtcclxuICAgICAgICBsZXQgYW5pbWF0ZWRTcHJpdGVUeXBlID0gbmV3IEFuaW1hdGVkU3ByaXRlVHlwZSh0ZXh0dXJlLCBzcHJpdGVXaWR0aCwgc3ByaXRlSGVpZ2h0KTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGpzb25EYXRhLmFuaW1hdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGFuaW1hdGlvbiA9IDxBbmltYXRpb25TdGF0ZURhdGE+anNvbkRhdGEuYW5pbWF0aW9uc1tpXTtcclxuICAgICAgICAgICAgYW5pbWF0ZWRTcHJpdGVUeXBlLmFkZEFuaW1hdGlvbihhbmltYXRpb24ubmFtZSk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgYW5pbWF0aW9uLmZyYW1lcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZyYW1lID0gYW5pbWF0aW9uLmZyYW1lc1tqXTtcclxuICAgICAgICAgICAgICAgIGFuaW1hdGVkU3ByaXRlVHlwZS5hZGRBbmltYXRpb25GcmFtZShhbmltYXRpb24ubmFtZSwgZnJhbWUuaW5kZXgsIGZyYW1lLmR1cmF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYW5pbWF0ZWRTcHJpdGVUeXBlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENIRUNLUyBUTyBTRUUgSUYgQUxMIFNQUklURSBUWVBFIExPQURJTkcgSVMgQ09NUExFVEUsIElGIFlFUywgY2FsbGJhY2sgSVMgSU5WT0tFRFxyXG4gICAgcHJpdmF0ZSBjb21wbGV0ZUxvYWRpbmdTcHJpdGVUeXBlKGNhbGxiYWNrIDogRnVuY3Rpb24pIDogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5udW1TcHJpdGVUeXBlc0xvYWRlZCsrO1xyXG4gICAgICAgIGlmICh0aGlzLm51bVNwcml0ZVR5cGVzTG9hZGVkID09PSB0aGlzLm51bVNwcml0ZVR5cGVzVG9Mb2FkKSB7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSAgICBcclxufSIsImV4cG9ydCBhYnN0cmFjdCBjbGFzcyBHYW1lTG9vcFRlbXBsYXRlIHtcclxuICAgIC8vIEFMTCBJTlNUQU5DRSBWQVJJQUJMRVMgV0lMTCBCRSBJTklUSUFMSVpFRCBWSUEgVEhFIENPTlNUUlVDVE9SXHJcbiAgICBwcml2YXRlIGZwczogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBzaW11bGF0aW9uVGltZXN0ZXA6IG51bWJlcjtcclxuICAgIHByaXZhdGUgZnJhbWVEZWx0YTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBsYXN0RnJhbWVUaW1lTXM6IG51bWJlcjtcclxuICAgIHByaXZhdGUgZnBzQWxwaGE6IG51bWJlcjtcclxuICAgIHByaXZhdGUgZnBzVXBkYXRlSW50ZXJ2YWw6IG51bWJlcjtcclxuICAgIHByaXZhdGUgbGFzdEZwc1VwZGF0ZTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBmcmFtZXNTaW5jZUxhc3RGcHNVcGRhdGU6IG51bWJlcjtcclxuICAgIHByaXZhdGUgbnVtVXBkYXRlU3RlcHM6IG51bWJlcjtcclxuICAgIHByaXZhdGUgbWluRnJhbWVEZWxheTogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBydW5uaW5nOiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSBzdGFydGVkOiBib29sZWFuO1xyXG4gICAgcHJpdmF0ZSBwYW5pYzogYm9vbGVhbjtcclxuICAgIHByaXZhdGUgcmFmOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLy8gQW4gZXhwb25lbnRpYWwgbW92aW5nIGF2ZXJhZ2Ugb2YgdGhlIGZyYW1lcyBwZXIgc2Vjb25kLlxyXG4gICAgICAgIHRoaXMuZnBzID0gNjA7XHJcblxyXG4gICAgICAgIC8vIFRoZSBhbW91bnQgb2YgdGltZSAoaW4gbWlsbGlzZWNvbmRzKSB0byBzaW11bGF0ZSBlYWNoIHRpbWUgdXBkYXRlKCkgcnVucy5cclxuICAgICAgICAvLyBTZWUgYE1haW5Mb29wLnNldFNpbXVsYXRpb25UaW1lc3RlcCgpYCBmb3IgZGV0YWlscy5cclxuICAgICAgICB0aGlzLnNpbXVsYXRpb25UaW1lc3RlcCA9IDEwMDAgLyB0aGlzLmZwcztcclxuXHJcbiAgICAgICAgLy8gVGhlIGN1bXVsYXRpdmUgYW1vdW50IG9mIGluLWFwcCB0aW1lIHRoYXQgaGFzbid0IGJlZW4gc2ltdWxhdGVkIHlldC5cclxuICAgICAgICAvLyBTZWUgdGhlIGNvbW1lbnRzIGluc2lkZSBhbmltYXRlKCkgZm9yIGRldGFpbHMuXHJcbiAgICAgICAgdGhpcy5mcmFtZURlbHRhID0gMDtcclxuXHJcbiAgICAgICAgLy8gVGhlIHRpbWVzdGFtcCBpbiBtaWxsaXNlY29uZHMgb2YgdGhlIGxhc3QgdGltZSB0aGUgbWFpbiBsb29wIHdhcyBydW4uXHJcbiAgICAgICAgLy8gVXNlZCB0byBjb21wdXRlIHRoZSB0aW1lIGVsYXBzZWQgYmV0d2VlbiBmcmFtZXMuXHJcbiAgICAgICAgdGhpcy5sYXN0RnJhbWVUaW1lTXMgPSAwO1xyXG5cclxuICAgICAgICAvLyBBIGZhY3RvciB0aGF0IGFmZmVjdHMgaG93IGhlYXZpbHkgdG8gd2VpZ2h0IG1vcmUgcmVjZW50IHNlY29uZHMnXHJcbiAgICAgICAgLy8gcGVyZm9ybWFuY2Ugd2hlbiBjYWxjdWxhdGluZyB0aGUgYXZlcmFnZSBmcmFtZXMgcGVyIHNlY29uZC4gVmFsaWQgdmFsdWVzXHJcbiAgICAgICAgLy8gcmFuZ2UgZnJvbSB6ZXJvIHRvIG9uZSBpbmNsdXNpdmUuIEhpZ2hlciB2YWx1ZXMgcmVzdWx0IGluIHdlaWdodGluZyBtb3JlXHJcbiAgICAgICAgLy8gcmVjZW50IHNlY29uZHMgbW9yZSBoZWF2aWx5LlxyXG4gICAgICAgIHRoaXMuZnBzQWxwaGEgPSAwLjk7XHJcblxyXG4gICAgICAgIC8vIFRoZSBtaW5pbXVtIGR1cmF0aW9uIGJldHdlZW4gdXBkYXRlcyB0byB0aGUgZnJhbWVzLXBlci1zZWNvbmQgZXN0aW1hdGUuXHJcbiAgICAgICAgLy8gSGlnaGVyIHZhbHVlcyBpbmNyZWFzZSBhY2N1cmFjeSwgYnV0IHJlc3VsdCBpbiBzbG93ZXIgdXBkYXRlcy5cclxuICAgICAgICB0aGlzLmZwc1VwZGF0ZUludGVydmFsID0gMTAwMDtcclxuXHJcbiAgICAgICAgLy8gVGhlIHRpbWVzdGFtcCAoaW4gbWlsbGlzZWNvbmRzKSBvZiB0aGUgbGFzdCB0aW1lIHRoZSBgZnBzYCBtb3ZpbmdcclxuICAgICAgICAvLyBhdmVyYWdlIHdhcyB1cGRhdGVkLlxyXG4gICAgICAgIHRoaXMubGFzdEZwc1VwZGF0ZSA9IDA7XHJcblxyXG4gICAgICAgIC8vIFRoZSBudW1iZXIgb2YgZnJhbWVzIGRlbGl2ZXJlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBgZnBzYCBtb3ZpbmdcclxuICAgICAgICAvLyBhdmVyYWdlIHdhcyB1cGRhdGVkIChpLmUuIHNpbmNlIGBsYXN0RnBzVXBkYXRlYCkuXHJcbiAgICAgICAgdGhpcy5mcmFtZXNTaW5jZUxhc3RGcHNVcGRhdGUgPSAwO1xyXG5cclxuICAgICAgICAvLyBUaGUgbnVtYmVyIG9mIHRpbWVzIHVwZGF0ZSgpIGlzIGNhbGxlZCBpbiBhIGdpdmVuIGZyYW1lLiBUaGlzIGlzIG9ubHlcclxuICAgICAgICAvLyByZWxldmFudCBpbnNpZGUgb2YgYW5pbWF0ZSgpLCBidXQgYSByZWZlcmVuY2UgaXMgaGVsZCBleHRlcm5hbGx5IHNvIHRoYXRcclxuICAgICAgICAvLyB0aGlzIHZhcmlhYmxlIGlzIG5vdCBtYXJrZWQgZm9yIGdhcmJhZ2UgY29sbGVjdGlvbiBldmVyeSB0aW1lIHRoZSBtYWluXHJcbiAgICAgICAgLy8gbG9vcCBydW5zLlxyXG4gICAgICAgIHRoaXMubnVtVXBkYXRlU3RlcHMgPSAwO1xyXG5cclxuICAgICAgICAvLyBUaGUgbWluaW11bSBhbW91bnQgb2YgdGltZSBpbiBtaWxsaXNlY29uZHMgdGhhdCBtdXN0IHBhc3Mgc2luY2UgdGhlIGxhc3RcclxuICAgICAgICAvLyBmcmFtZSB3YXMgZXhlY3V0ZWQgYmVmb3JlIGFub3RoZXIgZnJhbWUgY2FuIGJlIGV4ZWN1dGVkLiBUaGVcclxuICAgICAgICAvLyBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIGNhcHMgdGhlIEZQUyAodGhlIGRlZmF1bHQgb2YgemVybyBtZWFucyB0aGVyZSBpc1xyXG4gICAgICAgIC8vIG5vIGNhcCkuXHJcbiAgICAgICAgdGhpcy5taW5GcmFtZURlbGF5ID0gMDtcclxuXHJcbiAgICAgICAgLy8gV2hldGhlciB0aGUgbWFpbiBsb29wIGlzIHJ1bm5pbmcuXHJcbiAgICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIGB0cnVlYCBpZiBgTWFpbkxvb3Auc3RhcnQoKWAgaGFzIGJlZW4gY2FsbGVkIGFuZCB0aGUgbW9zdCByZWNlbnQgdGltZSBpdFxyXG4gICAgICAgIC8vIHdhcyBjYWxsZWQgaGFzIG5vdCBiZWVuIGZvbGxvd2VkIGJ5IGEgY2FsbCB0byBgTWFpbkxvb3Auc3RvcCgpYC4gVGhpcyBpc1xyXG4gICAgICAgIC8vIGRpZmZlcmVudCB0aGFuIGBydW5uaW5nYCBiZWNhdXNlIHRoZXJlIGlzIGEgZGVsYXkgb2YgYSBmZXcgbWlsbGlzZWNvbmRzXHJcbiAgICAgICAgLy8gYWZ0ZXIgYE1haW5Mb29wLnN0YXJ0KClgIGlzIGNhbGxlZCBiZWZvcmUgdGhlIGFwcGxpY2F0aW9uIGlzIGNvbnNpZGVyZWRcclxuICAgICAgICAvLyBcInJ1bm5pbmcuXCIgVGhpcyBkZWxheSBpcyBkdWUgdG8gd2FpdGluZyBmb3IgdGhlIG5leHQgZnJhbWUuXHJcbiAgICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIFdoZXRoZXIgdGhlIHNpbXVsYXRpb24gaGFzIGZhbGxlbiB0b28gZmFyIGJlaGluZCByZWFsIHRpbWUuXHJcbiAgICAgICAgLy8gU3BlY2lmaWNhbGx5LCBgcGFuaWNgIHdpbGwgYmUgc2V0IHRvIGB0cnVlYCBpZiB0b28gbWFueSB1cGRhdGVzIG9jY3VyIGluXHJcbiAgICAgICAgLy8gb25lIGZyYW1lLiBUaGlzIGlzIG9ubHkgcmVsZXZhbnQgaW5zaWRlIG9mIGFuaW1hdGUoKSwgYnV0IGEgcmVmZXJlbmNlIGlzXHJcbiAgICAgICAgLy8gaGVsZCBleHRlcm5hbGx5IHNvIHRoYXQgdGhpcyB2YXJpYWJsZSBpcyBub3QgbWFya2VkIGZvciBnYXJiYWdlXHJcbiAgICAgICAgLy8gY29sbGVjdGlvbiBldmVyeSB0aW1lIHRoZSBtYWluIGxvb3AgcnVucy5cclxuICAgICAgICB0aGlzLnBhbmljID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIGhvdyBtYW55IG1pbGxpc2Vjb25kcyBzaG91bGQgYmUgc2ltdWxhdGVkIGJ5IGV2ZXJ5IHJ1biBvZiB1cGRhdGUoKS5cclxuICAgICAqXHJcbiAgICAgKiBTZWUgYE1haW5Mb29wLnNldFNpbXVsYXRpb25UaW1lc3RlcCgpYCBmb3IgZGV0YWlscyBvbiB0aGlzIHZhbHVlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge051bWJlcn1cclxuICAgICAqICAgVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdGhhdCBzaG91bGQgYmUgc2ltdWxhdGVkIGJ5IGV2ZXJ5IHJ1biBvZlxyXG4gICAgICogICB7QGxpbmsgI3NldFVwZGF0ZSB1cGRhdGV9KCkuXHJcbiAgICAgKi9cclxuICAgIGdldFNpbXVsYXRpb25UaW1lc3RlcCgpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNpbXVsYXRpb25UaW1lc3RlcDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgaG93IG1hbnkgbWlsbGlzZWNvbmRzIHNob3VsZCBiZSBzaW11bGF0ZWQgYnkgZXZlcnkgcnVuIG9mIHVwZGF0ZSgpLlxyXG4gICAgICpcclxuICAgICAqIFRoZSBwZXJjZWl2ZWQgZnJhbWVzIHBlciBzZWNvbmQgKEZQUykgaXMgZWZmZWN0aXZlbHkgY2FwcGVkIGF0IHRoZVxyXG4gICAgICogbXVsdGlwbGljYXRpdmUgaW52ZXJzZSBvZiB0aGUgc2ltdWxhdGlvbiB0aW1lc3RlcC4gVGhhdCBpcywgaWYgdGhlXHJcbiAgICAgKiB0aW1lc3RlcCBpcyAxMDAwIC8gNjAgKHdoaWNoIGlzIHRoZSBkZWZhdWx0KSwgdGhlbiB0aGUgbWF4aW11bSBwZXJjZWl2ZWRcclxuICAgICAqIEZQUyBpcyBlZmZlY3RpdmVseSA2MC4gRGVjcmVhc2luZyB0aGUgdGltZXN0ZXAgaW5jcmVhc2VzIHRoZSBtYXhpbXVtXHJcbiAgICAgKiBwZXJjZWl2ZWQgRlBTIGF0IHRoZSBjb3N0IG9mIHJ1bm5pbmcge0BsaW5rICNzZXRVcGRhdGUgdXBkYXRlfSgpIG1vcmVcclxuICAgICAqIHRpbWVzIHBlciBmcmFtZSBhdCBsb3dlciBmcmFtZSByYXRlcy4gU2luY2UgcnVubmluZyB1cGRhdGUoKSBtb3JlIHRpbWVzXHJcbiAgICAgKiB0YWtlcyBtb3JlIHRpbWUgdG8gcHJvY2VzcywgdGhpcyBjYW4gYWN0dWFsbHkgc2xvdyBkb3duIHRoZSBmcmFtZSByYXRlLlxyXG4gICAgICogQWRkaXRpb25hbGx5LCBpZiB0aGUgYW1vdW50IG9mIHRpbWUgaXQgdGFrZXMgdG8gcnVuIHVwZGF0ZSgpIGV4Y2VlZHMgb3JcclxuICAgICAqIHZlcnkgbmVhcmx5IGV4Y2VlZHMgdGhlIHRpbWVzdGVwLCB0aGUgYXBwbGljYXRpb24gd2lsbCBmcmVlemUgYW5kIGNyYXNoXHJcbiAgICAgKiBpbiBhIHNwaXJhbCBvZiBkZWF0aCAodW5sZXNzIGl0IGlzIHJlc2N1ZWQ7IHNlZSBgTWFpbkxvb3Auc2V0RW5kKClgIGZvclxyXG4gICAgICogYW4gZXhwbGFuYXRpb24gb2Ygd2hhdCBjYW4gYmUgZG9uZSBpZiBhIHNwaXJhbCBvZiBkZWF0aCBpcyBvY2N1cnJpbmcpLlxyXG4gICAgICpcclxuICAgICAqIFRoZSBleGNlcHRpb24gdG8gdGhpcyBpcyB0aGF0IGludGVycG9sYXRpbmcgYmV0d2VlbiB1cGRhdGVzIGZvciBlYWNoXHJcbiAgICAgKiByZW5kZXIgY2FuIGluY3JlYXNlIHRoZSBwZXJjZWl2ZWQgZnJhbWUgcmF0ZSBhbmQgcmVkdWNlIHZpc3VhbFxyXG4gICAgICogc3R1dHRlcmluZy4gU2VlIGBNYWluTG9vcC5zZXREcmF3KClgIGZvciBhbiBleHBsYW5hdGlvbiBvZiBob3cgdG8gZG9cclxuICAgICAqIHRoaXMuXHJcbiAgICAgKlxyXG4gICAgICogSWYgeW91IGFyZSBjb25zaWRlcmluZyBkZWNyZWFzaW5nIHRoZSBzaW11bGF0aW9uIHRpbWVzdGVwIGluIG9yZGVyIHRvXHJcbiAgICAgKiByYWlzZSB0aGUgbWF4aW11bSBwZXJjZWl2ZWQgRlBTLCBrZWVwIGluIG1pbmQgdGhhdCBtb3N0IG1vbml0b3JzIGNhbid0XHJcbiAgICAgKiBkaXNwbGF5IG1vcmUgdGhhbiA2MCBGUFMuIFdoZXRoZXIgaHVtYW5zIGNhbiB0ZWxsIHRoZSBkaWZmZXJlbmNlIGFtb25nXHJcbiAgICAgKiBoaWdoIGZyYW1lIHJhdGVzIGRlcGVuZHMgb24gdGhlIGFwcGxpY2F0aW9uLCBidXQgZm9yIHJlZmVyZW5jZSwgZmlsbSBpc1xyXG4gICAgICogdXN1YWxseSBkaXNwbGF5ZWQgYXQgMjQgRlBTLCBvdGhlciB2aWRlb3MgYXQgMzAgRlBTLCBtb3N0IGdhbWVzIGFyZVxyXG4gICAgICogYWNjZXB0YWJsZSBhYm92ZSAzMCBGUFMsIGFuZCB2aXJ0dWFsIHJlYWxpdHkgbWlnaHQgcmVxdWlyZSA3NSBGUFMgdG9cclxuICAgICAqIGZlZWwgbmF0dXJhbC4gU29tZSBnYW1pbmcgbW9uaXRvcnMgZ28gdXAgdG8gMTQ0IEZQUy4gU2V0dGluZyB0aGVcclxuICAgICAqIHRpbWVzdGVwIGJlbG93IDEwMDAgLyAxNDQgaXMgZGlzY291cmFnZWQgYW5kIGJlbG93IDEwMDAgLyAyNDAgaXNcclxuICAgICAqIHN0cm9uZ2x5IGRpc2NvdXJhZ2VkLiBUaGUgZGVmYXVsdCBvZiAxMDAwIC8gNjAgaXMgZ29vZCBpbiBtb3N0IGNhc2VzLlxyXG4gICAgICpcclxuICAgICAqIFRoZSBzaW11bGF0aW9uIHRpbWVzdGVwIHNob3VsZCB0eXBpY2FsbHkgb25seSBiZSBjaGFuZ2VkIGF0XHJcbiAgICAgKiBkZXRlcm1pbmlzdGljIHRpbWVzIChlLmcuIGJlZm9yZSB0aGUgbWFpbiBsb29wIHN0YXJ0cyBmb3IgdGhlIGZpcnN0XHJcbiAgICAgKiB0aW1lLCBhbmQgbm90IGluIHJlc3BvbnNlIHRvIHVzZXIgaW5wdXQgb3Igc2xvdyBmcmFtZSByYXRlcykgdG8gYXZvaWRcclxuICAgICAqIGludHJvZHVjaW5nIG5vbi1kZXRlcm1pbmlzdGljIGJlaGF2aW9yLiBUaGUgdXBkYXRlIHRpbWVzdGVwIHNob3VsZCBiZVxyXG4gICAgICogdGhlIHNhbWUgZm9yIGFsbCBwbGF5ZXJzL3VzZXJzIGluIG11bHRpcGxheWVyL211bHRpLXVzZXIgYXBwbGljYXRpb25zLlxyXG4gICAgICpcclxuICAgICAqIFNlZSBhbHNvIGBNYWluTG9vcC5nZXRTaW11bGF0aW9uVGltZXN0ZXAoKWAuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVzdGVwXHJcbiAgICAgKiAgIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgc2hvdWxkIGJlIHNpbXVsYXRlZCBieSBldmVyeSBydW4gb2ZcclxuICAgICAqICAge0BsaW5rICNzZXRVcGRhdGUgdXBkYXRlfSgpLlxyXG4gICAgICovXHJcbiAgICBzZXRTaW11bGF0aW9uVGltZXN0ZXAodGltZXN0ZXA6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2ltdWxhdGlvblRpbWVzdGVwID0gdGltZXN0ZXA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBleHBvbmVudGlhbCBtb3ZpbmcgYXZlcmFnZSBvZiB0aGUgZnJhbWVzIHBlciBzZWNvbmQuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7TnVtYmVyfVxyXG4gICAgICogICBUaGUgZXhwb25lbnRpYWwgbW92aW5nIGF2ZXJhZ2Ugb2YgdGhlIGZyYW1lcyBwZXIgc2Vjb25kLlxyXG4gICAgICovXHJcbiAgICBnZXRGUFMoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mcHM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIHRoZSBtYXhpbXVtIGZyYW1lIHJhdGUuXHJcbiAgICAgKlxyXG4gICAgICogT3RoZXIgZmFjdG9ycyBhbHNvIGxpbWl0IHRoZSBGUFM7IHNlZSBgTWFpbkxvb3Auc2V0U2ltdWxhdGlvblRpbWVzdGVwYFxyXG4gICAgICogZm9yIGRldGFpbHMuXHJcbiAgICAgKlxyXG4gICAgICogU2VlIGFsc28gYE1haW5Mb29wLnNldE1heEFsbG93ZWRGUFMoKWAuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7TnVtYmVyfVxyXG4gICAgICogICBUaGUgbWF4aW11bSBudW1iZXIgb2YgZnJhbWVzIHBlciBzZWNvbmQgYWxsb3dlZC5cclxuICAgICAqL1xyXG4gICAgZ2V0TWF4QWxsb3dlZEZQUygpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiAxMDAwIC8gdGhpcy5taW5GcmFtZURlbGF5O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyBhIG1heGltdW0gZnJhbWUgcmF0ZS5cclxuICAgICAqXHJcbiAgICAgKiBTZWUgYWxzbyBgTWFpbkxvb3AuZ2V0TWF4QWxsb3dlZEZQUygpYC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW2Zwcz1JbmZpbml0eV1cclxuICAgICAqICAgVGhlIG1heGltdW0gbnVtYmVyIG9mIGZyYW1lcyBwZXIgc2Vjb25kIHRvIGV4ZWN1dGUuIElmIEluZmluaXR5IG9yIG5vdFxyXG4gICAgICogICBwYXNzZWQsIHRoZXJlIHdpbGwgYmUgbm8gRlBTIGNhcCAoYWx0aG91Z2ggb3RoZXIgZmFjdG9ycyBkbyBsaW1pdCB0aGVcclxuICAgICAqICAgRlBTOyBzZWUgYE1haW5Mb29wLnNldFNpbXVsYXRpb25UaW1lc3RlcGAgZm9yIGRldGFpbHMpLiBJZiB6ZXJvLCB0aGlzXHJcbiAgICAgKiAgIHdpbGwgc3RvcCB0aGUgbG9vcCwgYW5kIHdoZW4gdGhlIGxvb3AgaXMgbmV4dCBzdGFydGVkLCBpdCB3aWxsIHJldHVyblxyXG4gICAgICogICB0byB0aGUgcHJldmlvdXMgbWF4aW11bSBmcmFtZSByYXRlLiBQYXNzaW5nIG5lZ2F0aXZlIHZhbHVlcyB3aWxsIHN0YWxsXHJcbiAgICAgKiAgIHRoZSBsb29wIHVudGlsIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIGFnYWluIHdpdGggYSBwb3NpdGl2ZSB2YWx1ZS5cclxuICAgICAqXHJcbiAgICAgKiBAY2hhaW5hYmxlXHJcbiAgICAgKi9cclxuICAgIHNldE1heEFsbG93ZWRGUFMoZnBzOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBpZiAodHlwZW9mIGZwcyA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgZnBzID0gSW5maW5pdHk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChmcHMgPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zdG9wKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBEaXZpZGluZyBieSBJbmZpbml0eSByZXR1cm5zIHplcm8uXHJcbiAgICAgICAgICAgIHRoaXMubWluRnJhbWVEZWxheSA9IDEwMDAgLyBmcHM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVzZXQgdGhlIGFtb3VudCBvZiB0aW1lIHRoYXQgaGFzIG5vdCB5ZXQgYmVlbiBzaW11bGF0ZWQgdG8gemVyby5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIGludHJvZHVjZXMgbm9uLWRldGVybWluaXN0aWMgYmVoYXZpb3IgaWYgY2FsbGVkIGFmdGVyIHRoZVxyXG4gICAgICogYXBwbGljYXRpb24gaGFzIHN0YXJ0ZWQgcnVubmluZyAodW5sZXNzIGl0IGlzIGJlaW5nIHJlc2V0LCBpbiB3aGljaCBjYXNlXHJcbiAgICAgKiBpdCBkb2Vzbid0IG1hdHRlcikuIEhvd2V2ZXIsIHRoaXMgY2FuIGJlIHVzZWZ1bCBpbiBjYXNlcyB3aGVyZSB0aGVcclxuICAgICAqIGFtb3VudCBvZiB0aW1lIHRoYXQgaGFzIG5vdCB5ZXQgYmVlbiBzaW11bGF0ZWQgaGFzIGdyb3duIHZlcnkgbGFyZ2VcclxuICAgICAqIChmb3IgZXhhbXBsZSwgd2hlbiB0aGUgYXBwbGljYXRpb24ncyB0YWIgZ2V0cyBwdXQgaW4gdGhlIGJhY2tncm91bmQgYW5kXHJcbiAgICAgKiB0aGUgYnJvd3NlciB0aHJvdHRsZXMgdGhlIHRpbWVycyBhcyBhIHJlc3VsdCkuIEluIGFwcGxpY2F0aW9ucyB3aXRoXHJcbiAgICAgKiBsb2Nrc3RlcCB0aGUgcGxheWVyIHdvdWxkIGdldCBkcm9wcGVkLCBidXQgaW4gb3RoZXIgbmV0d29ya2VkXHJcbiAgICAgKiBhcHBsaWNhdGlvbnMgaXQgbWF5IGJlIG5lY2Vzc2FyeSB0byBzbmFwIG9yIGVhc2UgdGhlIHBsYXllci91c2VyIHRvIHRoZVxyXG4gICAgICogYXV0aG9yaXRhdGl2ZSBzdGF0ZSBhbmQgZGlzY2FyZCBwZW5kaW5nIHVwZGF0ZXMgaW4gdGhlIHByb2Nlc3MuIEluXHJcbiAgICAgKiBub24tbmV0d29ya2VkIGFwcGxpY2F0aW9ucyBpdCBtYXkgYWxzbyBiZSBhY2NlcHRhYmxlIHRvIHNpbXBseSByZXN1bWVcclxuICAgICAqIHRoZSBhcHBsaWNhdGlvbiB3aGVyZSBpdCBsYXN0IGxlZnQgb2ZmIGFuZCBpZ25vcmUgdGhlIGFjY3VtdWxhdGVkXHJcbiAgICAgKiB1bnNpbXVsYXRlZCB0aW1lLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge051bWJlcn1cclxuICAgICAqICAgVGhlIGN1bXVsYXRpdmUgYW1vdW50IG9mIGVsYXBzZWQgdGltZSBpbiBtaWxsaXNlY29uZHMgdGhhdCBoYXMgbm90IHlldFxyXG4gICAgICogICBiZWVuIHNpbXVsYXRlZCwgYnV0IGlzIGJlaW5nIGRpc2NhcmRlZCBhcyBhIHJlc3VsdCBvZiBjYWxsaW5nIHRoaXNcclxuICAgICAqICAgZnVuY3Rpb24uXHJcbiAgICAgKi9cclxuICAgIHJlc2V0RnJhbWVEZWx0YSgpIDogbnVtYmVyIHtcclxuICAgICAgICB2YXIgb2xkRnJhbWVEZWx0YSA9IHRoaXMuZnJhbWVEZWx0YTtcclxuICAgICAgICB0aGlzLmZyYW1lRGVsdGEgPSAwO1xyXG4gICAgICAgIHJldHVybiBvbGRGcmFtZURlbHRhO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RhcnRzIHRoZSBtYWluIGxvb3AuXHJcbiAgICAgKlxyXG4gICAgICogTm90ZSB0aGF0IHRoZSBhcHBsaWNhdGlvbiBpcyBub3QgY29uc2lkZXJlZCBcInJ1bm5pbmdcIiBpbW1lZGlhdGVseSBhZnRlclxyXG4gICAgICogdGhpcyBmdW5jdGlvbiByZXR1cm5zOyByYXRoZXIsIGl0IGlzIGNvbnNpZGVyZWQgXCJydW5uaW5nXCIgYWZ0ZXIgdGhlXHJcbiAgICAgKiBhcHBsaWNhdGlvbiBkcmF3cyBpdHMgZmlyc3QgZnJhbWUuIFRoZSBkaXN0aW5jdGlvbiBpcyB0aGF0IGV2ZW50XHJcbiAgICAgKiBoYW5kbGVycyBzaG91bGQgcmVtYWluIHBhdXNlZCB1bnRpbCB0aGUgYXBwbGljYXRpb24gaXMgcnVubmluZywgZXZlblxyXG4gICAgICogYWZ0ZXIgYE1haW5Mb29wLnN0YXJ0KClgIGlzIGNhbGxlZC4gQ2hlY2sgYE1haW5Mb29wLmlzUnVubmluZygpYCBmb3IgdGhlXHJcbiAgICAgKiBjdXJyZW50IHN0YXR1cy4gVG8gYWN0IGFmdGVyIHRoZSBhcHBsaWNhdGlvbiBzdGFydHMsIHJlZ2lzdGVyIGEgY2FsbGJhY2tcclxuICAgICAqIHdpdGggcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCkgYWZ0ZXIgY2FsbGluZyB0aGlzIGZ1bmN0aW9uIGFuZCBleGVjdXRlIHRoZVxyXG4gICAgICogYWN0aW9uIGluIHRoYXQgY2FsbGJhY2suIEl0IGlzIHNhZmUgdG8gY2FsbCBgTWFpbkxvb3Auc3RhcnQoKWAgbXVsdGlwbGVcclxuICAgICAqIHRpbWVzIGV2ZW4gYmVmb3JlIHRoZSBhcHBsaWNhdGlvbiBzdGFydHMgcnVubmluZyBhbmQgd2l0aG91dCBjYWxsaW5nXHJcbiAgICAgKiBgTWFpbkxvb3Auc3RvcCgpYCBpbiBiZXR3ZWVuLCBhbHRob3VnaCB0aGVyZSBpcyBubyByZWFzb24gdG8gZG8gdGhpcztcclxuICAgICAqIHRoZSBtYWluIGxvb3Agd2lsbCBvbmx5IHN0YXJ0IGlmIGl0IGlzIG5vdCBhbHJlYWR5IHN0YXJ0ZWQuXHJcbiAgICAgKlxyXG4gICAgICogU2VlIGFsc28gYE1haW5Mb29wLnN0b3AoKWAuXHJcbiAgICAgKi9cclxuICAgIHN0YXJ0KCk6IHZvaWQge1xyXG4gICAgICAgIGlmICghdGhpcy5zdGFydGVkKSB7XHJcbiAgICAgICAgICAgIC8vIFNpbmNlIHRoZSBhcHBsaWNhdGlvbiBkb2Vzbid0IHN0YXJ0IHJ1bm5pbmcgaW1tZWRpYXRlbHksIHRyYWNrXHJcbiAgICAgICAgICAgIC8vIHdoZXRoZXIgdGhpcyBmdW5jdGlvbiB3YXMgY2FsbGVkIGFuZCB1c2UgdGhhdCB0byBrZWVwIGl0IGZyb21cclxuICAgICAgICAgICAgLy8gc3RhcnRpbmcgdGhlIG1haW4gbG9vcCBtdWx0aXBsZSB0aW1lcy5cclxuICAgICAgICAgICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIC8vIEluIHRoZSBtYWluIGxvb3AsIGRyYXcoKSBpcyBjYWxsZWQgYWZ0ZXIgdXBkYXRlKCksIHNvIGlmIHdlXHJcbiAgICAgICAgICAgIC8vIGVudGVyZWQgdGhlIG1haW4gbG9vcCBpbW1lZGlhdGVseSwgd2Ugd291bGQgbmV2ZXIgcmVuZGVyIHRoZVxyXG4gICAgICAgICAgICAvLyBpbml0aWFsIHN0YXRlIGJlZm9yZSBhbnkgdXBkYXRlcyBvY2N1ci4gSW5zdGVhZCwgd2UgcnVuIG9uZVxyXG4gICAgICAgICAgICAvLyBmcmFtZSB3aGVyZSBhbGwgd2UgZG8gaXMgZHJhdywgYW5kIHRoZW4gc3RhcnQgdGhlIG1haW4gbG9vcCB3aXRoXHJcbiAgICAgICAgICAgIC8vIHRoZSBuZXh0IGZyYW1lLlxyXG4gICAgICAgICAgICB0aGlzLnJhZiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnN0YXJ0TG9vcC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhcnRMb29wKHRpbWVzdGFtcCA6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIC8vIFJlbmRlciB0aGUgaW5pdGlhbCBzdGF0ZSBiZWZvcmUgYW55IHVwZGF0ZXMgb2NjdXIuXHJcbiAgICAgICAgdGhpcy5kcmF3KDEpO1xyXG5cclxuICAgICAgICAvLyBUaGUgYXBwbGljYXRpb24gaXNuJ3QgY29uc2lkZXJlZCBcInJ1bm5pbmdcIiB1bnRpbCB0aGVcclxuICAgICAgICAvLyBhcHBsaWNhdGlvbiBzdGFydHMgZHJhd2luZy5cclxuICAgICAgICB0aGlzLnJ1bm5pbmcgPSB0cnVlO1xyXG5cclxuICAgICAgICAvLyBSZXNldCB2YXJpYWJsZXMgdGhhdCBhcmUgdXNlZCBmb3IgdHJhY2tpbmcgdGltZSBzbyB0aGF0IHdlXHJcbiAgICAgICAgLy8gZG9uJ3Qgc2ltdWxhdGUgdGltZSBwYXNzZWQgd2hpbGUgdGhlIGFwcGxpY2F0aW9uIHdhcyBwYXVzZWQuXHJcbiAgICAgICAgdGhpcy5sYXN0RnJhbWVUaW1lTXMgPSB0aW1lc3RhbXA7XHJcbiAgICAgICAgdGhpcy5sYXN0RnBzVXBkYXRlID0gdGltZXN0YW1wO1xyXG4gICAgICAgIHRoaXMuZnJhbWVzU2luY2VMYXN0RnBzVXBkYXRlID0gMDtcclxuXHJcbiAgICAgICAgLy8gU3RhcnQgdGhlIG1haW4gbG9vcC5cclxuICAgICAgICB0aGlzLnJhZiA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRlLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBtYWluIGxvb3AgaXMgY3VycmVudGx5IHJ1bm5pbmcuXHJcbiAgICAgKlxyXG4gICAgICogU2VlIGFsc28gYE1haW5Mb29wLnN0YXJ0KClgIGFuZCBgTWFpbkxvb3Auc3RvcCgpYC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gICAgICogICBXaGV0aGVyIHRoZSBtYWluIGxvb3AgaXMgY3VycmVudGx5IHJ1bm5pbmcuXHJcbiAgICAgKi9cclxuICAgIGlzUnVubmluZygpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ydW5uaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RvcHMgdGhlIG1haW4gbG9vcC5cclxuICAgICAqXHJcbiAgICAgKiBFdmVudCBoYW5kbGluZyBhbmQgb3RoZXIgYmFja2dyb3VuZCB0YXNrcyBzaG91bGQgYWxzbyBiZSBwYXVzZWQgd2hlbiB0aGVcclxuICAgICAqIG1haW4gbG9vcCBpcyBwYXVzZWQuXHJcbiAgICAgKlxyXG4gICAgICogTm90ZSB0aGF0IHBhdXNpbmcgaW4gbXVsdGlwbGF5ZXIvbXVsdGktdXNlciBhcHBsaWNhdGlvbnMgd2lsbCBjYXVzZSB0aGVcclxuICAgICAqIHBsYXllcidzL3VzZXIncyBjbGllbnQgdG8gYmVjb21lIG91dCBvZiBzeW5jLiBJbiB0aGlzIGNhc2UgdGhlXHJcbiAgICAgKiBzaW11bGF0aW9uIHNob3VsZCBleGl0LCBvciB0aGUgcGxheWVyL3VzZXIgbmVlZHMgdG8gYmUgc25hcHBlZCB0byB0aGVpclxyXG4gICAgICogdXBkYXRlZCBwb3NpdGlvbiB3aGVuIHRoZSBtYWluIGxvb3AgaXMgc3RhcnRlZCBhZ2Fpbi5cclxuICAgICAqXHJcbiAgICAgKiBTZWUgYWxzbyBgTWFpbkxvb3Auc3RhcnQoKWAgYW5kIGBNYWluTG9vcC5pc1J1bm5pbmcoKWAuXHJcbiAgICAgKi9cclxuICAgIHN0b3AoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XHJcbiAgICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMucmFmKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBtYWluIGxvb3AgdGhhdCBydW5zIHVwZGF0ZXMgYW5kIHJlbmRlcmluZy5cclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIHtET01IaWdoUmVzVGltZVN0YW1wfSB0aW1lc3RhbXBcclxuICAgICAqIFRoZSBjdXJyZW50IHRpbWVzdGFtcC4gSW4gcHJhY3RpY2UgdGhpcyBpcyBzdXBwbGllZCBieVxyXG4gICAgICogcmVxdWVzdEFuaW1hdGlvbkZyYW1lIGF0IHRoZSB0aW1lIHRoYXQgaXQgc3RhcnRzIHRvIGZpcmUgY2FsbGJhY2tzLiBUaGlzXHJcbiAgICAgKiBzaG91bGQgb25seSBiZSB1c2VkIGZvciBjb21wYXJpc29uIHRvIG90aGVyIHRpbWVzdGFtcHMgYmVjYXVzZSB0aGUgZXBvY2hcclxuICAgICAqIChpLmUuIHRoZSBcInplcm9cIiB0aW1lKSBkZXBlbmRzIG9uIHRoZSBlbmdpbmUgcnVubmluZyB0aGlzIGNvZGUuIEluIGVuZ2luZXNcclxuICAgICAqIHRoYXQgc3VwcG9ydCBgRE9NSGlnaFJlc1RpbWVTdGFtcGAgKGFsbCBtb2Rlcm4gYnJvd3NlcnMgZXhjZXB0IGlPUyBTYWZhcmlcclxuICAgICAqIDgpIHRoZSBlcG9jaCBpcyB0aGUgdGltZSB0aGUgcGFnZSBzdGFydGVkIGxvYWRpbmcsIHNwZWNpZmljYWxseVxyXG4gICAgICogYHBlcmZvcm1hbmNlLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnRgLiBFdmVyeXdoZXJlIGVsc2UsIGluY2x1ZGluZyBub2RlLmpzLFxyXG4gICAgICogdGhlIGVwb2NoIGlzIHRoZSBVbml4IGVwb2NoICgxOTcwLTAxLTAxVDAwOjAwOjAwWikuXHJcbiAgICAgKiBcclxuICAgICAqIEBpZ25vcmVcclxuICAgICAqL1xyXG4gICAgYW5pbWF0ZSh0aW1lc3RhbXAgOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAvLyBSdW4gdGhlIGxvb3AgYWdhaW4gdGhlIG5leHQgdGltZSB0aGUgYnJvd3NlciBpcyByZWFkeSB0byByZW5kZXIuXHJcbiAgICAgICAgLy8gV2Ugc2V0IHJhZkhhbmRsZSBpbW1lZGlhdGVseSBzbyB0aGF0IHRoZSBuZXh0IGZyYW1lIGNhbiBiZSBjYW5jZWxlZFxyXG4gICAgICAgIC8vIGR1cmluZyB0aGUgY3VycmVudCBmcmFtZS5cclxuICAgICAgICB0aGlzLnJhZiA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRlLmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICAvLyBUaHJvdHRsZSB0aGUgZnJhbWUgcmF0ZSAoaWYgbWluRnJhbWVEZWxheSBpcyBzZXQgdG8gYSBub24temVybyB2YWx1ZSBieVxyXG4gICAgICAgIC8vIGBNYWluTG9vcC5zZXRNYXhBbGxvd2VkRlBTKClgKS5cclxuICAgICAgICBpZiAodGltZXN0YW1wIDwgdGhpcy5sYXN0RnJhbWVUaW1lTXMgKyB0aGlzLm1pbkZyYW1lRGVsYXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gZnJhbWVEZWx0YSBpcyB0aGUgY3VtdWxhdGl2ZSBhbW91bnQgb2YgaW4tYXBwIHRpbWUgdGhhdCBoYXNuJ3QgYmVlblxyXG4gICAgICAgIC8vIHNpbXVsYXRlZCB5ZXQuIEFkZCB0aGUgdGltZSBzaW5jZSB0aGUgbGFzdCBmcmFtZS4gV2UgbmVlZCB0byB0cmFjayB0b3RhbFxyXG4gICAgICAgIC8vIG5vdC15ZXQtc2ltdWxhdGVkIHRpbWUgKGFzIG9wcG9zZWQgdG8ganVzdCB0aGUgdGltZSBlbGFwc2VkIHNpbmNlIHRoZVxyXG4gICAgICAgIC8vIGxhc3QgZnJhbWUpIGJlY2F1c2Ugbm90IGFsbCBhY3R1YWxseSBlbGFwc2VkIHRpbWUgaXMgZ3VhcmFudGVlZCB0byBiZVxyXG4gICAgICAgIC8vIHNpbXVsYXRlZCBlYWNoIGZyYW1lLiBTZWUgdGhlIGNvbW1lbnRzIGJlbG93IGZvciBkZXRhaWxzLlxyXG4gICAgICAgIHRoaXMuZnJhbWVEZWx0YSArPSB0aW1lc3RhbXAgLSB0aGlzLmxhc3RGcmFtZVRpbWVNcztcclxuICAgICAgICB0aGlzLmxhc3RGcmFtZVRpbWVNcyA9IHRpbWVzdGFtcDtcclxuXHJcbiAgICAgICAgLy8gUnVuIGFueSB1cGRhdGVzIHRoYXQgYXJlIG5vdCBkZXBlbmRlbnQgb24gdGltZSBpbiB0aGUgc2ltdWxhdGlvbi4gU2VlXHJcbiAgICAgICAgLy8gYE1haW5Mb29wLnNldEJlZ2luKClgIGZvciBhZGRpdGlvbmFsIGRldGFpbHMgb24gaG93IHRvIHVzZSB0aGlzLlxyXG4gICAgICAgIHRoaXMuYmVnaW4odGltZXN0YW1wLCB0aGlzLmZyYW1lRGVsdGEpO1xyXG5cclxuICAgICAgICAvLyBVcGRhdGUgdGhlIGVzdGltYXRlIG9mIHRoZSBmcmFtZSByYXRlLCBgZnBzYC4gQXBwcm94aW1hdGVseSBldmVyeVxyXG4gICAgICAgIC8vIHNlY29uZCwgdGhlIG51bWJlciBvZiBmcmFtZXMgdGhhdCBvY2N1cnJlZCBpbiB0aGF0IHNlY29uZCBhcmUgaW5jbHVkZWRcclxuICAgICAgICAvLyBpbiBhbiBleHBvbmVudGlhbCBtb3ZpbmcgYXZlcmFnZSBvZiBhbGwgZnJhbWVzIHBlciBzZWNvbmQuIFRoaXMgbWVhbnNcclxuICAgICAgICAvLyB0aGF0IG1vcmUgcmVjZW50IHNlY29uZHMgYWZmZWN0IHRoZSBlc3RpbWF0ZWQgZnJhbWUgcmF0ZSBtb3JlIHRoYW4gb2xkZXJcclxuICAgICAgICAvLyBzZWNvbmRzLlxyXG4gICAgICAgIGlmICh0aW1lc3RhbXAgPiB0aGlzLmxhc3RGcHNVcGRhdGUgKyB0aGlzLmZwc1VwZGF0ZUludGVydmFsKSB7XHJcbiAgICAgICAgICAgIC8vIENvbXB1dGUgdGhlIG5ldyBleHBvbmVudGlhbCBtb3ZpbmcgYXZlcmFnZS5cclxuICAgICAgICAgICAgdGhpcy5mcHMgPVxyXG4gICAgICAgICAgICAgICAgLy8gRGl2aWRlIHRoZSBudW1iZXIgb2YgZnJhbWVzIHNpbmNlIHRoZSBsYXN0IEZQUyB1cGRhdGUgYnkgdGhlXHJcbiAgICAgICAgICAgICAgICAvLyBhbW91bnQgb2YgdGltZSB0aGF0IGhhcyBwYXNzZWQgdG8gZ2V0IHRoZSBtZWFuIGZyYW1lcyBwZXIgc2Vjb25kXHJcbiAgICAgICAgICAgICAgICAvLyBvdmVyIHRoYXQgcGVyaW9kLiBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHNsaWdodGx5IG1vcmUgdGhhbiBhXHJcbiAgICAgICAgICAgICAgICAvLyBzZWNvbmQgaGFzIGxpa2VseSBwYXNzZWQgc2luY2UgdGhlIGxhc3QgdXBkYXRlLlxyXG4gICAgICAgICAgICAgICAgdGhpcy5mcHNBbHBoYSAqIHRoaXMuZnJhbWVzU2luY2VMYXN0RnBzVXBkYXRlICogMTAwMCAvICh0aW1lc3RhbXAgLSB0aGlzLmxhc3RGcHNVcGRhdGUpICtcclxuICAgICAgICAgICAgICAgICgxIC0gdGhpcy5mcHNBbHBoYSkgKiB0aGlzLmZwcztcclxuXHJcbiAgICAgICAgICAgIC8vIFJlc2V0IHRoZSBmcmFtZSBjb3VudGVyIGFuZCBsYXN0LXVwZGF0ZWQgdGltZXN0YW1wIHNpbmNlIHRoZWlyXHJcbiAgICAgICAgICAgIC8vIGxhdGVzdCB2YWx1ZXMgaGF2ZSBub3cgYmVlbiBpbmNvcnBvcmF0ZWQgaW50byB0aGUgRlBTIGVzdGltYXRlLlxyXG4gICAgICAgICAgICB0aGlzLmxhc3RGcHNVcGRhdGUgPSB0aW1lc3RhbXA7XHJcbiAgICAgICAgICAgIHRoaXMuZnJhbWVzU2luY2VMYXN0RnBzVXBkYXRlID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQ291bnQgdGhlIGN1cnJlbnQgZnJhbWUgaW4gdGhlIG5leHQgZnJhbWVzLXBlci1zZWNvbmQgdXBkYXRlLiBUaGlzXHJcbiAgICAgICAgLy8gaGFwcGVucyBhZnRlciB0aGUgcHJldmlvdXMgc2VjdGlvbiBiZWNhdXNlIHRoZSBwcmV2aW91cyBzZWN0aW9uXHJcbiAgICAgICAgLy8gY2FsY3VsYXRlcyB0aGUgZnJhbWVzIHRoYXQgb2NjdXIgdXAgdW50aWwgYHRpbWVzdGFtcGAsIGFuZCBgdGltZXN0YW1wYFxyXG4gICAgICAgIC8vIHJlZmVycyB0byBhIHRpbWUganVzdCBiZWZvcmUgdGhlIGN1cnJlbnQgZnJhbWUgd2FzIGRlbGl2ZXJlZC5cclxuICAgICAgICB0aGlzLmZyYW1lc1NpbmNlTGFzdEZwc1VwZGF0ZSsrO1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIEEgbmFpdmUgd2F5IHRvIG1vdmUgYW4gb2JqZWN0IGFsb25nIGl0cyBYLWF4aXMgbWlnaHQgYmUgdG8gd3JpdGUgYSBtYWluXHJcbiAgICAgICAgICogbG9vcCBjb250YWluaW5nIHRoZSBzdGF0ZW1lbnQgYG9iai54ICs9IDEwO2Agd2hpY2ggd291bGQgbW92ZSB0aGUgb2JqZWN0XHJcbiAgICAgICAgICogMTAgdW5pdHMgcGVyIGZyYW1lLiBUaGlzIGFwcHJvYWNoIHN1ZmZlcnMgZnJvbSB0aGUgaXNzdWUgdGhhdCBpdCBpc1xyXG4gICAgICAgICAqIGRlcGVuZGVudCBvbiB0aGUgZnJhbWUgcmF0ZS4gSW4gb3RoZXIgd29yZHMsIGlmIHlvdXIgYXBwbGljYXRpb24gaXNcclxuICAgICAgICAgKiBydW5uaW5nIHNsb3dseSAodGhhdCBpcywgZmV3ZXIgZnJhbWVzIHBlciBzZWNvbmQpLCB5b3VyIG9iamVjdCB3aWxsIGFsc29cclxuICAgICAgICAgKiBhcHBlYXIgdG8gbW92ZSBzbG93bHksIHdoZXJlYXMgaWYgeW91ciBhcHBsaWNhdGlvbiBpcyBydW5uaW5nIHF1aWNrbHlcclxuICAgICAgICAgKiAodGhhdCBpcywgbW9yZSBmcmFtZXMgcGVyIHNlY29uZCksIHlvdXIgb2JqZWN0IHdpbGwgYXBwZWFyIHRvIG1vdmVcclxuICAgICAgICAgKiBxdWlja2x5LiBUaGlzIGlzIHVuZGVzaXJhYmxlLCBlc3BlY2lhbGx5IGluIG11bHRpcGxheWVyL211bHRpLXVzZXJcclxuICAgICAgICAgKiBhcHBsaWNhdGlvbnMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBPbmUgc29sdXRpb24gaXMgdG8gbXVsdGlwbHkgdGhlIHNwZWVkIGJ5IHRoZSBhbW91bnQgb2YgdGltZSB0aGF0IGhhc1xyXG4gICAgICAgICAqIHBhc3NlZCBiZXR3ZWVuIHJlbmRlcmluZyBmcmFtZXMuIEZvciBleGFtcGxlLCBpZiB5b3Ugd2FudCB5b3VyIG9iamVjdCB0b1xyXG4gICAgICAgICAqIG1vdmUgNjAwIHVuaXRzIHBlciBzZWNvbmQsIHlvdSBtaWdodCB3cml0ZSBgb2JqLnggKz0gNjAwICogZGVsdGFgLCB3aGVyZVxyXG4gICAgICAgICAqIGBkZWx0YWAgaXMgdGhlIHRpbWUgcGFzc2VkIHNpbmNlIHRoZSBsYXN0IGZyYW1lLiAoRm9yIGNvbnZlbmllbmNlLCBsZXQnc1xyXG4gICAgICAgICAqIG1vdmUgdGhpcyBzdGF0ZW1lbnQgdG8gYW4gdXBkYXRlKCkgZnVuY3Rpb24gdGhhdCB0YWtlcyBgZGVsdGFgIGFzIGFcclxuICAgICAgICAgKiBwYXJhbWV0ZXIuKSBUaGlzIHdheSwgeW91ciBvYmplY3Qgd2lsbCBtb3ZlIGEgY29uc3RhbnQgZGlzdGFuY2Ugb3ZlclxyXG4gICAgICAgICAqIHRpbWUuIEhvd2V2ZXIsIGF0IGxvdyBmcmFtZSByYXRlcyBhbmQgaGlnaCBzcGVlZHMsIHlvdXIgb2JqZWN0IHdpbGwgbW92ZVxyXG4gICAgICAgICAqIGxhcmdlIGRpc3RhbmNlcyBldmVyeSBmcmFtZSwgd2hpY2ggY2FuIGNhdXNlIGl0IHRvIGRvIHN0cmFuZ2UgdGhpbmdzXHJcbiAgICAgICAgICogc3VjaCBhcyBtb3ZlIHRocm91Z2ggd2FsbHMuIEFkZGl0aW9uYWxseSwgd2Ugd291bGQgbGlrZSBvdXIgcHJvZ3JhbSB0b1xyXG4gICAgICAgICAqIGJlIGRldGVybWluaXN0aWMuIFRoYXQgaXMsIGV2ZXJ5IHRpbWUgd2UgcnVuIHRoZSBhcHBsaWNhdGlvbiB3aXRoIHRoZVxyXG4gICAgICAgICAqIHNhbWUgaW5wdXQsIHdlIHdvdWxkIGxpa2UgZXhhY3RseSB0aGUgc2FtZSBvdXRwdXQuIElmIHRoZSB0aW1lIGJldHdlZW5cclxuICAgICAgICAgKiBmcmFtZXMgKHRoZSBgZGVsdGFgKSB2YXJpZXMsIG91ciBvdXRwdXQgd2lsbCBkaXZlcmdlIHRoZSBsb25nZXIgdGhlXHJcbiAgICAgICAgICogcHJvZ3JhbSBydW5zIGR1ZSB0byBhY2N1bXVsYXRlZCByb3VuZGluZyBlcnJvcnMsIGV2ZW4gYXQgbm9ybWFsIGZyYW1lXHJcbiAgICAgICAgICogcmF0ZXMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBBIGJldHRlciBzb2x1dGlvbiBpcyB0byBzZXBhcmF0ZSB0aGUgYW1vdW50IG9mIHRpbWUgc2ltdWxhdGVkIGluIGVhY2hcclxuICAgICAgICAgKiB1cGRhdGUoKSBmcm9tIHRoZSBhbW91bnQgb2YgdGltZSBiZXR3ZWVuIGZyYW1lcy4gT3VyIHVwZGF0ZSgpIGZ1bmN0aW9uXHJcbiAgICAgICAgICogZG9lc24ndCBuZWVkIHRvIGNoYW5nZTsgd2UganVzdCBuZWVkIHRvIGNoYW5nZSB0aGUgZGVsdGEgd2UgcGFzcyB0byBpdFxyXG4gICAgICAgICAqIHNvIHRoYXQgZWFjaCB1cGRhdGUoKSBzaW11bGF0ZXMgYSBmaXhlZCBhbW91bnQgb2YgdGltZSAodGhhdCBpcywgYGRlbHRhYFxyXG4gICAgICAgICAqIHNob3VsZCBoYXZlIHRoZSBzYW1lIHZhbHVlIGVhY2ggdGltZSB1cGRhdGUoKSBpcyBjYWxsZWQpLiBUaGUgdXBkYXRlKClcclxuICAgICAgICAgKiBmdW5jdGlvbiBjYW4gYmUgcnVuIG11bHRpcGxlIHRpbWVzIHBlciBmcmFtZSBpZiBuZWVkZWQgdG8gc2ltdWxhdGUgdGhlXHJcbiAgICAgICAgICogdG90YWwgYW1vdW50IG9mIHRpbWUgcGFzc2VkIHNpbmNlIHRoZSBsYXN0IGZyYW1lLiAoSWYgdGhlIHRpbWUgdGhhdCBoYXNcclxuICAgICAgICAgKiBwYXNzZWQgc2luY2UgdGhlIGxhc3QgZnJhbWUgaXMgbGVzcyB0aGFuIHRoZSBmaXhlZCBzaW11bGF0aW9uIHRpbWUsIHdlXHJcbiAgICAgICAgICoganVzdCB3b24ndCBydW4gYW4gdXBkYXRlKCkgdW50aWwgdGhlIHRoZSBuZXh0IGZyYW1lLiBJZiB0aGVyZSBpc1xyXG4gICAgICAgICAqIHVuc2ltdWxhdGVkIHRpbWUgbGVmdCBvdmVyIHRoYXQgaXMgbGVzcyB0aGFuIG91ciB0aW1lc3RlcCwgd2UnbGwganVzdFxyXG4gICAgICAgICAqIGxlYXZlIGl0IHRvIGJlIHNpbXVsYXRlZCBkdXJpbmcgdGhlIG5leHQgZnJhbWUuKSBUaGlzIGFwcHJvYWNoIGF2b2lkc1xyXG4gICAgICAgICAqIGluY29uc2lzdGVudCByb3VuZGluZyBlcnJvcnMgYW5kIGVuc3VyZXMgdGhhdCB0aGVyZSBhcmUgbm8gZ2lhbnQgbGVhcHNcclxuICAgICAgICAgKiB0aHJvdWdoIHdhbGxzIGJldHdlZW4gZnJhbWVzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogVGhhdCBpcyB3aGF0IGlzIGRvbmUgYmVsb3cuIEl0IGludHJvZHVjZXMgYSBuZXcgcHJvYmxlbSwgYnV0IGl0IGlzIGFcclxuICAgICAgICAgKiBtYW5hZ2VhYmxlIG9uZTogaWYgdGhlIGFtb3VudCBvZiB0aW1lIHNwZW50IHNpbXVsYXRpbmcgaXMgY29uc2lzdGVudGx5XHJcbiAgICAgICAgICogbG9uZ2VyIHRoYW4gdGhlIGFtb3VudCBvZiB0aW1lIGJldHdlZW4gZnJhbWVzLCB0aGUgYXBwbGljYXRpb24gY291bGRcclxuICAgICAgICAgKiBmcmVlemUgYW5kIGNyYXNoIGluIGEgc3BpcmFsIG9mIGRlYXRoLiBUaGlzIHdvbid0IGhhcHBlbiBhcyBsb25nIGFzIHRoZVxyXG4gICAgICAgICAqIGZpeGVkIHNpbXVsYXRpb24gdGltZSBpcyBzZXQgdG8gYSB2YWx1ZSB0aGF0IGlzIGhpZ2ggZW5vdWdoIHRoYXRcclxuICAgICAgICAgKiB1cGRhdGUoKSBjYWxscyB1c3VhbGx5IHRha2UgbGVzcyB0aW1lIHRoYW4gdGhlIGFtb3VudCBvZiB0aW1lIHRoZXkncmVcclxuICAgICAgICAgKiBzaW11bGF0aW5nLiBJZiBpdCBkb2VzIHN0YXJ0IHRvIGhhcHBlbiBhbnl3YXksIHNlZSBgTWFpbkxvb3Auc2V0RW5kKClgXHJcbiAgICAgICAgICogZm9yIGEgZGlzY3Vzc2lvbiBvZiB3YXlzIHRvIHN0b3AgaXQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBBZGRpdGlvbmFsbHksIHNlZSBgTWFpbkxvb3Auc2V0VXBkYXRlKClgIGZvciBhIGRpc2N1c3Npb24gb2YgcGVyZm9ybWFuY2VcclxuICAgICAgICAgKiBjb25zaWRlcmF0aW9ucy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEZ1cnRoZXIgcmVhZGluZyBmb3IgdGhvc2UgaW50ZXJlc3RlZDpcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIC0gaHR0cDovL2dhbWVwcm9ncmFtbWluZ3BhdHRlcm5zLmNvbS9nYW1lLWxvb3AuaHRtbFxyXG4gICAgICAgICAqIC0gaHR0cDovL2dhZmZlcm9uZ2FtZXMuY29tL2dhbWUtcGh5c2ljcy9maXgteW91ci10aW1lc3RlcC9cclxuICAgICAgICAgKiAtIGh0dHBzOi8vZ2FtZWFsY2hlbWlzdC53b3JkcHJlc3MuY29tLzIwMTMvMDMvMTYvdGhvdWdodHMtb24tdGhlLWphdmFzY3JpcHQtZ2FtZS1sb29wL1xyXG4gICAgICAgICAqIC0gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9HYW1lcy9BbmF0b215XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5udW1VcGRhdGVTdGVwcyA9IDA7XHJcbiAgICAgICAgd2hpbGUgKHRoaXMuZnJhbWVEZWx0YSA+PSB0aGlzLnNpbXVsYXRpb25UaW1lc3RlcCkge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnNpbXVsYXRpb25UaW1lc3RlcCk7XHJcbiAgICAgICAgICAgIHRoaXMuZnJhbWVEZWx0YSAtPSB0aGlzLnNpbXVsYXRpb25UaW1lc3RlcDtcclxuXHJcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAqIFNhbml0eSBjaGVjazogYmFpbCBpZiB3ZSBydW4gdGhlIGxvb3AgdG9vIG1hbnkgdGltZXMuXHJcbiAgICAgICAgICAgICAqXHJcbiAgICAgICAgICAgICAqIE9uZSB3YXkgdGhpcyBjb3VsZCBoYXBwZW4gaXMgaWYgdXBkYXRlKCkgdGFrZXMgbG9uZ2VyIHRvIHJ1biB0aGFuXHJcbiAgICAgICAgICAgICAqIHRoZSB0aW1lIGl0IHNpbXVsYXRlcywgdGhlcmVieSBjYXVzaW5nIGEgc3BpcmFsIG9mIGRlYXRoLiBGb3Igd2F5c1xyXG4gICAgICAgICAgICAgKiB0byBhdm9pZCB0aGlzLCBzZWUgYE1haW5Mb29wLnNldEVuZCgpYC4gQW5vdGhlciB3YXkgdGhpcyBjb3VsZFxyXG4gICAgICAgICAgICAgKiBoYXBwZW4gaXMgaWYgdGhlIGJyb3dzZXIgdGhyb3R0bGVzIHNlcnZpbmcgZnJhbWVzLCB3aGljaCB0eXBpY2FsbHlcclxuICAgICAgICAgICAgICogb2NjdXJzIHdoZW4gdGhlIHRhYiBpcyBpbiB0aGUgYmFja2dyb3VuZCBvciB0aGUgZGV2aWNlIGJhdHRlcnkgaXNcclxuICAgICAgICAgICAgICogbG93LiBBbiBldmVudCBvdXRzaWRlIG9mIHRoZSBtYWluIGxvb3Agc3VjaCBhcyBhdWRpbyBwcm9jZXNzaW5nIG9yXHJcbiAgICAgICAgICAgICAqIHN5bmNocm9ub3VzIHJlc291cmNlIHJlYWRzIGNvdWxkIGFsc28gY2F1c2UgdGhlIGFwcGxpY2F0aW9uIHRvIGhhbmdcclxuICAgICAgICAgICAgICogdGVtcG9yYXJpbHkgYW5kIGFjY3VtdWxhdGUgbm90LXlldC1zaW11bGF0ZWQgdGltZSBhcyBhIHJlc3VsdC5cclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogMjQwIGlzIGNob3NlbiBiZWNhdXNlLCBmb3IgYW55IHNhbmUgdmFsdWUgb2Ygc2ltdWxhdGlvblRpbWVzdGVwLCAyNDBcclxuICAgICAgICAgICAgICogdXBkYXRlcyB3aWxsIHNpbXVsYXRlIGF0IGxlYXN0IG9uZSBzZWNvbmQsIGFuZCBpdCB3aWxsIHNpbXVsYXRlIGZvdXJcclxuICAgICAgICAgICAgICogc2Vjb25kcyB3aXRoIHRoZSBkZWZhdWx0IHZhbHVlIG9mIHNpbXVsYXRpb25UaW1lc3RlcC4gKFNhZmFyaVxyXG4gICAgICAgICAgICAgKiBub3RpZmllcyB1c2VycyB0aGF0IHRoZSBzY3JpcHQgaXMgdGFraW5nIHRvbyBsb25nIHRvIHJ1biBpZiBpdCB0YWtlc1xyXG4gICAgICAgICAgICAgKiBtb3JlIHRoYW4gZml2ZSBzZWNvbmRzLilcclxuICAgICAgICAgICAgICpcclxuICAgICAgICAgICAgICogSWYgdGhlcmUgYXJlIG1vcmUgdXBkYXRlcyB0byBydW4gaW4gYSBmcmFtZSB0aGFuIHRoaXMsIHRoZVxyXG4gICAgICAgICAgICAgKiBhcHBsaWNhdGlvbiB3aWxsIGFwcGVhciB0byBzbG93IGRvd24gdG8gdGhlIHVzZXIgdW50aWwgaXQgY2F0Y2hlc1xyXG4gICAgICAgICAgICAgKiBiYWNrIHVwLiBJbiBuZXR3b3JrZWQgYXBwbGljYXRpb25zIHRoaXMgd2lsbCB1c3VhbGx5IGNhdXNlIHRoZSB1c2VyXHJcbiAgICAgICAgICAgICAqIHRvIGdldCBvdXQgb2Ygc3luYyB3aXRoIHRoZWlyIHBlZXJzLCBidXQgaWYgdGhlIHVwZGF0ZXMgYXJlIHRha2luZ1xyXG4gICAgICAgICAgICAgKiB0aGlzIGxvbmcgYWxyZWFkeSwgdGhleSdyZSBwcm9iYWJseSBhbHJlYWR5IG91dCBvZiBzeW5jLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgaWYgKCsrdGhpcy5udW1VcGRhdGVTdGVwcyA+PSAyNDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFuaWMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogUmVuZGVyIHRoZSBzY3JlZW4uIFdlIGRvIHRoaXMgcmVnYXJkbGVzcyBvZiB3aGV0aGVyIHVwZGF0ZSgpIGhhcyBydW5cclxuICAgICAgICAgKiBkdXJpbmcgdGhpcyBmcmFtZSBiZWNhdXNlIGl0IGlzIHBvc3NpYmxlIHRvIGludGVycG9sYXRlIGJldHdlZW4gdXBkYXRlc1xyXG4gICAgICAgICAqIHRvIG1ha2UgdGhlIGZyYW1lIHJhdGUgYXBwZWFyIGZhc3RlciB0aGFuIHVwZGF0ZXMgYXJlIGFjdHVhbGx5XHJcbiAgICAgICAgICogaGFwcGVuaW5nLiBTZWUgYE1haW5Mb29wLnNldERyYXcoKWAgZm9yIGFuIGV4cGxhbmF0aW9uIG9mIGhvdyB0byBkb1xyXG4gICAgICAgICAqIHRoYXQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBXZSBkcmF3IGFmdGVyIHVwZGF0aW5nIGJlY2F1c2Ugd2Ugd2FudCB0aGUgc2NyZWVuIHRvIHJlZmxlY3QgYSBzdGF0ZSBvZlxyXG4gICAgICAgICAqIHRoZSBhcHBsaWNhdGlvbiB0aGF0IGlzIGFzIHVwLXRvLWRhdGUgYXMgcG9zc2libGUuIChgTWFpbkxvb3Auc3RhcnQoKWBcclxuICAgICAgICAgKiBkcmF3cyB0aGUgdmVyeSBmaXJzdCBmcmFtZSBpbiB0aGUgYXBwbGljYXRpb24ncyBpbml0aWFsIHN0YXRlLCBiZWZvcmVcclxuICAgICAgICAgKiBhbnkgdXBkYXRlcyBoYXZlIG9jY3VycmVkLikgU29tZSBzb3VyY2VzIHNwZWN1bGF0ZSB0aGF0IHJlbmRlcmluZ1xyXG4gICAgICAgICAqIGVhcmxpZXIgaW4gdGhlIHJlcXVlc3RBbmltYXRpb25GcmFtZSBjYWxsYmFjayBjYW4gZ2V0IHRoZSBzY3JlZW4gcGFpbnRlZFxyXG4gICAgICAgICAqIGZhc3RlcjsgdGhpcyBpcyBtb3N0bHkgbm90IHRydWUsIGFuZCBldmVuIHdoZW4gaXQgaXMsIGl0J3MgdXN1YWxseSBqdXN0XHJcbiAgICAgICAgICogYSB0cmFkZS1vZmYgYmV0d2VlbiByZW5kZXJpbmcgdGhlIGN1cnJlbnQgZnJhbWUgc29vbmVyIGFuZCByZW5kZXJpbmcgdGhlXHJcbiAgICAgICAgICogbmV4dCBmcmFtZSBsYXRlci5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFNlZSBgTWFpbkxvb3Auc2V0RHJhdygpYCBmb3IgZGV0YWlscyBhYm91dCBkcmF3KCkgaXRzZWxmLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuZHJhdyh0aGlzLmZyYW1lRGVsdGEgLyB0aGlzLnNpbXVsYXRpb25UaW1lc3RlcCk7XHJcblxyXG4gICAgICAgIC8vIFJ1biBhbnkgdXBkYXRlcyB0aGF0IGFyZSBub3QgZGVwZW5kZW50IG9uIHRpbWUgaW4gdGhlIHNpbXVsYXRpb24uIFNlZVxyXG4gICAgICAgIC8vIGBNYWluTG9vcC5zZXRFbmQoKWAgZm9yIGFkZGl0aW9uYWwgZGV0YWlscyBvbiBob3cgdG8gdXNlIHRoaXMuXHJcbiAgICAgICAgdGhpcy5lbmQodGhpcy5mcHMsIHRoaXMucGFuaWMpO1xyXG5cclxuICAgICAgICB0aGlzLnBhbmljID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU1VCQ0xBU1NFUyBNVVNUIE9WRVJSSURFIEZPVVIgUkVRVUlSRUQgTUVUSE9EUzpcclxuICAgICAgICAvLyBiZWdpblxyXG4gICAgICAgIC8vIHVwZGF0ZVxyXG4gICAgICAgIC8vIGRyYXdcclxuICAgICAgICAvLyBlbmRcclxuXHJcbiAgICAvKipcclxuICAgICAqIEEgZnVuY3Rpb24gdGhhdCBydW5zIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIG1haW4gbG9vcC5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgYmVnaW4oKSBmdW5jdGlvbiBpcyB0eXBpY2FsbHkgdXNlZCB0byBwcm9jZXNzIGlucHV0IGJlZm9yZSB0aGVcclxuICAgICAqIHVwZGF0ZXMgcnVuLiBQcm9jZXNzaW5nIGlucHV0IGhlcmUgKGluIGNodW5rcykgY2FuIHJlZHVjZSB0aGUgcnVubmluZ1xyXG4gICAgICogdGltZSBvZiBldmVudCBoYW5kbGVycywgd2hpY2ggaXMgdXNlZnVsIGJlY2F1c2UgbG9uZy1ydW5uaW5nIGV2ZW50XHJcbiAgICAgKiBoYW5kbGVycyBjYW4gc29tZXRpbWVzIGRlbGF5IGZyYW1lcy5cclxuICAgICAqXHJcbiAgICAgKiBVbmxpa2Uge0BsaW5rICNzZXRVcGRhdGUgdXBkYXRlfSgpLCB3aGljaCBjYW4gcnVuIHplcm8gb3IgbW9yZSB0aW1lcyBwZXJcclxuICAgICAqIGZyYW1lLCBiZWdpbigpIGFsd2F5cyBydW5zIGV4YWN0bHkgb25jZSBwZXIgZnJhbWUuIFRoaXMgbWFrZXMgaXQgdXNlZnVsXHJcbiAgICAgKiBmb3IgYW55IHVwZGF0ZXMgdGhhdCBhcmUgbm90IGRlcGVuZGVudCBvbiB0aW1lIGluIHRoZSBzaW11bGF0aW9uLlxyXG4gICAgICogRXhhbXBsZXMgaW5jbHVkZSBhZGp1c3RpbmcgSFVEIGNhbGN1bGF0aW9ucyBvciBwZXJmb3JtaW5nIGxvbmctcnVubmluZ1xyXG4gICAgICogdXBkYXRlcyBpbmNyZW1lbnRhbGx5LiBDb21wYXJlZCB0byB7QGxpbmsgI3NldEVuZCBlbmR9KCksIGdlbmVyYWxseVxyXG4gICAgICogYWN0aW9ucyBzaG91bGQgb2NjdXIgaW4gYmVnaW4oKSBpZiB0aGV5IGFmZmVjdCBhbnl0aGluZyB0aGF0XHJcbiAgICAgKiB7QGxpbmsgI3NldFVwZGF0ZSB1cGRhdGV9KCkgb3Ige0BsaW5rICNzZXREcmF3IGRyYXd9KCkgdXNlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGJlZ2luXHJcbiAgICAgKiAgIFRoZSBiZWdpbigpIGZ1bmN0aW9uLlxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtiZWdpbi50aW1lc3RhbXBdXHJcbiAgICAgKiAgIFRoZSBjdXJyZW50IHRpbWVzdGFtcCAod2hlbiB0aGUgZnJhbWUgc3RhcnRlZCksIGluIG1pbGxpc2Vjb25kcy4gVGhpc1xyXG4gICAgICogICBzaG91bGQgb25seSBiZSB1c2VkIGZvciBjb21wYXJpc29uIHRvIG90aGVyIHRpbWVzdGFtcHMgYmVjYXVzZSB0aGVcclxuICAgICAqICAgZXBvY2ggKGkuZS4gdGhlIFwiemVyb1wiIHRpbWUpIGRlcGVuZHMgb24gdGhlIGVuZ2luZSBydW5uaW5nIHRoaXMgY29kZS5cclxuICAgICAqICAgSW4gZW5naW5lcyB0aGF0IHN1cHBvcnQgYERPTUhpZ2hSZXNUaW1lU3RhbXBgIChhbGwgbW9kZXJuIGJyb3dzZXJzXHJcbiAgICAgKiAgIGV4Y2VwdCBpT1MgU2FmYXJpIDgpIHRoZSBlcG9jaCBpcyB0aGUgdGltZSB0aGUgcGFnZSBzdGFydGVkIGxvYWRpbmcsXHJcbiAgICAgKiAgIHNwZWNpZmljYWxseSBgcGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydGAuIEV2ZXJ5d2hlcmUgZWxzZSxcclxuICAgICAqICAgaW5jbHVkaW5nIG5vZGUuanMsIHRoZSBlcG9jaCBpcyB0aGUgVW5peCBlcG9jaCAoMTk3MC0wMS0wMVQwMDowMDowMFopLlxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtiZWdpbi5kZWx0YV1cclxuICAgICAqICAgVGhlIHRvdGFsIGVsYXBzZWQgdGltZSB0aGF0IGhhcyBub3QgeWV0IGJlZW4gc2ltdWxhdGVkLCBpblxyXG4gICAgICogICBtaWxsaXNlY29uZHMuXHJcbiAgICAgKi9cclxuICAgIGFic3RyYWN0IGJlZ2luKHRpbWVzdGFtcCA6IG51bWJlciwgZGVsdGEgOiBudW1iZXIpIDogdm9pZDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEEgZnVuY3Rpb24gdGhhdCBydW5zIHVwZGF0ZXMgKGkuZS4gQUkgYW5kIHBoeXNpY3MpLlxyXG4gICAgICpcclxuICAgICAqIFRoZSB1cGRhdGUoKSBmdW5jdGlvbiBzaG91bGQgc2ltdWxhdGUgYW55dGhpbmcgdGhhdCBpcyBhZmZlY3RlZCBieSB0aW1lLlxyXG4gICAgICogSXQgY2FuIGJlIGNhbGxlZCB6ZXJvIG9yIG1vcmUgdGltZXMgcGVyIGZyYW1lIGRlcGVuZGluZyBvbiB0aGUgZnJhbWVcclxuICAgICAqIHJhdGUuXHJcbiAgICAgKlxyXG4gICAgICogQXMgd2l0aCBldmVyeXRoaW5nIGluIHRoZSBtYWluIGxvb3AsIHRoZSBydW5uaW5nIHRpbWUgb2YgdXBkYXRlKClcclxuICAgICAqIGRpcmVjdGx5IGFmZmVjdHMgdGhlIGZyYW1lIHJhdGUuIElmIHVwZGF0ZSgpIHRha2VzIGxvbmcgZW5vdWdoIHRoYXQgdGhlXHJcbiAgICAgKiBmcmFtZSByYXRlIGRyb3BzIGJlbG93IHRoZSB0YXJnZXQgKFwiYnVkZ2V0ZWRcIikgZnJhbWUgcmF0ZSwgcGFydHMgb2YgdGhlXHJcbiAgICAgKiB1cGRhdGUoKSBmdW5jdGlvbiB0aGF0IGRvIG5vdCBuZWVkIHRvIGV4ZWN1dGUgYmV0d2VlbiBldmVyeSBmcmFtZSBjYW4gYmVcclxuICAgICAqIG1vdmVkIGludG8gV2ViIFdvcmtlcnMuIChWYXJpb3VzIHNvdXJjZXMgb24gdGhlIGludGVybmV0IHNvbWV0aW1lc1xyXG4gICAgICogc3VnZ2VzdCBvdGhlciBzY2hlZHVsaW5nIHBhdHRlcm5zIHVzaW5nIHNldFRpbWVvdXQoKSBvciBzZXRJbnRlcnZhbCgpLlxyXG4gICAgICogVGhlc2UgYXBwcm9hY2hlcyBzb21ldGltZXMgb2ZmZXIgbW9kZXN0IGltcHJvdmVtZW50cyB3aXRoIG1pbmltYWxcclxuICAgICAqIGNoYW5nZXMgdG8gZXhpc3RpbmcgY29kZSwgYnV0IGJlY2F1c2UgSmF2YVNjcmlwdCBpcyBzaW5nbGUtdGhyZWFkZWQsIHRoZVxyXG4gICAgICogdXBkYXRlcyB3aWxsIHN0aWxsIGJsb2NrIHJlbmRlcmluZyBhbmQgZHJhZyBkb3duIHRoZSBmcmFtZSByYXRlLiBXZWJcclxuICAgICAqIFdvcmtlcnMgZXhlY3V0ZSBpbiBzZXBhcmF0ZSB0aHJlYWRzLCBzbyB0aGV5IGZyZWUgdXAgbW9yZSB0aW1lIGluIHRoZVxyXG4gICAgICogbWFpbiBsb29wLilcclxuICAgICAqXHJcbiAgICAgKiBUaGlzIHNjcmlwdCBjYW4gYmUgaW1wb3J0ZWQgaW50byBhIFdlYiBXb3JrZXIgdXNpbmcgaW1wb3J0U2NyaXB0cygpIGFuZFxyXG4gICAgICogdXNlZCB0byBydW4gYSBzZWNvbmQgbWFpbiBsb29wIGluIHRoZSB3b3JrZXIuIFNvbWUgY29uc2lkZXJhdGlvbnM6XHJcbiAgICAgKlxyXG4gICAgICogLSBQcm9maWxlIHlvdXIgY29kZSBiZWZvcmUgZG9pbmcgdGhlIHdvcmsgdG8gbW92ZSBpdCBpbnRvIFdlYiBXb3JrZXJzLlxyXG4gICAgICogICBJdCBjb3VsZCBiZSB0aGUgcmVuZGVyaW5nIHRoYXQgaXMgdGhlIGJvdHRsZW5lY2ssIGluIHdoaWNoIGNhc2UgdGhlXHJcbiAgICAgKiAgIHNvbHV0aW9uIGlzIHRvIGRlY3JlYXNlIHRoZSB2aXN1YWwgY29tcGxleGl0eSBvZiB0aGUgc2NlbmUuXHJcbiAgICAgKiAtIEl0IGRvZXNuJ3QgbWFrZSBzZW5zZSB0byBtb3ZlIHRoZSAqZW50aXJlKiBjb250ZW50cyBvZiB1cGRhdGUoKSBpbnRvXHJcbiAgICAgKiAgIHdvcmtlcnMgdW5sZXNzIHtAbGluayAjc2V0RHJhdyBkcmF3fSgpIGNhbiBpbnRlcnBvbGF0ZSBiZXR3ZWVuIGZyYW1lcy5cclxuICAgICAqICAgVGhlIGxvd2VzdC1oYW5naW5nIGZydWl0IGlzIGJhY2tncm91bmQgdXBkYXRlcyAobGlrZSBjYWxjdWxhdGluZ1xyXG4gICAgICogICBjaXRpemVucycgaGFwcGluZXNzIGluIGEgY2l0eS1idWlsZGluZyBnYW1lKSwgcGh5c2ljcyB0aGF0IGRvZXNuJ3RcclxuICAgICAqICAgYWZmZWN0IHRoZSBzY2VuZSAobGlrZSBmbGFncyB3YXZpbmcgaW4gdGhlIHdpbmQpLCBhbmQgYW55dGhpbmcgdGhhdCBpc1xyXG4gICAgICogICBvY2NsdWRlZCBvciBoYXBwZW5pbmcgZmFyIG9mZiBzY3JlZW4uXHJcbiAgICAgKiAtIElmIGRyYXcoKSBuZWVkcyB0byBpbnRlcnBvbGF0ZSBwaHlzaWNzIGJhc2VkIG9uIGFjdGl2aXR5IHRoYXQgb2NjdXJzXHJcbiAgICAgKiAgIGluIGEgd29ya2VyLCB0aGUgd29ya2VyIG5lZWRzIHRvIHBhc3MgdGhlIGludGVycG9sYXRpb24gdmFsdWUgYmFjayB0b1xyXG4gICAgICogICB0aGUgbWFpbiB0aHJlYWQgc28gdGhhdCBpcyBpcyBhdmFpbGFibGUgdG8gZHJhdygpLlxyXG4gICAgICogLSBXZWIgV29ya2VycyBjYW4ndCBhY2Nlc3MgdGhlIHN0YXRlIG9mIHRoZSBtYWluIHRocmVhZCwgc28gdGhleSBjYW4ndFxyXG4gICAgICogICBkaXJlY3RseSBtb2RpZnkgb2JqZWN0cyBpbiB5b3VyIHNjZW5lLiBNb3ZpbmcgZGF0YSB0byBhbmQgZnJvbSBXZWJcclxuICAgICAqICAgV29ya2VycyBpcyBhIHBhaW4uIFRoZSBmYXN0ZXN0IHdheSB0byBkbyBpdCBpcyB3aXRoIFRyYW5zZmVyYWJsZVxyXG4gICAgICogICBPYmplY3RzOiBiYXNpY2FsbHksIHlvdSBjYW4gcGFzcyBhbiBBcnJheUJ1ZmZlciB0byBhIHdvcmtlcixcclxuICAgICAqICAgZGVzdHJveWluZyB0aGUgb3JpZ2luYWwgcmVmZXJlbmNlIGluIHRoZSBwcm9jZXNzLlxyXG4gICAgICpcclxuICAgICAqIFlvdSBjYW4gcmVhZCBtb3JlIGFib3V0IFdlYiBXb3JrZXJzIGFuZCBUcmFuc2ZlcmFibGUgT2JqZWN0cyBhdFxyXG4gICAgICogW0hUTUw1IFJvY2tzXShodHRwOi8vd3d3Lmh0bWw1cm9ja3MuY29tL2VuL3R1dG9yaWFscy93b3JrZXJzL2Jhc2ljcy8pLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHVwZGF0ZVxyXG4gICAgICogICBUaGUgdXBkYXRlKCkgZnVuY3Rpb24uXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW3VwZGF0ZS5kZWx0YV1cclxuICAgICAqICAgVGhlIGFtb3VudCBvZiB0aW1lIGluIG1pbGxpc2Vjb25kcyB0byBzaW11bGF0ZSBpbiB0aGUgdXBkYXRlLiBJbiBtb3N0XHJcbiAgICAgKiAgIGNhc2VzIHRoaXMgdGltZXN0ZXAgbmV2ZXIgY2hhbmdlcyBpbiBvcmRlciB0byBlbnN1cmUgZGV0ZXJtaW5pc3RpY1xyXG4gICAgICogICB1cGRhdGVzLiBUaGUgdGltZXN0ZXAgaXMgdGhlIHNhbWUgYXMgdGhhdCByZXR1cm5lZCBieVxyXG4gICAgICogICBgTWFpbkxvb3AuZ2V0U2ltdWxhdGlvblRpbWVzdGVwKClgLlxyXG4gICAgICovXHJcbiAgICBhYnN0cmFjdCB1cGRhdGUodGltZVN0ZXAgOiBudW1iZXIpIDogdm9pZDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEEgZnVuY3Rpb24gdGhhdCBkcmF3cyB0aGluZ3Mgb24gdGhlIHNjcmVlbi5cclxuICAgICAqXHJcbiAgICAgKiBUaGUgZHJhdygpIGZ1bmN0aW9uIGdldHMgcGFzc2VkIHRoZSBwZXJjZW50IG9mIHRpbWUgdGhhdCB0aGUgbmV4dCBydW4gb2ZcclxuICAgICAqIHtAbGluayAjc2V0VXBkYXRlIHVwZGF0ZX0oKSB3aWxsIHNpbXVsYXRlIHRoYXQgaGFzIGFjdHVhbGx5IGVsYXBzZWQsIGFzXHJcbiAgICAgKiBhIGRlY2ltYWwuIEluIG90aGVyIHdvcmRzLCBkcmF3KCkgZ2V0cyBwYXNzZWQgaG93IGZhciBiZXR3ZWVuIHVwZGF0ZSgpXHJcbiAgICAgKiBjYWxscyBpdCBpcy4gVGhpcyBpcyB1c2VmdWwgYmVjYXVzZSB0aGUgdGltZSBzaW11bGF0ZWQgYnkgdXBkYXRlKCkgYW5kXHJcbiAgICAgKiB0aGUgdGltZSBiZXR3ZWVuIGRyYXcoKSBjYWxscyBpcyB1c3VhbGx5IGRpZmZlcmVudCwgc28gdGhlIHBhcmFtZXRlciB0b1xyXG4gICAgICogZHJhdygpIGNhbiBiZSB1c2VkIHRvIGludGVycG9sYXRlIG1vdGlvbiBiZXR3ZWVuIGZyYW1lcyB0byBtYWtlXHJcbiAgICAgKiByZW5kZXJpbmcgYXBwZWFyIHNtb290aGVyLiBUbyBpbGx1c3RyYXRlLCBpZiB1cGRhdGUoKSBhZHZhbmNlcyB0aGVcclxuICAgICAqIHNpbXVsYXRpb24gYXQgZWFjaCB2ZXJ0aWNhbCBiYXIgaW4gdGhlIGZpcnN0IHJvdyBiZWxvdywgYW5kIGRyYXcoKSBjYWxsc1xyXG4gICAgICogaGFwcGVuIGF0IGVhY2ggdmVydGljYWwgYmFyIGluIHRoZSBzZWNvbmQgcm93IGJlbG93LCB0aGVuIHNvbWUgZnJhbWVzXHJcbiAgICAgKiB3aWxsIGhhdmUgdGltZSBsZWZ0IG92ZXIgdGhhdCBpcyBub3QgeWV0IHNpbXVsYXRlZCBieSB1cGRhdGUoKSB3aGVuXHJcbiAgICAgKiByZW5kZXJpbmcgb2NjdXJzIGluIGRyYXcoKTpcclxuICAgICAqXHJcbiAgICAgKiAgICAgdXBkYXRlKCkgdGltZXN0ZXBzOiAgfCAgfCAgfCAgfCAgfCAgfCAgfCAgfCAgfFxyXG4gICAgICogICAgIGRyYXcoKSBjYWxsczogICAgICAgIHwgICB8ICAgfCAgIHwgICB8ICAgfCAgIHxcclxuICAgICAqXHJcbiAgICAgKiBUbyBpbnRlcnBvbGF0ZSBtb3Rpb24gZm9yIHJlbmRlcmluZyBwdXJwb3Nlcywgb2JqZWN0cycgc3RhdGUgYWZ0ZXIgdGhlXHJcbiAgICAgKiBsYXN0IHVwZGF0ZSgpIG11c3QgYmUgcmV0YWluZWQgYW5kIHVzZWQgdG8gY2FsY3VsYXRlIGFuIGludGVybWVkaWF0ZVxyXG4gICAgICogc3RhdGUuIE5vdGUgdGhhdCB0aGlzIG1lYW5zIHJlbmRlcnMgd2lsbCBiZSB1cCB0byBvbmUgdXBkYXRlKCkgYmVoaW5kLlxyXG4gICAgICogVGhpcyBpcyBzdGlsbCBiZXR0ZXIgdGhhbiBleHRyYXBvbGF0aW5nIChwcm9qZWN0aW5nIG9iamVjdHMnIHN0YXRlIGFmdGVyXHJcbiAgICAgKiBhIGZ1dHVyZSB1cGRhdGUoKSkgd2hpY2ggY2FuIHByb2R1Y2UgYml6YXJyZSByZXN1bHRzLiBTdG9yaW5nIG11bHRpcGxlXHJcbiAgICAgKiBzdGF0ZXMgY2FuIGJlIGRpZmZpY3VsdCB0byBzZXQgdXAsIGFuZCBrZWVwIGluIG1pbmQgdGhhdCBydW5uaW5nIHRoaXNcclxuICAgICAqIHByb2Nlc3MgdGFrZXMgdGltZSB0aGF0IGNvdWxkIHB1c2ggdGhlIGZyYW1lIHJhdGUgZG93biwgc28gaXQncyBvZnRlblxyXG4gICAgICogbm90IHdvcnRod2hpbGUgdW5sZXNzIHN0dXR0ZXJpbmcgaXMgdmlzaWJsZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBkcmF3XHJcbiAgICAgKiAgIFRoZSBkcmF3KCkgZnVuY3Rpb24uXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW2RyYXcuaW50ZXJwb2xhdGlvblBlcmNlbnRhZ2VdXHJcbiAgICAgKiAgIFRoZSBjdW11bGF0aXZlIGFtb3VudCBvZiB0aW1lIHRoYXQgaGFzbid0IGJlZW4gc2ltdWxhdGVkIHlldCwgZGl2aWRlZFxyXG4gICAgICogICBieSB0aGUgYW1vdW50IG9mIHRpbWUgdGhhdCB3aWxsIGJlIHNpbXVsYXRlZCB0aGUgbmV4dCB0aW1lIHVwZGF0ZSgpXHJcbiAgICAgKiAgIHJ1bnMuIFVzZWZ1bCBmb3IgaW50ZXJwb2xhdGluZyBmcmFtZXMuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBkcmF3KGludGVycG9sYXRpb25QZXJjZW50YWdlIDogbnVtYmVyKSA6IHZvaWQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgcnVucyBhdCB0aGUgZW5kIG9mIHRoZSBtYWluIGxvb3AuXHJcbiAgICAgKlxyXG4gICAgICogVW5saWtlIHtAbGluayAjc2V0VXBkYXRlIHVwZGF0ZX0oKSwgd2hpY2ggY2FuIHJ1biB6ZXJvIG9yIG1vcmUgdGltZXMgcGVyXHJcbiAgICAgKiBmcmFtZSwgZW5kKCkgYWx3YXlzIHJ1bnMgZXhhY3RseSBvbmNlIHBlciBmcmFtZS4gVGhpcyBtYWtlcyBpdCB1c2VmdWxcclxuICAgICAqIGZvciBhbnkgdXBkYXRlcyB0aGF0IGFyZSBub3QgZGVwZW5kZW50IG9uIHRpbWUgaW4gdGhlIHNpbXVsYXRpb24uXHJcbiAgICAgKiBFeGFtcGxlcyBpbmNsdWRlIGNsZWFuaW5nIHVwIGFueSB0ZW1wb3Jhcnkgc3RhdGUgc2V0IHVwIGJ5XHJcbiAgICAgKiB7QGxpbmsgI3NldEJlZ2luIGJlZ2lufSgpLCBsb3dlcmluZyB0aGUgdmlzdWFsIHF1YWxpdHkgaWYgdGhlIGZyYW1lIHJhdGVcclxuICAgICAqIGlzIHRvbyBsb3csIG9yIHBlcmZvcm1pbmcgbG9uZy1ydW5uaW5nIHVwZGF0ZXMgaW5jcmVtZW50YWxseS4gQ29tcGFyZWRcclxuICAgICAqIHRvIGJlZ2luKCksIGdlbmVyYWxseSBhY3Rpb25zIHNob3VsZCBvY2N1ciBpbiBlbmQoKSBpZiB0aGV5IHVzZSBhbnl0aGluZ1xyXG4gICAgICogdGhhdCB1cGRhdGUoKSBvciB7QGxpbmsgI3NldERyYXcgZHJhd30oKSBhZmZlY3QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZW5kXHJcbiAgICAgKiAgIFRoZSBlbmQoKSBmdW5jdGlvbi5cclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbZW5kLmZwc11cclxuICAgICAqICAgVGhlIGV4cG9uZW50aWFsIG1vdmluZyBhdmVyYWdlIG9mIHRoZSBmcmFtZXMgcGVyIHNlY29uZC4gVGhpcyBpcyB0aGVcclxuICAgICAqICAgc2FtZSB2YWx1ZSByZXR1cm5lZCBieSBgTWFpbkxvb3AuZ2V0RlBTKClgLiBJdCBjYW4gYmUgdXNlZCB0byB0YWtlXHJcbiAgICAgKiAgIGFjdGlvbiB3aGVuIHRoZSBGUFMgaXMgdG9vIGxvdyAob3IgdG8gcmVzdG9yZSB0byBub3JtYWxjeSBpZiB0aGUgRlBTXHJcbiAgICAgKiAgIG1vdmVzIGJhY2sgdXApLiBFeGFtcGxlcyBvZiBhY3Rpb25zIHRvIHRha2UgaWYgdGhlIEZQUyBpcyB0b28gbG93XHJcbiAgICAgKiAgIGluY2x1ZGUgZXhpdGluZyB0aGUgYXBwbGljYXRpb24sIGxvd2VyaW5nIHRoZSB2aXN1YWwgcXVhbGl0eSwgc3RvcHBpbmdcclxuICAgICAqICAgb3IgcmVkdWNpbmcgYWN0aXZpdGllcyBvdXRzaWRlIG9mIHRoZSBtYWluIGxvb3AgbGlrZSBldmVudCBoYW5kbGVycyBvclxyXG4gICAgICogICBhdWRpbyBwbGF5YmFjaywgcGVyZm9ybWluZyBub24tY3JpdGljYWwgdXBkYXRlcyBsZXNzIGZyZXF1ZW50bHksIG9yXHJcbiAgICAgKiAgIGluY3JlYXNpbmcgdGhlIHNpbXVsYXRpb24gdGltZXN0ZXAgKGJ5IGNhbGxpbmdcclxuICAgICAqICAgYE1haW5Mb29wLnNldFNpbXVsYXRpb25UaW1lc3RlcCgpYCkuIE5vdGUgdGhhdCB0aGlzIGxhc3Qgb3B0aW9uXHJcbiAgICAgKiAgIHJlc3VsdHMgaW4gbW9yZSB0aW1lIGJlaW5nIHNpbXVsYXRlZCBwZXIgdXBkYXRlKCkgY2FsbCwgd2hpY2ggY2F1c2VzXHJcbiAgICAgKiAgIHRoZSBhcHBsaWNhdGlvbiB0byBiZWhhdmUgbm9uLWRldGVybWluaXN0aWNhbGx5LlxyXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbZW5kLnBhbmljPWZhbHNlXVxyXG4gICAgICogICBJbmRpY2F0ZXMgd2hldGhlciB0aGUgc2ltdWxhdGlvbiBoYXMgZmFsbGVuIHRvbyBmYXIgYmVoaW5kIHJlYWwgdGltZS5cclxuICAgICAqICAgU3BlY2lmaWNhbGx5LCBgcGFuaWNgIHdpbGwgYmUgYHRydWVgIGlmIHRvbyBtYW55IHVwZGF0ZXMgb2NjdXJyZWQgaW5cclxuICAgICAqICAgb25lIGZyYW1lLiBJbiBuZXR3b3JrZWQgbG9ja3N0ZXAgYXBwbGljYXRpb25zLCB0aGUgYXBwbGljYXRpb24gc2hvdWxkXHJcbiAgICAgKiAgIHdhaXQgZm9yIHNvbWUgYW1vdW50IG9mIHRpbWUgdG8gc2VlIGlmIHRoZSB1c2VyIGNhbiBjYXRjaCB1cCBiZWZvcmVcclxuICAgICAqICAgZHJvcHBpbmcgdGhlIHVzZXIuIEluIG5ldHdvcmtlZCBidXQgbm9uLWxvY2tzdGVwIGFwcGxpY2F0aW9ucywgdGhpc1xyXG4gICAgICogICB0eXBpY2FsbHkgaW5kaWNhdGVzIHRoYXQgdGhlIHVzZXIgbmVlZHMgdG8gYmUgc25hcHBlZCBvciBlYXNlZCB0byB0aGVcclxuICAgICAqICAgY3VycmVudCBhdXRob3JpdGF0aXZlIHN0YXRlLiBXaGVuIHRoaXMgaGFwcGVucywgaXQgbWF5IGJlIGNvbnZlbmllbnRcclxuICAgICAqICAgdG8gY2FsbCBgTWFpbkxvb3AucmVzZXRGcmFtZURlbHRhKClgIHRvIGRpc2NhcmQgYWNjdW11bGF0ZWQgcGVuZGluZ1xyXG4gICAgICogICB1cGRhdGVzLiBJbiBub24tbmV0d29ya2VkIGFwcGxpY2F0aW9ucywgaXQgbWF5IGJlIGFjY2VwdGFibGUgdG8gYWxsb3dcclxuICAgICAqICAgdGhlIGFwcGxpY2F0aW9uIHRvIGtlZXAgcnVubmluZyBmb3IgYXdoaWxlIHRvIHNlZSBpZiBpdCB3aWxsIGNhdGNoIHVwLlxyXG4gICAgICogICBIb3dldmVyLCB0aGlzIGNvdWxkIGFsc28gY2F1c2UgdGhlIGFwcGxpY2F0aW9uIHRvIGxvb2sgbGlrZSBpdCBpc1xyXG4gICAgICogICBydW5uaW5nIHZlcnkgcXVpY2tseSBmb3IgYSBmZXcgZnJhbWVzIGFzIGl0IHRyYW5zaXRpb25zIHRocm91Z2ggdGhlXHJcbiAgICAgKiAgIGludGVybWVkaWF0ZSBzdGF0ZXMuIEFuIGFsdGVybmF0aXZlIHRoYXQgbWF5IGJlIGFjY2VwdGFibGUgaXMgdG9cclxuICAgICAqICAgc2ltcGx5IGlnbm9yZSB0aGUgdW5zaW11bGF0ZWQgZWxhcHNlZCB0aW1lIGJ5IGNhbGxpbmdcclxuICAgICAqICAgYE1haW5Mb29wLnJlc2V0RnJhbWVEZWx0YSgpYCBldmVuIHRob3VnaCB0aGlzIGludHJvZHVjZXNcclxuICAgICAqICAgbm9uLWRldGVybWluaXN0aWMgYmVoYXZpb3IuIEluIGFsbCBjYXNlcywgaWYgdGhlIGFwcGxpY2F0aW9uIHBhbmljc1xyXG4gICAgICogICBmcmVxdWVudGx5LCB0aGlzIGlzIGFuIGluZGljYXRpb24gdGhhdCB0aGUgbWFpbiBsb29wIGlzIHJ1bm5pbmcgdG9vXHJcbiAgICAgKiAgIHNsb3dseS4gSG93ZXZlciwgbW9zdCBvZiB0aGUgdGltZSB0aGUgZHJvcCBpbiBmcmFtZSByYXRlIHdpbGwgcHJvYmFibHlcclxuICAgICAqICAgYmUgbm90aWNlYWJsZSBiZWZvcmUgYSBwYW5pYyBvY2N1cnMuIFRvIGhlbHAgdGhlIGFwcGxpY2F0aW9uIGNhdGNoIHVwXHJcbiAgICAgKiAgIGFmdGVyIGEgcGFuaWMgY2F1c2VkIGJ5IGEgc3BpcmFsIG9mIGRlYXRoLCB0aGUgc2FtZSBzdGVwcyBjYW4gYmUgdGFrZW5cclxuICAgICAqICAgdGhhdCBhcmUgc3VnZ2VzdGVkIGFib3ZlIGlmIHRoZSBGUFMgZHJvcHMgdG9vIGxvdy5cclxuICAgICAqL1xyXG4gICAgYWJzdHJhY3QgZW5kKGZwcyA6IG51bWJlciwgcGFuaWMgOiBib29sZWFuKSA6IHZvaWQ7XHJcbn0iLCIvKlxyXG4gKiBNYXRoVXRpbGl0aWVzIHByb3ZpZGVzIGEgbnVtYmVyIG9mIHNlcnZpY2VzIGZvciByZW5kZXJpbmcgdXNpbmcgNHg0IG1hdHJpY2VzLCBsaWtlXHJcbiAqIHRyYW5zZm9ybXRpbmcgKGkuZS4gdHJhbnNsYXRpb24sIHJvdGF0aW9uLCBhbmQgc2NhbGluZykgM2Qgb3IgMmQgcG9pbnRzIGZyb20gd29ybGRcclxuICogY29vcmRpbmF0ZSBzeXN0ZW1zIHRvIHNjcmVlbiBjb29yZGluYXRlIHN5c3RlbXMuXHJcbiAqL1xyXG5pbXBvcnQge01hdHJpeH0gZnJvbSAnLi9NYXRyaXgnXHJcbmltcG9ydCB7VmVjdG9yM30gZnJvbSAnLi9WZWN0b3IzJ1xyXG5cclxuZXhwb3J0IG5hbWVzcGFjZSBNYXRoVXRpbGl0aWVzIHtcclxuICAgIGV4cG9ydCBmdW5jdGlvbiBkZXRlcm1pbmFudDR4NChyZXN1bHQgOiBNYXRyaXgpIDogbnVtYmVyIHtcclxuICAgICAgICBsZXQgZGV0MCA9IHJlc3VsdC5nZXQoMCwgMCkgKiAoXHJcbiAgICAgICAgICAgIChyZXN1bHQuZ2V0KDEsIDEpICogKChyZXN1bHQuZ2V0KDIsIDIpICogcmVzdWx0LmdldCgzLCAzKSkgLSAocmVzdWx0LmdldCgyLCAzKSAqIHJlc3VsdC5nZXQoMywgMikpKSlcclxuICAgICAgICAgICAgLSAocmVzdWx0LmdldCgxLCAyKSAqICgocmVzdWx0LmdldCgyLCAxKSAqIHJlc3VsdC5nZXQoMywgMykpIC0gKHJlc3VsdC5nZXQoMiwgMykgKiByZXN1bHQuZ2V0KDMsIDEpKSkpXHJcbiAgICAgICAgICAgICsgKHJlc3VsdC5nZXQoMSwgMykgKiAoKHJlc3VsdC5nZXQoMiwgMSkgKiByZXN1bHQuZ2V0KDMsIDIpKSAtIChyZXN1bHQuZ2V0KDMsIDEpICogcmVzdWx0LmdldCgyLCAyKSkpKSk7XHJcbiAgICAgICAgbGV0IGRldDEgPSByZXN1bHQuZ2V0KDAsIDEpICogKFxyXG4gICAgICAgICAgICAocmVzdWx0LmdldCgxLCAwKSAqICgocmVzdWx0LmdldCgyLCAyKSAqIHJlc3VsdC5nZXQoMywgMykpIC0gKHJlc3VsdC5nZXQoMiwgMykgKiByZXN1bHQuZ2V0KDMsIDIpKSkpXHJcbiAgICAgICAgICAgIC0gKHJlc3VsdC5nZXQoMSwgMikgKiAoKHJlc3VsdC5nZXQoMiwgMCkgKiByZXN1bHQuZ2V0KDMsIDMpKSAtIChyZXN1bHQuZ2V0KDMsIDApICogcmVzdWx0LmdldCgyLCAzKSkpKVxyXG4gICAgICAgICAgICArIChyZXN1bHQuZ2V0KDEsIDMpICogKChyZXN1bHQuZ2V0KDIsIDApICogcmVzdWx0LmdldCgzLCAyKSkgLSAocmVzdWx0LmdldCgzLCAwKSAqIHJlc3VsdC5nZXQoMiwgMikpKSkpO1xyXG4gICAgICAgIGxldCBkZXQyID0gcmVzdWx0LmdldCgwLCAyKSAqIChcclxuICAgICAgICAgICAgKHJlc3VsdC5nZXQoMSwgMCkgKiAoKHJlc3VsdC5nZXQoMiwgMSkgKiByZXN1bHQuZ2V0KDMsIDMpKSAtIChyZXN1bHQuZ2V0KDIsIDMpICogcmVzdWx0LmdldCgzLCAxKSkpKVxyXG4gICAgICAgICAgICAtIChyZXN1bHQuZ2V0KDEsIDEpICogKChyZXN1bHQuZ2V0KDIsIDApICogcmVzdWx0LmdldCgzLCAzKSkgLSAocmVzdWx0LmdldCgyLCAzKSAqIHJlc3VsdC5nZXQoMywgMCkpKSlcclxuICAgICAgICAgICAgKyAocmVzdWx0LmdldCgxLCAzKSAqICgocmVzdWx0LmdldCgyLCAwKSAqIHJlc3VsdC5nZXQoMywgMSkpIC0gKHJlc3VsdC5nZXQoMiwgMSkgKiByZXN1bHQuZ2V0KDMsIDApKSkpKTtcclxuICAgICAgICBsZXQgZGV0MyA9IHJlc3VsdC5nZXQoMCwgMykgKiAoXHJcbiAgICAgICAgICAgIChyZXN1bHQuZ2V0KDEsIDApICogKChyZXN1bHQuZ2V0KDIsIDEpICogcmVzdWx0LmdldCgzLCAyKSkgLSAocmVzdWx0LmdldCgyLCAyKSAqIHJlc3VsdC5nZXQoMywgMSkpKSlcclxuICAgICAgICAgICAgLSAocmVzdWx0LmdldCgxLCAxKSAqICgocmVzdWx0LmdldCgyLCAwKSAqIHJlc3VsdC5nZXQoMywgMikpIC0gKHJlc3VsdC5nZXQoMiwgMikgKiByZXN1bHQuZ2V0KDMsIDApKSkpXHJcbiAgICAgICAgICAgICsgKHJlc3VsdC5nZXQoMSwgMikgKiAoKHJlc3VsdC5nZXQoMiwgMCkgKiByZXN1bHQuZ2V0KDMsIDEpKSAtIChyZXN1bHQuZ2V0KDIsIDEpICogcmVzdWx0LmdldCgzLCAwKSkpKSk7XHJcbiAgICAgICAgbGV0IGRldCA9IGRldDAgLSBkZXQxICsgZGV0MiAtIGRldDM7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJkZXQgPSBcIiArIGRldDAgKyBcIiArIFwiICsgZGV0MSArIFwiICsgXCIgKyBkZXQyICsgXCIgKyBcIiArIGRldDMpO1xyXG4gICAgICAgIHJldHVybiBkZXQ7XHJcbiAgICB9XHJcbiAgICBleHBvcnQgZnVuY3Rpb24gaWRlbnRpdHkocmVzdWx0IDogTWF0cml4KSA6IHZvaWQge1xyXG4gICAgICAgIGlmIChyZXN1bHQuZ2V0Um93cygpID09PSByZXN1bHQuZ2V0Q29sdW1ucygpKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0LmdldFJvd3MoKTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHJlc3VsdC5nZXRDb2x1bW5zKCk7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09PSBqKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc2V0KDEuMCwgaSwgaik7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuc2V0KDAuMCwgaSwgaik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBleHBvcnQgZnVuY3Rpb24gaW52ZXJzZShyZXN1bHQgOiBNYXRyaXgsIG1hdCA6IE1hdHJpeCkgOiB2b2lkIHtcclxuICAgICAgICBsZXQgZGV0ID0gdGhpcy5kZXRlcm1pbmFudChtYXQpO1xyXG4gICAgICAgIGxldCBtMDAgPSBtYXQuZ2V0KDAsIDApOyBsZXQgbTAxID0gbWF0LmdldCgwLCAxKTsgbGV0IG0wMiA9IG1hdC5nZXQoMCwgMik7IGxldCBtMDMgPSBtYXQuZ2V0KDAsIDMpO1xyXG4gICAgICAgIGxldCBtMTAgPSBtYXQuZ2V0KDEsIDApOyBsZXQgbTExID0gbWF0LmdldCgxLCAxKTsgbGV0IG0xMiA9IG1hdC5nZXQoMSwgMik7IGxldCBtMTMgPSBtYXQuZ2V0KDEsIDMpO1xyXG4gICAgICAgIGxldCBtMjAgPSBtYXQuZ2V0KDIsIDApOyBsZXQgbTIxID0gbWF0LmdldCgyLCAxKTsgbGV0IG0yMiA9IG1hdC5nZXQoMiwgMik7IGxldCBtMjMgPSBtYXQuZ2V0KDIsIDMpO1xyXG4gICAgICAgIGxldCBtMzAgPSBtYXQuZ2V0KDMsIDApOyBsZXQgbTMxID0gbWF0LmdldCgzLCAxKTsgbGV0IG0zMiA9IG1hdC5nZXQoMywgMik7IGxldCBtMzMgPSBtYXQuZ2V0KDMsIDMpO1xyXG4gICAgICAgIGxldCB0ZW1wID0gbmV3IE1hdHJpeCg0LCA0KTtcclxuICAgICAgICB0ZW1wLnNldCgobTEyICogbTIzICogbTMxKSAtIChtMTMgKiBtMjIgKiBtMzEpICsgKG0xMyAqIG0yMSAqIG0zMikgLSAobTExICogbTIzICogbTMyKSAtIChtMTIgKiBtMjEgKiBtMzMpICsgKG0xMSAqIG0yMiAqIG0zMyksIDAsIDApO1xyXG4gICAgICAgIHRlbXAuc2V0KChtMDMgKiBtMjIgKiBtMzEpIC0gKG0wMiAqIG0yMyAqIG0zMSkgLSAobTAzICogbTIxICogbTMyKSArIChtMDEgKiBtMjMgKiBtMzIpICsgKG0wMiAqIG0yMSAqIG0zMykgLSAobTAxICogbTIyICogbTMzKSwgMCwgMSk7XHJcbiAgICAgICAgdGVtcC5zZXQoKG0wMiAqIG0xMyAqIG0zMSkgLSAobTAzICogbTEyICogbTMxKSArIChtMDMgKiBtMTEgKiBtMzIpIC0gKG0wMSAqIG0xMyAqIG0zMikgLSAobTAyICogbTExICogbTMzKSArIChtMDEgKiBtMTIgKiBtMzMpLCAwLCAyKTtcclxuICAgICAgICB0ZW1wLnNldCgobTAzICogbTEyICogbTIxKSAtIChtMDIgKiBtMTMgKiBtMjEpIC0gKG0wMyAqIG0xMSAqIG0yMikgKyAobTAxICogbTEzICogbTIyKSArIChtMDIgKiBtMTEgKiBtMjMpIC0gKG0wMSAqIG0xMiAqIG0yMyksIDAsIDMpO1xyXG4gICAgICAgIHRlbXAuc2V0KChtMTMgKiBtMjIgKiBtMzApIC0gKG0xMiAqIG0yMyAqIG0zMCkgLSAobTEzICogbTIwICogbTMyKSArIChtMTAgKiBtMjMgKiBtMzIpICsgKG0xMiAqIG0yMCAqIG0zMykgLSAobTEwICogbTIyICogbTMzKSwgMSwgMCk7XHJcbiAgICAgICAgdGVtcC5zZXQoKG0wMiAqIG0yMyAqIG0zMCkgLSAobTAzICogbTIyICogbTMwKSArIChtMDMgKiBtMjAgKiBtMzIpIC0gKG0wMCAqIG0yMyAqIG0zMikgLSAobTAyICogbTIwICogbTMzKSArIChtMDAgKiBtMjIgKiBtMzMpLCAxLCAxKTtcclxuICAgICAgICB0ZW1wLnNldCgobTAzICogbTEyICogbTMwKSAtIChtMDIgKiBtMTMgKiBtMzApIC0gKG0wMyAqIG0xMCAqIG0zMikgKyAobTAwICogbTEzICogbTMyKSArIChtMDIgKiBtMTAgKiBtMzMpIC0gKG0wMCAqIG0xMiAqIG0zMyksIDEsIDIpO1xyXG4gICAgICAgIHRlbXAuc2V0KChtMDIgKiBtMTMgKiBtMjApIC0gKG0wMyAqIG0xMiAqIG0yMCkgKyAobTAzICogbTEwICogbTIyKSAtIChtMDAgKiBtMTMgKiBtMjIpIC0gKG0wMiAqIG0xMCAqIG0yMykgKyAobTAwICogbTEyICogbTIzKSwgMSwgMyk7XHJcbiAgICAgICAgdGVtcC5zZXQoKG0xMSAqIG0yMyAqIG0zMCkgLSAobTEzICogbTIxICogbTMwKSArIChtMTMgKiBtMjAgKiBtMzEpIC0gKG0xMCAqIG0yMyAqIG0zMSkgLSAobTExICogbTIwICogbTMzKSArIChtMTAgKiBtMjEgKiBtMzMpLCAyLCAwKTtcclxuICAgICAgICB0ZW1wLnNldCgobTAzICogbTIxICogbTMwKSAtIChtMDEgKiBtMjMgKiBtMzApIC0gKG0wMyAqIG0yMCAqIG0zMSkgKyAobTAwICogbTIzICogbTMxKSArIChtMDEgKiBtMjAgKiBtMzMpIC0gKG0wMCAqIG0yMSAqIG0zMyksIDIsIDEpO1xyXG4gICAgICAgIHRlbXAuc2V0KChtMDEgKiBtMTMgKiBtMzApIC0gKG0wMyAqIG0xMSAqIG0zMCkgKyAobTAzICogbTEwICogbTMxKSAtIChtMDAgKiBtMTMgKiBtMzEpIC0gKG0wMSAqIG0xMCAqIG0zMykgKyAobTAwICogbTExICogbTMzKSwgMiwgMik7XHJcbiAgICAgICAgdGVtcC5zZXQoKG0wMyAqIG0xMSAqIG0yMCkgLSAobTAxICogbTEzICogbTIwKSAtIChtMDMgKiBtMTAgKiBtMjEpICsgKG0wMCAqIG0xMyAqIG0yMSkgKyAobTAxICogbTEwICogbTIzKSAtIChtMDAgKiBtMTEgKiBtMjMpLCAyLCAzKTtcclxuICAgICAgICB0ZW1wLnNldCgobTEyICogbTIxICogbTMwKSAtIChtMTEgKiBtMjIgKiBtMzApIC0gKG0xMiAqIG0yMCAqIG0zMSkgKyAobTEwICogbTIyICogbTMxKSArIChtMTEgKiBtMjAgKiBtMzIpIC0gKG0xMCAqIG0yMSAqIG0zMiksIDMsIDApO1xyXG4gICAgICAgIHRlbXAuc2V0KChtMDEgKiBtMjIgKiBtMzApIC0gKG0wMiAqIG0yMSAqIG0zMCkgKyAobTAyICogbTIwICogbTMxKSAtIChtMDAgKiBtMjIgKiBtMzEpIC0gKG0wMSAqIG0yMCAqIG0zMikgKyAobTAwICogbTIxICogbTMyKSwgMywgMSk7XHJcbiAgICAgICAgdGVtcC5zZXQoKG0wMiAqIG0xMSAqIG0zMCkgLSAobTAxICogbTEyICogbTMwKSAtIChtMDIgKiBtMTAgKiBtMzEpICsgKG0wMCAqIG0xMiAqIG0zMSkgKyAobTAxICogbTEwICogbTMyKSAtIChtMDAgKiBtMTEgKiBtMzIpLCAzLCAyKTtcclxuICAgICAgICB0ZW1wLnNldCgobTAxICogbTEyICogbTIwKSAtIChtMDIgKiBtMTEgKiBtMjApICsgKG0wMiAqIG0xMCAqIG0yMSkgLSAobTAwICogbTEyICogbTIxKSAtIChtMDEgKiBtMTAgKiBtMjIpICsgKG0wMCAqIG0xMSAqIG0yMiksIDMsIDMpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgNDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQuc2V0KHRlbXAuZ2V0KGksIGopIC8gZGV0LCBpLCBqKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBtb2RlbChyZXN1bHQgOiBNYXRyaXgsIHRyYW5zbGF0aW9uIDogVmVjdG9yMywgcm90YXRpb24gOiBWZWN0b3IzLCBzY2FsZSA6IFZlY3RvcjMpIDogdm9pZCB7XHJcbiAgICAgICAgLy8gVFJBTlNMQVRJT04gTUFUUklYXHRcclxuICAgICAgICBsZXQgdHJhbnNsYXRpb25NYXRyaXggPSBuZXcgTWF0cml4KDQsIDQpO1xyXG4gICAgICAgIHRoaXMuaWRlbnRpdHkodHJhbnNsYXRpb25NYXRyaXgpO1xyXG4gICAgICAgIHRoaXMudHJhbnNsYXRlKHRyYW5zbGF0aW9uTWF0cml4LCB0cmFuc2xhdGlvbik7XHJcblxyXG4gICAgICAgIC8vIFJPVEFUSU9OIE1BVFJJWFxyXG4gICAgICAgIGxldCByb3RhdGlvbk1hdHJpeCA9IG5ldyBNYXRyaXgoNCwgNCk7XHJcbiAgICAgICAgdGhpcy5pZGVudGl0eShyb3RhdGlvbk1hdHJpeCk7XHJcbiAgICAgICAgdGhpcy5yb3RhdGUocm90YXRpb25NYXRyaXgsIHJvdGF0aW9uKTtcclxuXHJcbiAgICAgICAgLy8gU0NBTElORyBNQVRSSVhcclxuICAgICAgICBsZXQgc2NhbGVNYXRyaXggPSBuZXcgTWF0cml4KDQsIDQpO1xyXG4gICAgICAgIHRoaXMuaWRlbnRpdHkoc2NhbGVNYXRyaXgpO1xyXG4gICAgICAgIHRoaXMuc2NhbGUoc2NhbGVNYXRyaXgsIHNjYWxlKTtcclxuXHJcbiAgICAgICAgLy8gQU5EIE5PVyBNVUxUSVBMWSBUSEVNIFRPR0VUSEVSIElOIFRIRSBDT1JSRUNUIE9SREVSXHJcbiAgICAgICAgbGV0IHRlbXBNYXRyaXggPSBuZXcgTWF0cml4KDQsIDQpO1xyXG4gICAgICAgIHRoaXMubXVsdGlwbHkodGVtcE1hdHJpeCwgdHJhbnNsYXRpb25NYXRyaXgsIHJvdGF0aW9uTWF0cml4KTtcclxuICAgICAgICB0aGlzLm11bHRpcGx5KHJlc3VsdCwgdGVtcE1hdHJpeCwgc2NhbGVNYXRyaXgpO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBtdWx0aXBseShyZXN1bHQgOiBNYXRyaXgsIG1hdDAgOiBNYXRyaXgsIG1hdDEgOiBNYXRyaXgpIDogdm9pZCB7XHJcbiAgICAgICAgLy8gcmVzdWx0IE1JR0hUIEJFIG1hdDAgT1IgbWF0MSBTTyBJVCdTIEJFU1QgSUYgV0VcclxuICAgICAgICAvLyBDQUxDVUxBVEUgVEVNUCBWQUxVRVMgRklSU1QgQkVGT1JFIEFTU0lHTk1FTlRcclxuICAgICAgICBsZXQgcjAwID0gKG1hdDAuZ2V0KDAsIDApICogbWF0MS5nZXQoMCwgMCkpXHJcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDAsIDEpICogbWF0MS5nZXQoMSwgMCkpXHJcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDAsIDIpICogbWF0MS5nZXQoMiwgMCkpXHJcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDAsIDMpICogbWF0MS5nZXQoMywgMCkpO1xyXG4gICAgICAgIGxldCByMTAgPSAobWF0MC5nZXQoMSwgMCkgKiBtYXQxLmdldCgwLCAwKSlcclxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMSwgMSkgKiBtYXQxLmdldCgxLCAwKSlcclxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMSwgMikgKiBtYXQxLmdldCgyLCAwKSlcclxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMSwgMykgKiBtYXQxLmdldCgzLCAwKSk7XHJcbiAgICAgICAgbGV0IHIyMCA9IChtYXQwLmdldCgyLCAwKSAqIG1hdDEuZ2V0KDAsIDApKVxyXG4gICAgICAgICAgICArIChtYXQwLmdldCgyLCAxKSAqIG1hdDEuZ2V0KDEsIDApKVxyXG4gICAgICAgICAgICArIChtYXQwLmdldCgyLCAyKSAqIG1hdDEuZ2V0KDIsIDApKVxyXG4gICAgICAgICAgICArIChtYXQwLmdldCgyLCAzKSAqIG1hdDEuZ2V0KDMsIDApKTtcclxuICAgICAgICBsZXQgcjMwID0gKG1hdDAuZ2V0KDMsIDApICogbWF0MS5nZXQoMCwgMCkpXHJcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDMsIDEpICogbWF0MS5nZXQoMSwgMCkpXHJcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDMsIDIpICogbWF0MS5nZXQoMiwgMCkpXHJcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDMsIDMpICogbWF0MS5nZXQoMywgMCkpO1xyXG4gICAgICAgIGxldCByMDEgPSAobWF0MC5nZXQoMCwgMCkgKiBtYXQxLmdldCgwLCAxKSlcclxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMCwgMSkgKiBtYXQxLmdldCgxLCAxKSlcclxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMCwgMikgKiBtYXQxLmdldCgyLCAxKSlcclxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMCwgMykgKiBtYXQxLmdldCgzLCAxKSk7XHJcbiAgICAgICAgbGV0IHIxMSA9IChtYXQwLmdldCgxLCAwKSAqIG1hdDEuZ2V0KDAsIDEpKVxyXG4gICAgICAgICAgICArIChtYXQwLmdldCgxLCAxKSAqIG1hdDEuZ2V0KDEsIDEpKVxyXG4gICAgICAgICAgICArIChtYXQwLmdldCgxLCAyKSAqIG1hdDEuZ2V0KDIsIDEpKVxyXG4gICAgICAgICAgICArIChtYXQwLmdldCgxLCAzKSAqIG1hdDEuZ2V0KDMsIDEpKTtcclxuICAgICAgICBsZXQgcjIxID0gKG1hdDAuZ2V0KDIsIDApICogbWF0MS5nZXQoMCwgMSkpXHJcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDIsIDEpICogbWF0MS5nZXQoMSwgMSkpXHJcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDIsIDIpICogbWF0MS5nZXQoMiwgMSkpXHJcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDIsIDMpICogbWF0MS5nZXQoMywgMSkpO1xyXG4gICAgICAgIGxldCByMzEgPSAobWF0MC5nZXQoMywgMCkgKiBtYXQxLmdldCgwLCAxKSlcclxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMywgMSkgKiBtYXQxLmdldCgxLCAxKSlcclxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMywgMikgKiBtYXQxLmdldCgyLCAxKSlcclxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMywgMykgKiBtYXQxLmdldCgzLCAxKSk7XHJcbiAgICAgICAgbGV0IHIwMiA9IChtYXQwLmdldCgwLCAwKSAqIG1hdDEuZ2V0KDAsIDIpKVxyXG4gICAgICAgICAgICArIChtYXQwLmdldCgwLCAxKSAqIG1hdDEuZ2V0KDEsIDIpKVxyXG4gICAgICAgICAgICArIChtYXQwLmdldCgwLCAyKSAqIG1hdDEuZ2V0KDIsIDIpKVxyXG4gICAgICAgICAgICArIChtYXQwLmdldCgwLCAzKSAqIG1hdDEuZ2V0KDMsIDIpKTtcclxuICAgICAgICBsZXQgcjEyID0gKG1hdDAuZ2V0KDEsIDApICogbWF0MS5nZXQoMCwgMikpXHJcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDEsIDEpICogbWF0MS5nZXQoMSwgMikpXHJcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDEsIDIpICogbWF0MS5nZXQoMiwgMikpXHJcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDEsIDMpICogbWF0MS5nZXQoMywgMikpO1xyXG4gICAgICAgIGxldCByMjIgPSAobWF0MC5nZXQoMiwgMCkgKiBtYXQxLmdldCgwLCAyKSlcclxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMiwgMSkgKiBtYXQxLmdldCgxLCAyKSlcclxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMiwgMikgKiBtYXQxLmdldCgyLCAyKSlcclxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMiwgMykgKiBtYXQxLmdldCgzLCAyKSk7XHJcbiAgICAgICAgbGV0IHIzMiA9IChtYXQwLmdldCgzLCAwKSAqIG1hdDEuZ2V0KDAsIDIpKVxyXG4gICAgICAgICAgICArIChtYXQwLmdldCgzLCAxKSAqIG1hdDEuZ2V0KDEsIDIpKVxyXG4gICAgICAgICAgICArIChtYXQwLmdldCgzLCAyKSAqIG1hdDEuZ2V0KDIsIDIpKVxyXG4gICAgICAgICAgICArIChtYXQwLmdldCgzLCAzKSAqIG1hdDEuZ2V0KDMsIDIpKTtcclxuICAgICAgICBsZXQgcjAzID0gKG1hdDAuZ2V0KDAsIDApICogbWF0MS5nZXQoMCwgMykpXHJcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDAsIDEpICogbWF0MS5nZXQoMSwgMykpXHJcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDAsIDIpICogbWF0MS5nZXQoMiwgMykpXHJcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDAsIDMpICogbWF0MS5nZXQoMywgMykpO1xyXG4gICAgICAgIGxldCByMTMgPSAobWF0MC5nZXQoMSwgMCkgKiBtYXQxLmdldCgwLCAzKSlcclxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMSwgMSkgKiBtYXQxLmdldCgxLCAzKSlcclxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMSwgMikgKiBtYXQxLmdldCgyLCAzKSlcclxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMSwgMykgKiBtYXQxLmdldCgzLCAzKSk7XHJcbiAgICAgICAgbGV0IHIyMyA9IChtYXQwLmdldCgyLCAwKSAqIG1hdDEuZ2V0KDAsIDMpKVxyXG4gICAgICAgICAgICArIChtYXQwLmdldCgyLCAxKSAqIG1hdDEuZ2V0KDEsIDMpKVxyXG4gICAgICAgICAgICArIChtYXQwLmdldCgyLCAyKSAqIG1hdDEuZ2V0KDIsIDMpKVxyXG4gICAgICAgICAgICArIChtYXQwLmdldCgyLCAzKSAqIG1hdDEuZ2V0KDMsIDMpKTtcclxuICAgICAgICBsZXQgcjMzID0gKG1hdDAuZ2V0KDMsIDApICogbWF0MS5nZXQoMCwgMykpXHJcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDMsIDEpICogbWF0MS5nZXQoMSwgMykpXHJcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDMsIDIpICogbWF0MS5nZXQoMiwgMykpXHJcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDMsIDMpICogbWF0MS5nZXQoMywgMykpO1xyXG5cclxuICAgICAgICAvLyBOT1cgUFVUIEFMTCBUSEUgQ0FMQ1VMQVRFRCBWQUxVRVMgSU4gVEhFIHJlc3VsdCBNQVRSSVhcclxuICAgICAgICByZXN1bHQuc2V0KHIwMCwgMCwgMCk7XHJcbiAgICAgICAgcmVzdWx0LnNldChyMTAsIDEsIDApO1xyXG4gICAgICAgIHJlc3VsdC5zZXQocjIwLCAyLCAwKTtcclxuICAgICAgICByZXN1bHQuc2V0KHIzMCwgMywgMCk7XHJcbiAgICAgICAgcmVzdWx0LnNldChyMDEsIDAsIDEpO1xyXG4gICAgICAgIHJlc3VsdC5zZXQocjExLCAxLCAxKTtcclxuICAgICAgICByZXN1bHQuc2V0KHIyMSwgMiwgMSk7XHJcbiAgICAgICAgcmVzdWx0LnNldChyMzEsIDMsIDEpO1xyXG4gICAgICAgIHJlc3VsdC5zZXQocjAyLCAwLCAyKTtcclxuICAgICAgICByZXN1bHQuc2V0KHIxMiwgMSwgMik7XHJcbiAgICAgICAgcmVzdWx0LnNldChyMjIsIDIsIDIpO1xyXG4gICAgICAgIHJlc3VsdC5zZXQocjMyLCAzLCAyKTtcclxuICAgICAgICByZXN1bHQuc2V0KHIwMywgMCwgMyk7XHJcbiAgICAgICAgcmVzdWx0LnNldChyMTMsIDEsIDMpO1xyXG4gICAgICAgIHJlc3VsdC5zZXQocjIzLCAyLCAzKTtcclxuICAgICAgICByZXN1bHQuc2V0KHIzMywgMywgMyk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHByb2plY3Rpb24ocmVzdWx0IDogTWF0cml4LCBuZWFyWiA6IG51bWJlciwgZmFyWiA6IG51bWJlciwgdmlld3BvcnRXaWR0aCA6IG51bWJlciwgdmlld3BvcnRIZWlnaHQgOiBudW1iZXIsIGZvdlkgOiBudW1iZXIpIDogdm9pZCB7XHJcbiAgICAgICAgbGV0IGFzcGVjdFJhdGlvID0gdmlld3BvcnRXaWR0aCAvIHZpZXdwb3J0SGVpZ2h0O1xyXG4gICAgICAgIGxldCBmaWVsZE9mVmlld1kgPSB0aGlzLm1hdGguZGVncmVlc1RvUmFkaWFucyhmb3ZZKTtcclxuICAgICAgICBsZXQgZmllbGRPZlZpZXdYID0gMiAqIE1hdGguYXRhbihNYXRoLnRhbihmaWVsZE9mVmlld1kgLyAyKSAqIGFzcGVjdFJhdGlvKTtcclxuXHJcbiAgICAgICAgLy8gV0UnTEwgVVNFIFRIRVNFIEFTIFNIT1JUSEFORCBGT1IgTE9BRElORyBPVVIgTUFUUklYXHJcbiAgICAgICAgbGV0IG4gPSBuZWFyWjtcclxuICAgICAgICBsZXQgZiA9IGZhclo7XHJcbiAgICAgICAgbGV0IHIgPSBNYXRoLnRhbihmaWVsZE9mVmlld1ggLyAyKSAqIG47XHJcbiAgICAgICAgbGV0IHQgPSBNYXRoLnRhbihmaWVsZE9mVmlld1kgLyAyKSAqIG47XHJcblxyXG4gICAgICAgIC8vIDAtM1xyXG4gICAgICAgIHJlc3VsdC5zZXQobiAvIHIsIDAsIDApO1xyXG4gICAgICAgIHJlc3VsdC5zZXQoMC4wLCAwLCAxKTtcclxuICAgICAgICByZXN1bHQuc2V0KDAuMCwgMCwgMik7XHJcbiAgICAgICAgcmVzdWx0LnNldCgwLjAsIDAsIDMpO1xyXG4gICAgICAgIC8vIDQtN1xyXG4gICAgICAgIHJlc3VsdC5zZXQoMC4wLCAxLCAwKTtcclxuICAgICAgICByZXN1bHQuc2V0KG4gLyB0LCAxLCAxKTtcclxuICAgICAgICByZXN1bHQuc2V0KDAuMCwgMSwgMik7XHJcbiAgICAgICAgcmVzdWx0LnNldCgwLjAsIDEsIDMpO1xyXG4gICAgICAgIC8vIDgtMTFcclxuICAgICAgICByZXN1bHQuc2V0KDAuMCwgMiwgMCk7XHJcbiAgICAgICAgcmVzdWx0LnNldCgwLjAsIDIsIDEpO1xyXG4gICAgICAgIHJlc3VsdC5zZXQoKC0oZiArIG4pKSAvIChmIC0gbiksIDIsIDIpO1xyXG4gICAgICAgIHJlc3VsdC5zZXQoKC0yICogZiAqIG4pIC8gKGYgLSBuKSwgMiwgMyk7XHJcbiAgICAgICAgLy8gMTItMTUgXHJcbiAgICAgICAgcmVzdWx0LnNldCgwLjAsIDMsIDApO1xyXG4gICAgICAgIHJlc3VsdC5zZXQoMC4wLCAzLCAxKTtcclxuICAgICAgICByZXN1bHQuc2V0KC0xLjAsIDMsIDIpO1xyXG4gICAgICAgIHJlc3VsdC5zZXQoMC4wLCAzLCAzKTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gcm90YXRlKHJlc3VsdCA6IE1hdHJpeCwgcm90YXRpb25WZWN0b3IgOiBWZWN0b3IzKSA6IHZvaWQge1xyXG4gICAgICAgIC8vIFNUQVJUIFdJVEggVEhFIFgtQVhJUyBST1RBVElPTlxyXG4gICAgICAgIGxldCB4Um90YXRpb25NYXRyaXggPSBuZXcgTWF0cml4KDQsIDQpO1xyXG4gICAgICAgIHRoaXMuaWRlbnRpdHkoeFJvdGF0aW9uTWF0cml4KTtcclxuICAgICAgICBsZXQgdGhldGFYID0gcm90YXRpb25WZWN0b3IuZ2V0VGhldGFYKCk7XHJcbiAgICAgICAgeFJvdGF0aW9uTWF0cml4LnNldChNYXRoLmNvcyh0aGV0YVgpLCAxLCAxKTtcclxuICAgICAgICB4Um90YXRpb25NYXRyaXguc2V0KE1hdGguc2luKHRoZXRhWCksIDIsIDEpO1xyXG4gICAgICAgIHhSb3RhdGlvbk1hdHJpeC5zZXQoLTEgKiBNYXRoLnNpbih0aGV0YVgpLCAxLCAyKTtcclxuICAgICAgICB4Um90YXRpb25NYXRyaXguc2V0KE1hdGguY29zKHRoZXRhWCksIDIsIDIpO1xyXG5cclxuICAgICAgICAvLyBTVEFSVCBXSVRIIFRIRSBZLUFYSVMgUk9UQVRJT05cclxuICAgICAgICBsZXQgeVJvdGF0aW9uTWF0cml4ID0gbmV3IE1hdHJpeCg0LCA0KTtcclxuICAgICAgICB0aGlzLmlkZW50aXR5KHlSb3RhdGlvbk1hdHJpeCk7XHJcbiAgICAgICAgbGV0IHRoZXRhWSA9IHJvdGF0aW9uVmVjdG9yLmdldFRoZXRhWSgpO1xyXG4gICAgICAgIHlSb3RhdGlvbk1hdHJpeC5zZXQoTWF0aC5jb3ModGhldGFZKSwgMCwgMCk7XHJcbiAgICAgICAgeVJvdGF0aW9uTWF0cml4LnNldCgtMSAqIE1hdGguc2luKHRoZXRhWSksIDIsIDApO1xyXG4gICAgICAgIHlSb3RhdGlvbk1hdHJpeC5zZXQoTWF0aC5zaW4odGhldGFZKSwgMCwgMik7XHJcbiAgICAgICAgeVJvdGF0aW9uTWF0cml4LnNldChNYXRoLmNvcyh0aGV0YVkpLCAyLCAyKTtcclxuXHJcbiAgICAgICAgLy8gU1RBUlQgV0lUSCBUSEUgWi1BWElTIFJPVEFUSU9OXHJcbiAgICAgICAgbGV0IHpSb3RhdGlvbk1hdHJpeCA9IG5ldyBNYXRyaXgoNCwgNCk7XHJcbiAgICAgICAgdGhpcy5pZGVudGl0eSh6Um90YXRpb25NYXRyaXgpO1xyXG4gICAgICAgIGxldCB0aGV0YVogPSByb3RhdGlvblZlY3Rvci5nZXRUaGV0YVooKTtcclxuICAgICAgICB6Um90YXRpb25NYXRyaXguc2V0KE1hdGguY29zKHRoZXRhWiksIDAsIDApO1xyXG4gICAgICAgIHpSb3RhdGlvbk1hdHJpeC5zZXQoTWF0aC5zaW4odGhldGFaKSwgMSwgMCk7XHJcbiAgICAgICAgelJvdGF0aW9uTWF0cml4LnNldCgtMSAqIE1hdGguc2luKHRoZXRhWiksIDAsIDEpO1xyXG4gICAgICAgIHpSb3RhdGlvbk1hdHJpeC5zZXQoTWF0aC5jb3ModGhldGFaKSwgMSwgMSk7XHJcblxyXG4gICAgICAgIC8vIFNUQVJUIFdJVEggVEhFIFgtQVhJUyBST1RBVElPTlxyXG4gICAgICAgIGxldCB0ZW1wTWF0cml4ID0gbmV3IE1hdHJpeCg0LCA0KTtcclxuICAgICAgICB0aGlzLmlkZW50aXR5KHRlbXBNYXRyaXgpO1xyXG4gICAgICAgIHRoaXMubXVsdGlwbHkodGVtcE1hdHJpeCwgeFJvdGF0aW9uTWF0cml4LCB5Um90YXRpb25NYXRyaXgpO1xyXG4gICAgICAgIHRoaXMubXVsdGlwbHkocmVzdWx0LCB0ZW1wTWF0cml4LCB6Um90YXRpb25NYXRyaXgpO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBzY2FsZShyZXN1bHQgOiBNYXRyaXgsIHNjYWxlVmVjdG9yIDogVmVjdG9yMykgOiB2b2lkIHtcclxuICAgICAgICAvLyBTVEFSVCBXSVRIIFRIRSBJREVOVElUWSBNQVRSSVhcclxuICAgICAgICB0aGlzLmlkZW50aXR5KHJlc3VsdCwgc2NhbGVWZWN0b3IpO1xyXG5cclxuICAgICAgICAvLyBBTkQgVEhFTiBMT0FEIElOIFRIRSBUUkFOU0xBVElPTiBWQUxVRVNcclxuICAgICAgICByZXN1bHQuc2V0KHNjYWxlVmVjdG9yLmdldFgoKSwgMCwgMCk7XHJcbiAgICAgICAgcmVzdWx0LnNldChzY2FsZVZlY3Rvci5nZXRZKCksIDEsIDEpO1xyXG4gICAgICAgIHJlc3VsdC5zZXQoc2NhbGVWZWN0b3IuZ2V0WigpLCAyLCAyKTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtKHJlc3VsdCA6IFZlY3RvcjMsIG1hdCA6IE1hdHJpeCwgdmVjIDogVmVjdG9yMykgOiB2b2lkIHtcclxuICAgICAgICByZXN1bHQuc2V0WCgobWF0LmdldCgwLCAwKSAqIHZlYy5nZXRYKCkpICsgKG1hdC5nZXQoMCwgMSkgKiB2ZWMuZ2V0WSgpKSArIChtYXQuZ2V0KDAsIDIpICogdmVjLmdldFooKSkgKyAobWF0LmdldCgwLCAzKSAqIHZlYy5nZXRXKCkpKTtcclxuICAgICAgICByZXN1bHQuc2V0WSgobWF0LmdldCgxLCAwKSAqIHZlYy5nZXRYKCkpICsgKG1hdC5nZXQoMSwgMSkgKiB2ZWMuZ2V0WSgpKSArIChtYXQuZ2V0KDEsIDIpICogdmVjLmdldFooKSkgKyAobWF0LmdldCgxLCAzKSAqIHZlYy5nZXRXKCkpKTtcclxuICAgICAgICByZXN1bHQuc2V0WigobWF0LmdldCgyLCAwKSAqIHZlYy5nZXRYKCkpICsgKG1hdC5nZXQoMiwgMSkgKiB2ZWMuZ2V0WSgpKSArIChtYXQuZ2V0KDIsIDIpICogdmVjLmdldFooKSkgKyAobWF0LmdldCgyLCAzKSAqIHZlYy5nZXRXKCkpKTtcclxuICAgICAgICByZXN1bHQuc2V0VygobWF0LmdldCgzLCAwKSAqIHZlYy5nZXRYKCkpICsgKG1hdC5nZXQoMywgMSkgKiB2ZWMuZ2V0WSgpKSArIChtYXQuZ2V0KDMsIDIpICogdmVjLmdldFooKSkgKyAobWF0LmdldCgzLCAzKSAqIHZlYy5nZXRXKCkpKTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlKHJlc3VsdCA6IE1hdHJpeCwgdHJhbnNsYXRpb25WZWN0b3IgOiBWZWN0b3IzKSA6IHZvaWQge1xyXG4gICAgICAgIC8vIFNUQVJUIFdJVEggVEhFIElERU5USVRZIE1BVFJJWFxyXG4gICAgICAgIHRoaXMuaWRlbnRpdHkocmVzdWx0KTtcclxuXHJcbiAgICAgICAgLy8gQU5EIFRIRU4gTE9BRCBJTiBUSEUgVFJBTlNMQVRJT04gVkFMVUVTXHJcbiAgICAgICAgcmVzdWx0LnNldCh0cmFuc2xhdGlvblZlY3Rvci5nZXRYKCksIDAsIDMpO1xyXG4gICAgICAgIHJlc3VsdC5zZXQodHJhbnNsYXRpb25WZWN0b3IuZ2V0WSgpLCAxLCAzKTtcclxuICAgICAgICByZXN1bHQuc2V0KHRyYW5zbGF0aW9uVmVjdG9yLmdldFooKSwgMiwgMyk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHRyYW5zcG9zZShyZXN1bHQgOiBNYXRyaXgsIG1hdCA6IE1hdHJpeCkgOiB2b2lkIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDQ7IGorKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHRlbXAgPSBtYXQuZ2V0KGksIGopO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnNldCh0ZW1wLCBqLCBpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gdmlldyhyZXN1bHQgOiBNYXRyaXgsIGNhbWVyYVBvc2l0aW9uIDogVmVjdG9yMywgY2FtZXJhT3JpZW50YXRpb24gOiBWZWN0b3IzKSA6IHZvaWQge1xyXG4gICAgICAgIGxldCBwaXRjaCA9IHRoaXMubWF0aC5kZWdyZWVzVG9SYWRpYW5zKGNhbWVyYU9yaWVudGF0aW9uLmdldFRoZXRhWCgpKTtcclxuICAgICAgICBsZXQgeWF3ID0gdGhpcy5tYXRoLmRlZ3JlZXNUb1JhZGlhbnMoY2FtZXJhT3JpZW50YXRpb24uZ2V0VGhldGFZKCkpO1xyXG4gICAgICAgIGxldCByb2xsID0gdGhpcy5tYXRoLmRlZ3JlZXNUb1JhZGlhbnMoY2FtZXJhT3JpZW50YXRpb24uZ2V0VGhldGFaKCkpO1xyXG5cclxuICAgICAgICAvLyBUTyBUUkFOU0xBVEVcclxuICAgICAgICBsZXQgdHJhbnNsYXRlVmVjdG9yID0gdGhpcy5tYXRoLnZlY3Rvck1hdGguY3JlYXRlUG9zaXRpb25WZWN0b3IoKTtcclxuICAgICAgICB0cmFuc2xhdGVWZWN0b3Iuc2V0KC1jYW1lcmFQb3NpdGlvbi5nZXRYKCksIC1jYW1lcmFQb3NpdGlvbi5nZXRZKCksIC1jYW1lcmFQb3NpdGlvbi5nZXRaKCkpO1xyXG4gICAgICAgIGxldCB0cmFuc2xhdGVNYXRyaXggPSBuZXcgTWF0cml4KDQsIDQpO1xyXG4gICAgICAgIHRoaXMuaWRlbnRpdHkodHJhbnNsYXRlTWF0cml4KTtcclxuICAgICAgICB0aGlzLnRyYW5zbGF0ZSh0cmFuc2xhdGVNYXRyaXgsIHRyYW5zbGF0ZVZlY3Rvcik7XHJcblxyXG4gICAgICAgIC8vIFRPIFJPVEFURVxyXG4gICAgICAgIGxldCByb3RhdGVWZWN0b3IgPSB0aGlzLm1hdGgudmVjdG9yTWF0aC5jcmVhdGVSb3RhdGlvblZlY3RvcigpO1xyXG4gICAgICAgIHJvdGF0ZVZlY3Rvci5zZXQoLXBpdGNoLCAteWF3LCAtcm9sbCk7XHJcbiAgICAgICAgbGV0IHJvdGF0ZU1hdHJpeCA9IG5ldyBNYXRyaXgoNCwgNCk7XHJcbiAgICAgICAgdGhpcy5yb3RhdGUocm90YXRlTWF0cml4LCByb3RhdGVWZWN0b3IpO1xyXG5cclxuICAgICAgICAvLyBOT1cgQ09NQklORSBUSEUgMiBNQVRSSUNFU1xyXG4gICAgICAgIHRoaXMubXVsdGlwbHkocmVzdWx0LCByb3RhdGVNYXRyaXgsIHRyYW5zbGF0ZU1hdHJpeCk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGFkZFZlY3RvcnMocmVzdWx0IDogVmVjdG9yMywgdmVjMCA6IFZlY3RvcjMsIHZlYzEgOiBWZWN0b3IzKSA6IHZvaWQge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVjMC5nZXRTaXplKCk7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgdG90YWwgPSB2ZWMwLmdldEF0KGkpICsgdmVjMS5nZXRBdChpKTtcclxuICAgICAgICAgICAgcmVzdWx0LnNldEF0KGksIHRvdGFsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyb3NzUHJvZHVjdChyZXN1bHQgOiBWZWN0b3IzLCB2ZWMwIDogVmVjdG9yMywgdmVjMSA6IFZlY3RvcjMpIDogdm9pZCB7XHJcbiAgICAgICAgbGV0IHJlc3VsdDAgPSAodmVjMC5nZXRZKCkgKiB2ZWMxLmdldFooKSlcclxuICAgICAgICAgICAgLSAodmVjMS5nZXRZKCkgKiB2ZWMwLmdldFooKSk7XHJcbiAgICAgICAgbGV0IHJlc3VsdDEgPSAodmVjMC5nZXRaKCkgKiB2ZWMxLmdldFgoKSlcclxuICAgICAgICAgICAgLSAodmVjMS5nZXRaKCkgKiB2ZWMwLmdldFgoKSk7XHJcbiAgICAgICAgbGV0IHJlc3VsdDIgPSAodmVjMC5nZXRYKCkgKiB2ZWMxLmdldFkoKSlcclxuICAgICAgICAgICAgLSAodmVjMS5nZXRYKCkgKiB2ZWMwLmdldFkoKSk7XHJcbiAgICAgICAgcmVzdWx0LnNldFgocmVzdWx0MCk7XHJcbiAgICAgICAgcmVzdWx0LnNldFkocmVzdWx0MSk7XHJcbiAgICAgICAgcmVzdWx0LnNldFoocmVzdWx0Mik7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGRvdFByb2R1Y3QodmVjMCA6IFZlY3RvcjMsIHZlYzEgOiBWZWN0b3IzKSA6IG51bWJlciB7XHJcbiAgICAgICAgbGV0IHJlc3VsdFggPSB2ZWMwLmdldFgoKSAqIHZlYzEuZ2V0WCgpO1xyXG4gICAgICAgIGxldCByZXN1bHRZID0gdmVjMC5nZXRZKCkgKiB2ZWMxLmdldFkoKTtcclxuICAgICAgICBsZXQgcmVzdWx0WiA9IHZlYzAuZ2V0WigpICogdmVjMS5nZXRaKCk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFggKyByZXN1bHRZICsgcmVzdWx0WjtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gbXVsdGlwbHlWZWN0b3JzKHJlc3VsdCA6IFZlY3RvcjMsIHZlYyA6IFZlY3RvcjMsIHNjYWxhciA6IG51bWJlcikgOiB2b2lkIHtcclxuICAgICAgICBsZXQgdmVjWCA9IHZlYy5nZXRYKCkgKiBzY2FsYXI7XHJcbiAgICAgICAgbGV0IHZlY1kgPSB2ZWMuZ2V0WSgpICogc2NhbGFyO1xyXG4gICAgICAgIGxldCB2ZWNaID0gdmVjLmdldFooKSAqIHNjYWxhcjtcclxuICAgICAgICByZXN1bHQuc2V0WCh2ZWNYKTtcclxuICAgICAgICByZXN1bHQuc2V0WSh2ZWNZKTtcclxuICAgICAgICByZXN1bHQuc2V0Wih2ZWNaKTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplKHJlc3VsdCA6IFZlY3RvcjMsIHZlYyA6IFZlY3RvcjMpIDogdm9pZCB7XHJcbiAgICAgICAgbGV0IHhTcXVhcmVkID0gdmVjLmdldFgoKSAqIHZlYy5nZXRYKCk7XHJcbiAgICAgICAgbGV0IHlTcXVhcmVkID0gdmVjLmdldFkoKSAqIHZlYy5nZXRZKCk7XHJcbiAgICAgICAgbGV0IHpTcXVhcmVkID0gdmVjLmdldFooKSAqIHZlYy5nZXRaKCk7XHJcbiAgICAgICAgbGV0IGRpc3RhbmNlID0gTWF0aC5zcXJ0KHhTcXVhcmVkICsgeVNxdWFyZWQgKyB6U3F1YXJlZCk7XHJcbiAgICAgICAgcmVzdWx0LnNldFgodmVjLmdldFgoKSAvIGRpc3RhbmNlKTtcclxuICAgICAgICByZXN1bHQuc2V0WSh2ZWMuZ2V0WSgpIC8gZGlzdGFuY2UpO1xyXG4gICAgICAgIHJlc3VsdC5zZXRaKHZlYy5nZXRaKCkgLyBkaXN0YW5jZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHN1YnRyYWN0VmVjdG9ycyhyZXN1bHQgOiBWZWN0b3IzLCB2ZWMwIDogVmVjdG9yMywgdmVjMSA6IFZlY3RvcjMpIDogdm9pZCB7XHJcbiAgICAgICAgbGV0IHJlc3VsdFggPSB2ZWMwLmdldFgoKSAtIHZlYzEuZ2V0WCgpO1xyXG4gICAgICAgIGxldCByZXN1bHRZID0gdmVjMC5nZXRZKCkgLSB2ZWMxLmdldFkoKTtcclxuICAgICAgICBsZXQgcmVzdWx0WiA9IHZlYzAuZ2V0WigpIC0gdmVjMS5nZXRaKCk7XHJcbiAgICAgICAgcmVzdWx0LnNldFgocmVzdWx0WCk7XHJcbiAgICAgICAgcmVzdWx0LnNldFkocmVzdWx0WSk7XHJcbiAgICAgICAgcmVzdWx0LnNldFoocmVzdWx0Wik7XHJcbiAgICB9XHJcbn0iLCIvKlxyXG4gKiBBIE1hdHJpeCBpcyB1c2VkIGZvciB0cmFuc2Zvcm1pbmcgcG9pbnRzIGZyb20gbG9jYWxcclxuICogY29vcmRpbmF0ZXMgdG8gd29ybGQgY29vcmRpbmF0ZXMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTWF0cml4IHtcclxuICAgIHByaXZhdGUgbWF0IDogRmxvYXQzMkFycmF5O1xyXG4gICAgcHJpdmF0ZSByb3dzIDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBjb2x1bW5zIDogbnVtYmVyO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihyb3dzIDogbnVtYmVyLCBjb2x1bW5zIDogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5yb3dzID0gcm93cztcclxuICAgICAgICB0aGlzLmNvbHVtbnMgPSBjb2x1bW5zO1xyXG4gICAgICAgIHRoaXMubWF0ID0gbmV3IEZsb2F0MzJBcnJheShyb3dzICogY29sdW1ucyk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAocm93cyAqIGNvbHVtbnMpOyBpKyspXHJcbiAgICAgICAgICAgIHRoaXMubWF0W2ldID0gMC4wO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXREYXRhKCkgOiBGbG9hdDMyQXJyYXkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1hdDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0Um93cygpIDogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yb3dzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRDb2x1bW5zKCkgOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbHVtbnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEluZGV4IChyb3dzIDogbnVtYmVyLCBjb2x1bW5zIDogbnVtYmVyKSA6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnJvd3MgKiBjb2x1bW5zKSArIHJvd3M7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBnZXQgKHJvdyA6IG51bWJlciwgY29sdW1uIDogbnVtYmVyKSA6IG51bWJlciB7XHJcbiAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5nZXRJbmRleChyb3csIGNvbHVtbik7XHJcbiAgICAgICAgbGV0IHZhbHVlVG9SZXR1cm4gPSB0aGlzLm1hdFtpbmRleF07XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlVG9SZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCAodmFsdWUgOiBudW1iZXIsIHJvdyA6IG51bWJlciwgY29sdW1uIDogbnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5nZXRJbmRleChyb3csIGNvbHVtbik7XHJcbiAgICAgICAgdGhpcy5tYXRbaW5kZXhdID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBwcmludCAoKSA6IHZvaWQge1xyXG4gICAgICAgIGxldCBtYXhXaWR0aCA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCA0OyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCB0ZXN0TnVtID0gdGhpcy5nZXQoaiwgaSkgKyBcIlwiO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRlc3ROdW0ubGVuZ3RoID4gbWF4V2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXhXaWR0aCA9IHRlc3ROdW0ubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCB0ZXh0ID0gXCJbIFwiO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yb3dzOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGkgPiAwKVxyXG4gICAgICAgICAgICAgICAgdGV4dCArPSBcIiAgXCI7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy5jb2x1bW5zOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBudW1UZXh0ID0gdGhpcy5nZXQoaSwgaikgKyBcIlwiO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG51bVRleHQubGVuZ3RoIDwgbWF4V2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBudW1UZXh0ID0gXCIgXCIgKyBudW1UZXh0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGV4dCArPSBudW1UZXh0O1xyXG4gICAgICAgICAgICAgICAgaWYgKGogPCAodGhpcy5jb2x1bW5zIC0gMSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9IFwiLFwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGV4dCArPSBcIiBcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaSA8ICh0aGlzLnJvd3MgLSAxKSkge1xyXG4gICAgICAgICAgICAgICAgdGV4dCArPSBcIlxcblwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRleHQgKz0gXCJdXCI7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRleHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8qKlxyXG4gKiBWZWN0b3IzXHJcbiAqIFxyXG4gKiBUaGUgVmVjdG9yMyBjbGFzcyBjYW4gYmUgdXNlZCBmb3IgYW55IDJkIG9yIDNkIHBvaW50LCB2ZWN0b3IsIFxyXG4gKiBvciByb3RhdGlvbiAoaS5lLiBhbmdsZXMgb2Ygb3JpZW50YXRpb24pLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFZlY3RvcjMge1xyXG4gICAgcHJpdmF0ZSB2ZWMgOiBGbG9hdDMyQXJyYXk7XHJcbiAgICBwcml2YXRlIHNpemUgOiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMudmVjID0gbmV3IEZsb2F0MzJBcnJheSg0KTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKylcclxuICAgICAgICAgICAgdGhpcy52ZWNbaV0gPSAwLjA7XHJcbiAgICAgICAgdGhpcy5zaXplID0gNDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0U2l6ZSgpIDogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaXplO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRBdChpbmRleCA6IG51bWJlcikgOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZlY1tpbmRleF07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFgoKSA6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmVjWzBdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRZKCkgOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnZlY1sxXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0WigpIDogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy52ZWNbMl07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFcoKSA6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmVjWzNdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRUaGV0YVgoKSA6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmVjWzBdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRUaGV0YVkoKSA6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmVjWzFdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRUaGV0YVooKSA6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmVjWzJdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQoaW5pdDAgOiBudW1iZXIsIGluaXQxIDogbnVtYmVyLCBpbml0MiA6IG51bWJlciwgaW5pdDMgOiBudW1iZXIpIDogdm9pZCB7XHJcbiAgICAgICAgdGhpcy52ZWNbMF0gPSBpbml0MDtcclxuICAgICAgICB0aGlzLnZlY1sxXSA9IGluaXQxO1xyXG4gICAgICAgIHRoaXMudmVjWzJdID0gaW5pdDI7XHJcbiAgICAgICAgdGhpcy52ZWNbM10gPSBpbml0MztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0QXQoaW5kZXggOiBudW1iZXIsIHZhbHVlIDogbnVtYmVyKSA6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudmVjW2luZGV4XSA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRYKGluaXRYIDogbnVtYmVyKSA6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudmVjWzBdID0gaW5pdFg7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFkoaW5pdFkgOiBudW1iZXIpIDogdm9pZCB7XHJcbiAgICAgICAgdGhpcy52ZWNbMV0gPSBpbml0WTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0Wihpbml0WiA6IG51bWJlcikgOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnZlY1syXSA9IGluaXRaO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRXKGluaXRXIDogbnVtYmVyKSA6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudmVjWzNdID0gaW5pdFc7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldFRoZXRhWChpbml0VGhldGFYIDogbnVtYmVyKSA6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2V0WChpbml0VGhldGFYKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0VGhldGFZKGluaXRUaGV0YVkgOiBudW1iZXIpIDogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZXRZKGluaXRUaGV0YVkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRUaGV0YVooaW5pdFRoZXRhWiA6IG51bWJlcikgOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNldFooaW5pdFRoZXRhWik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHByaW50KCkgOiB2b2lkIHtcclxuICAgICAgICBsZXQgdGV4dCA9IFwiW1wiO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zaXplOyBpKyspIHtcclxuICAgICAgICAgICAgdGV4dCArPSB0aGlzLnZlY1tpXTtcclxuICAgICAgICAgICAgaWYgKGkgPCAodGhpcy5zaXplIC0gMSkpIHtcclxuICAgICAgICAgICAgICAgIHRleHQgKz0gXCIsIFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRleHQgKz0gXCJdXCI7XHJcbiAgICAgICAgY29uc29sZS5sb2codGV4dCk7XHJcbiAgICB9XHJcbn0iLCIvKlxyXG4gKiBUaGlzIGNsYXNzIHJlbmRlcnMgdGV4dCB0byBhIGNhbnZhcywgdXBkYXRlZCBlYWNoIGZyYW1lLlxyXG4gKi9cclxuaW1wb3J0IHtIYXNoVGFibGV9IGZyb20gJy4uL2RhdGEvSGFzaFRhYmxlJ1xyXG5cclxuZXhwb3J0IGNsYXNzIFRleHRUb1JlbmRlciB7XHJcbiAgICBwdWJsaWMgaWQgOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgdGV4dCA6IHN0cmluZztcclxuICAgIHB1YmxpYyB4IDogbnVtYmVyO1xyXG4gICAgcHVibGljIHkgOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgdXBkYXRlIDogRnVuY3Rpb247XHJcbiAgICBwdWJsaWMgZm9udEZhbWlseSA6IHN0cmluZztcclxuICAgIHB1YmxpYyBmb250U2l6ZSA6IG51bWJlcjtcclxuICAgIHB1YmxpYyBmb250Q29sb3IgOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgcHJvcGVydGllcyA6IEhhc2hUYWJsZTxvYmplY3Q+O1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihpbml0SWQgOiBzdHJpbmcsIGluaXRUZXh0IDogc3RyaW5nLCBpbml0WCA6IG51bWJlciwgaW5pdFkgOiBudW1iZXIsIGluaXRVcGRhdGUgOiBGdW5jdGlvbikge1xyXG4gICAgICAgIHRoaXMuaWQgPSBpbml0SWQ7XHJcbiAgICAgICAgdGhpcy50ZXh0ID0gaW5pdFRleHQ7XHJcbiAgICAgICAgdGhpcy54ID0gaW5pdFg7XHJcbiAgICAgICAgdGhpcy55ID0gaW5pdFk7XHJcbiAgICAgICAgdGhpcy51cGRhdGUgPSBpbml0VXBkYXRlO1xyXG4gICAgICAgIHRoaXMuZm9udEZhbWlseSA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5mb250U2l6ZSA9IDA7XHJcbiAgICAgICAgdGhpcy5mb250Q29sb3IgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMucHJvcGVydGllcyA9IHt9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVGV4dFJlbmRlcmVyIHtcclxuICAgIHByaXZhdGUgdGV4dFRvUmVuZGVyIDogQXJyYXk8VGV4dFRvUmVuZGVyPjtcclxuICAgIHByaXZhdGUgdGV4dENhbnZhcyA6IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSB0ZXh0Q2FudmFzV2lkdGggOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHRleHRDYW52YXNIZWlnaHQgOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIHRleHRDdHggOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XHJcbiAgICBwcml2YXRlIGRlZmF1bHRGb250RmFtaWx5IDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBkZWZhdWx0Rm9udFNpemUgOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGRlZmF1bHRGb250Q29sb3IgOiBzdHJpbmc7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHRleHRDYW52YXNJZCA6IHN0cmluZywgaW5pdEZvbnRGYW1pbHkgOiBzdHJpbmcsIGluaXRGb250U2l6ZSA6IG51bWJlciwgaW5pdEZvbnRDb2xvciA6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMudGV4dFRvUmVuZGVyID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgdGhpcy50ZXh0Q2FudmFzID0gPEhUTUxDYW52YXNFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRleHRDYW52YXNJZCk7XHJcbiAgICAgICAgdGhpcy50ZXh0Q2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICAgICAgdGhpcy50ZXh0Q2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgICAgICB0aGlzLnRleHRDYW52YXNXaWR0aCA9IHRoaXMudGV4dENhbnZhcy53aWR0aDtcclxuICAgICAgICB0aGlzLnRleHRDYW52YXNIZWlnaHQgPSB0aGlzLnRleHRDYW52YXMuaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMudGV4dEN0eCA9IHRoaXMudGV4dENhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0Rm9udEZhbWlseSA9IGluaXRGb250RmFtaWx5O1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdEZvbnRTaXplID0gaW5pdEZvbnRTaXplO1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdEZvbnRDb2xvciA9IGluaXRGb250Q29sb3I7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBhZGRUZXh0VG9SZW5kZXIodGV4dFRvQWRkIDogVGV4dFRvUmVuZGVyKSA6IHZvaWQge1xyXG4gICAgICAgIHRleHRUb0FkZC5mb250RmFtaWx5ID0gdGhpcy5kZWZhdWx0Rm9udEZhbWlseTtcclxuICAgICAgICB0ZXh0VG9BZGQuZm9udFNpemUgPSB0aGlzLmRlZmF1bHRGb250U2l6ZTtcclxuICAgICAgICB0ZXh0VG9BZGQuZm9udENvbG9yID0gdGhpcy5kZWZhdWx0Rm9udENvbG9yO1xyXG4gICAgICAgIHRoaXMudGV4dFRvUmVuZGVyLnB1c2godGV4dFRvQWRkKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xlYXIoKSA6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudGV4dFRvUmVuZGVyID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldENhbnZhc1dpZHRoKCkgOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRleHRDYW52YXNXaWR0aDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0Q2FudmFzSGVpZ2h0KCkgOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRleHRDYW52YXNIZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbmRlcigpIDogdm9pZCB7XHJcbiAgICAgICAgdGhpcy50ZXh0Q3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLnRleHRDYW52YXMud2lkdGgsIHRoaXMudGV4dENhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50ZXh0VG9SZW5kZXIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIHRleHRUb1JlbmRlciA9IHRoaXMudGV4dFRvUmVuZGVyW2ldO1xyXG4gICAgICAgICAgICB0ZXh0VG9SZW5kZXIudXBkYXRlKCk7XHJcbiAgICAgICAgICAgIHRoaXMudGV4dEN0eC5mb250ID0gXCJcIiArIHRleHRUb1JlbmRlci5mb250U2l6ZSArIFwicHggXCIgKyB0ZXh0VG9SZW5kZXIuZm9udEZhbWlseTtcclxuICAgICAgICAgICAgdGhpcy50ZXh0Q3R4LmZpbGxTdHlsZSA9IHRleHRUb1JlbmRlci5mb250Q29sb3I7XHJcbiAgICAgICAgICAgIHRoaXMudGV4dEN0eC5maWxsVGV4dCh0ZXh0VG9SZW5kZXIudGV4dCwgdGV4dFRvUmVuZGVyLngsIHRleHRUb1JlbmRlci55KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge1dlYkdMR2FtZVNoYWRlcn0gZnJvbSAnLi9XZWJHTEdhbWVTaGFkZXInXHJcbmltcG9ydCB7TWF0aFV0aWxpdGllc30gZnJvbSAnLi4vbWF0aC9NYXRoVXRpbGl0aWVzJ1xyXG5pbXBvcnQgeyBNYXRyaXggfSBmcm9tICcuLi9tYXRoL01hdHJpeCdcclxuaW1wb3J0IHsgVmVjdG9yMyB9IGZyb20gJy4uL21hdGgvVmVjdG9yMydcclxuaW1wb3J0IHtBbmltYXRlZFNwcml0ZX0gZnJvbSAnLi4vc2NlbmUvc3ByaXRlL0FuaW1hdGVkU3ByaXRlJ1xyXG5pbXBvcnQge0FuaW1hdGVkU3ByaXRlVHlwZX0gZnJvbSAnLi4vc2NlbmUvc3ByaXRlL0FuaW1hdGVkU3ByaXRlVHlwZSdcclxuaW1wb3J0IHtXZWJHTEdhbWVUZXh0dXJlfSBmcm9tICcuL1dlYkdMR2FtZVRleHR1cmUnXHJcbmltcG9ydCB7SGFzaFRhYmxlfSBmcm9tICcuLi9kYXRhL0hhc2hUYWJsZSdcclxuaW1wb3J0IHsgR3JhZGllbnRDaXJjbGUgfSBmcm9tICcuLi9zY2VuZS9HcmFkaWVudENpcmNsZSc7XHJcblxyXG52YXIgQ2lyY2xlRGVmYXVsdHMgPSB7XHJcbiAgICBBX1BPU0lUSU9OOiBcImFfUG9zaXRpb25cIixcclxuICAgIEFfVkFMVUVUT0lOVEVSUE9MQVRFOiBcImFfVmFsdWVUb0ludGVycG9sYXRlXCIsXHJcbiAgICBVX1NQUklURVRSQU5TRk9STTogXCJ1X1Nwcml0ZVRyYW5zZm9ybVwiLFxyXG4gICAgVkFMOiBcInZhbFwiLFxyXG4gICAgVV9PUFRJT046IFwib3B0aW9uXCIsXHJcbiAgICBOVU1fVkVSVElDRVM6IDQsXHJcbiAgICBGTE9BVFNfUEVSX1ZFUlRFWDogMixcclxuICAgIEZMT0FUU19QRVJfVEVYVFVSRV9DT09SRElOQVRFOiAyLFxyXG4gICAgVkVSVEVYX1BPU0lUSU9OX09GRlNFVDogMCxcclxuICAgIFRPVEFMX0JZVEVTOiAyMCxcclxuICAgIElOREVYX09GX0ZJUlNUX1ZFUlRFWDogMFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgV2ViR0xHYW1lQ2lyY2xlUmVuZGVyZXIge1xyXG4gICAgcHJpdmF0ZSBzaGFkZXIgOiBXZWJHTEdhbWVTaGFkZXI7XHJcbiAgICBwcml2YXRlIHZlcnRleFRleENvb3JkQnVmZmVyIDogV2ViR0xCdWZmZXI7XHJcbiAgICBwcml2YXRlIHZhbEJ1ZmZlciA6IFdlYkdMQnVmZmVyO1xyXG5cclxuICAgIC8vIFdFJ0xMIFVTRSBUSEVTRSBGT1IgVFJBTlNPRk1SSU5HIE9CSkVDVFMgV0hFTiBXRSBEUkFXIFRIRU1cclxuICAgIHByaXZhdGUgc3ByaXRlVHJhbnNmb3JtIDogTWF0cml4O1xyXG4gICAgcHJpdmF0ZSBzcHJpdGVUcmFuc2xhdGUgOiBWZWN0b3IzO1xyXG4gICAgcHJpdmF0ZSBzcHJpdGVSb3RhdGUgOiBWZWN0b3IzO1xyXG4gICAgcHJpdmF0ZSBzcHJpdGVTY2FsZSA6IFZlY3RvcjM7ICAgIFxyXG5cclxuICAgIHByaXZhdGUgd2ViR0xBdHRyaWJ1dGVMb2NhdGlvbnMgOiBIYXNoVGFibGU8R0x1aW50PjtcclxuICAgIHByaXZhdGUgd2ViR0xVbmlmb3JtTG9jYXRpb25zIDogSGFzaFRhYmxlPFdlYkdMVW5pZm9ybUxvY2F0aW9uPjtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKSB7fVxyXG5cclxuICAgIHB1YmxpYyBnZXRTaGFkZXIoKTogV2ViR0xHYW1lU2hhZGVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaGFkZXI7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBpbml0KHdlYkdMIDogV2ViR0xSZW5kZXJpbmdDb250ZXh0KSA6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2hhZGVyID0gbmV3IFdlYkdMR2FtZVNoYWRlcigpO1xyXG5cclxuICAgICAgICB2YXIgZnJhZ21lbnRTaGFkZXJTb3VyY2UgPSBbXHJcbiAgICAgICAgICAgICdwcmVjaXNpb24gaGlnaHAgZmxvYXQ7JyxcclxuICAgICAgICAgICAgJ3VuaWZvcm0gZmxvYXQgb3B0aW9uOycsXHJcbiAgICAgICAgICAgICd2YXJ5aW5nIHZlYzIgdmFsOycsXHJcbiAgICAgICAgICAgICd2b2lkIG1haW4oKSB7JyxcclxuICAgICAgICAgICAgICAgICdmbG9hdCBSID0gMS4wOycsXHJcbiAgICAgICAgICAgICAgICAnZmxvYXQgZGlzdCA9IHNxcnQoZG90KHZhbCwgdmFsKSk7JyxcclxuICAgICAgICAgICAgICAgICdmbG9hdCBhbHBoYSA9IDEuMDsnLFxyXG4gICAgICAgICAgICAgICAgJ2lmIChkaXN0ID4gUikgeycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2Rpc2NhcmQ7JyxcclxuICAgICAgICAgICAgICAgICd9JyxcclxuICAgICAgICAgICAgICAgICdpZiAob3B0aW9uIDwgMS4wKSB7JyxcclxuICAgICAgICAgICAgICAgICAgICAnZ2xfRnJhZ0NvbG9yID0nLCBcclxuICAgICAgICAgICAgICAgICAgICAndmVjNCgwLjAsIDAuMCwgZGlzdCwgYWxwaGEpOycsXHJcbiAgICAgICAgICAgICAgICAnfSBlbHNlIGlmKG9wdGlvbiA8IDIuMCkgeycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2dsX0ZyYWdDb2xvciA9JywgXHJcbiAgICAgICAgICAgICAgICAgICAgJ3ZlYzQoMC4wLCBkaXN0LCAwLjAsIGFscGhhKTsnLFxyXG4gICAgICAgICAgICAgICAgJ30nLFxyXG4gICAgICAgICAgICAgICAgJ2Vsc2UgaWYob3B0aW9uIDwgMy4wKSB7JyxcclxuICAgICAgICAgICAgICAgICAgICAnZ2xfRnJhZ0NvbG9yID0nLCBcclxuICAgICAgICAgICAgICAgICAgICAndmVjNChkaXN0LCAwLjAsIDAuMCwgYWxwaGEpOycsXHJcbiAgICAgICAgICAgICAgICAnfScsXHJcbiAgICAgICAgICAgICAgICAnZWxzZSBpZihvcHRpb24gPCA0LjApIHsnLFxyXG4gICAgICAgICAgICAgICAgICAgICdnbF9GcmFnQ29sb3IgPScsIFxyXG4gICAgICAgICAgICAgICAgICAgICd2ZWM0KGRpc3QsIGRpc3QsIDAuMCwgYWxwaGEpOycsXHJcbiAgICAgICAgICAgICAgICAnfScsXHJcbiAgICAgICAgICAgICAgICAnZWxzZSBpZihvcHRpb24gPCA1LjApIHsnLFxyXG4gICAgICAgICAgICAgICAgICAgICdnbF9GcmFnQ29sb3IgPScsIFxyXG4gICAgICAgICAgICAgICAgICAgICd2ZWM0KGRpc3QsIDAuMCwgZGlzdCwgYWxwaGEpOycsXHJcbiAgICAgICAgICAgICAgICAnfScsXHJcbiAgICAgICAgICAgICAgICAnZWxzZSBpZihvcHRpb24gPCA2LjApIHsnLFxyXG4gICAgICAgICAgICAgICAgICAgICdnbF9GcmFnQ29sb3IgPScsIFxyXG4gICAgICAgICAgICAgICAgICAgICd2ZWM0KDAuMCwgZGlzdCwgZGlzdCwgYWxwaGEpOycsXHJcbiAgICAgICAgICAgICAgICAnfScsXHJcbiAgICAgICAgICAgICd9J1xyXG4gICAgICAgIF0uam9pbignXFxuJyk7XHJcblxyXG4gICAgICAgIHZhciB2ZXJ0ZXhTaGFkZXJTcmMgPSBbXHJcbiAgICAgICAgICAgICdwcmVjaXNpb24gaGlnaHAgZmxvYXQ7JyxcclxuICAgICAgICAgICAgJ2F0dHJpYnV0ZSB2ZWM0IGFfUG9zaXRpb247JyxcclxuICAgICAgICAgICAgJ2F0dHJpYnV0ZSB2ZWMyIGFfVmFsdWVUb0ludGVycG9sYXRlOycsXHJcbiAgICAgICAgICAgICd2YXJ5aW5nIHZlYzIgdmFsOycsICAgIFxyXG4gICAgICAgICAgICAndW5pZm9ybSBtYXQ0IHVfU3ByaXRlVHJhbnNmb3JtOycsXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAndm9pZCBtYWluKCkgeycsXHJcbiAgICAgICAgICAgICAgICAndmFsID0gYV9WYWx1ZVRvSW50ZXJwb2xhdGU7JyxcclxuICAgICAgICAgICAgJyAgICBnbF9Qb3NpdGlvbiA9IHVfU3ByaXRlVHJhbnNmb3JtJyxcclxuICAgICAgICAgICAgJyAgICAgICAgICAgICogYV9Qb3NpdGlvbjsnLFxyXG4gICAgICAgICAgICAnfSdcclxuICAgICAgICBdLmpvaW4oJ1xcbicpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuc2hhZGVyLmluaXQod2ViR0wsIHZlcnRleFNoYWRlclNyYywgZnJhZ21lbnRTaGFkZXJTb3VyY2UpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEdFVCBUSEUgd2ViR0wgT0JKRUNUIFRPIFVTRVxyXG4gICAgICAgIHZhciB2ZXJ0aWNlc1RleENvb3JkcyA9IG5ldyBGbG9hdDMyQXJyYXkoW1xyXG4gICAgICAgICAgICAwLjUsIC0wLjUsIDAuMCwgMS4wLCAtMS4wLFxyXG4gICAgICAgICAgICAwLjUsIDAuNSwgMC4wLCAxLjAsIDEuMCxcclxuICAgICAgICAgICAgLTAuNSwwLjUsMC4wLC0xLjAsIDEuMCxcclxuICAgICAgICAgICAgLTAuNSwtMC41LDAuMCwtMS4wLC0xLjAsXHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgICAgIC8vIENSRUFURSBUSEUgQlVGRkVSIE9OIFRIRSBHUFVcclxuICAgICAgICB0aGlzLnZlcnRleFRleENvb3JkQnVmZmVyID0gd2ViR0wuY3JlYXRlQnVmZmVyKCk7XHJcbiAgICAgICAgdGhpcy52YWxCdWZmZXIgPSB3ZWJHTC5jcmVhdGVCdWZmZXIoKTtcclxuXHJcbiAgICAgICAgLy8gQklORCBUSEUgQlVGRkVSIFRPIEJFIFZFUlRFWCBEQVRBXHJcbiAgICAgICAgd2ViR0wuYmluZEJ1ZmZlcih3ZWJHTC5BUlJBWV9CVUZGRVIsIHRoaXMudmVydGV4VGV4Q29vcmRCdWZmZXIpO1xyXG4gICAgICAgIC8vIHdlYkdMLmJpbmRCdWZmZXIod2ViR0wuQVJSQVlfQlVGRkVSLCB0aGlzLnZhbEJ1ZmZlcik7XHJcblxyXG4gICAgICAgIC8vIEFORCBTRU5EIFRIRSBEQVRBIFRPIFRIRSBCVUZGRVIgV0UgQ1JFQVRFRCBPTiBUSEUgR1BVXHJcbiAgICAgICAgd2ViR0wuYnVmZmVyRGF0YSh3ZWJHTC5BUlJBWV9CVUZGRVIsIHZlcnRpY2VzVGV4Q29vcmRzLCB3ZWJHTC5TVEFUSUNfRFJBVyk7XHJcbiAgICAgICAgLy8gd2ViR0wuYnVmZmVyRGF0YSh3ZWJHTC5BUlJBWV9CVUZGRVIsIHZhbCwgd2ViR0wuU1RBVElDX0RSQVcpXHJcblxyXG4gICAgICAgIC8vIFNFVFVQIFRIRSBTSEFERVIgQVRUUklCVVRFUyBBTkQgVU5JRk9STVNcclxuICAgICAgICB0aGlzLndlYkdMQXR0cmlidXRlTG9jYXRpb25zID0ge307XHJcbiAgICAgICAgdGhpcy53ZWJHTFVuaWZvcm1Mb2NhdGlvbnMgPSB7fTtcclxuICAgICAgICAvLyB0aGlzLmxvYWRBdHRyaWJ1dGVMb2NhdGlvbnMod2ViR0wsIFtTcHJpdGVEZWZhdWx0cy5BX1BPU0lUSU9OLCBTcHJpdGVEZWZhdWx0cy5BX1RFWF9DT09SRF0pO1xyXG4gICAgICAgIC8vIHRoaXMubG9hZFVuaWZvcm1Mb2NhdGlvbnMod2ViR0wsIFtTcHJpdGVEZWZhdWx0cy5VX1NQUklURV9UUkFOU0ZPUk0sIFNwcml0ZURlZmF1bHRzLlVfU0FNUExFUiwgU3ByaXRlRGVmYXVsdHMuVV9URVhfQ09PUkRfRkFDVE9SLCBTcHJpdGVEZWZhdWx0cy5VX1RFWF9DT09SRF9TSElGVF0pO1xyXG5cclxuICAgICAgICB0aGlzLmxvYWRBdHRyaWJ1dGVMb2NhdGlvbnMod2ViR0wsIFtDaXJjbGVEZWZhdWx0cy5BX1BPU0lUSU9OLCBDaXJjbGVEZWZhdWx0cy5BX1ZBTFVFVE9JTlRFUlBPTEFURV0pO1xyXG4gICAgICAgIHRoaXMubG9hZFVuaWZvcm1Mb2NhdGlvbnMod2ViR0wsIFtDaXJjbGVEZWZhdWx0cy5VX1NQUklURVRSQU5TRk9STSwgQ2lyY2xlRGVmYXVsdHMuVV9PUFRJT05dKTtcclxuXHJcbiAgICAgICAgLy8gV0UnTEwgVVNFIFRIRVNFIEZPUiBUUkFOU09GTVJJTkcgT0JKRUNUUyBXSEVOIFdFIERSQVcgVEhFTVxyXG4gICAgICAgIHRoaXMuc3ByaXRlVHJhbnNmb3JtID0gbmV3IE1hdHJpeCg0LCA0KTtcclxuICAgICAgICB0aGlzLnNwcml0ZVRyYW5zbGF0ZSA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICAgICAgdGhpcy5zcHJpdGVSb3RhdGUgPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgICAgIHRoaXMuc3ByaXRlU2NhbGUgPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW5kZXJHcmFkaWVudENpcmNsZSh3ZWJHTDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzV2lkdGg6IG51bWJlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhc0hlaWdodDogbnVtYmVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XHJcbiAgICAgICAgbGV0IHNoYWRlclByb2dyYW1Ub1VzZSA9IHRoaXMuc2hhZGVyLmdldFByb2dyYW0oKTtcclxuICAgICAgICB3ZWJHTC51c2VQcm9ncmFtKHNoYWRlclByb2dyYW1Ub1VzZSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW5kZXJHcmFkaWVudENpcmNsZXMoICB3ZWJHTCA6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXNXaWR0aCA6IG51bWJlciwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXNIZWlnaHQgOiBudW1iZXIsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZVNldCA6IEFycmF5PEdyYWRpZW50Q2lyY2xlPikgOiB2b2lkIHtcclxuICAgICAgICAvLyBTRUxFQ1QgVEhFIEFOSU1BVEVEIFNQUklURSBSRU5ERVJJTkcgU0hBREVSIFBST0dSQU0gRk9SIFVTRVxyXG4gICAgICAgIGxldCBzaGFkZXJQcm9ncmFtVG9Vc2UgPSB0aGlzLnNoYWRlci5nZXRQcm9ncmFtKCk7XHJcbiAgICAgICAgd2ViR0wudXNlUHJvZ3JhbShzaGFkZXJQcm9ncmFtVG9Vc2UpO1xyXG5cclxuICAgICAgIC8vIEFORCBUSEVOIFJFTkRFUiBFQUNIIE9ORVxyXG4gICAgICAgZm9yIChsZXQgY2lyY2xlIG9mIHZpc2libGVTZXQpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJDaXJjbGUod2ViR0wsIGNhbnZhc1dpZHRoLCBjYW52YXNIZWlnaHQsIGNpcmNsZSk7ICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBsb2FkQXR0cmlidXRlTG9jYXRpb25zKHdlYkdMIDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCBhdHRyaWJ1dGVMb2NhdGlvbk5hbWVzIDogQXJyYXk8c3RyaW5nPikge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXR0cmlidXRlTG9jYXRpb25OYW1lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgbG9jYXRpb25OYW1lIDogc3RyaW5nID0gYXR0cmlidXRlTG9jYXRpb25OYW1lc1tpXTtcclxuICAgICAgICAgICAgbGV0IGxvY2F0aW9uIDogR0x1aW50ID0gd2ViR0wuZ2V0QXR0cmliTG9jYXRpb24odGhpcy5zaGFkZXIuZ2V0UHJvZ3JhbSgpLCBsb2NhdGlvbk5hbWUpO1xyXG4gICAgICAgICAgICB0aGlzLndlYkdMQXR0cmlidXRlTG9jYXRpb25zW2xvY2F0aW9uTmFtZV0gPSBsb2NhdGlvbjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBsb2FkVW5pZm9ybUxvY2F0aW9ucyh3ZWJHTCA6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgdW5pZm9ybUxvY2F0aW9uTmFtZXMgOiBBcnJheTxzdHJpbmc+KSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA6IG51bWJlciA9IDA7IGkgPCB1bmlmb3JtTG9jYXRpb25OYW1lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgbG9jYXRpb25OYW1lIDogc3RyaW5nID0gdW5pZm9ybUxvY2F0aW9uTmFtZXNbaV07XHJcbiAgICAgICAgICAgIGxldCBsb2NhdGlvbiA6IFdlYkdMVW5pZm9ybUxvY2F0aW9uID0gd2ViR0wuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMuc2hhZGVyLmdldFByb2dyYW0oKSwgbG9jYXRpb25OYW1lKTtcclxuICAgICAgICAgICAgdGhpcy53ZWJHTFVuaWZvcm1Mb2NhdGlvbnNbbG9jYXRpb25OYW1lXSA9IGxvY2F0aW9uO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlckNpcmNsZSggICB3ZWJHTCA6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXNXaWR0aCA6IG51bWJlciwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXNIZWlnaHQgOiBudW1iZXIsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2lyY2xlIDogR3JhZGllbnRDaXJjbGUpIHtcclxuXHJcblxyXG5cclxuICAgICAgICAvLyAvLyBDQUxDVUxBVEUgSE9XIE1VQ0ggVE8gVFJBTlNMQVRFIFRIRSBRVUFEIFBFUiBUSEUgU1BSSVRFIFBPU0lUSU9OXHJcblxyXG4gICAgICAgIGxldCBzcHJpdGVXaWR0aCA6IG51bWJlciA9IGNpcmNsZS5nZXRXaWR0aCgpO1xyXG4gICAgICAgIGxldCBzcHJpdGVIZWlnaHQgOiBudW1iZXIgPSBjaXJjbGUuZ2V0SGVpZ2h0KCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJ3aWR0aDogXCIgKyBzcHJpdGVIZWlnaHQgKyBcIiBoZWlnaHQ6IFwiICsgc3ByaXRlSGVpZ2h0KTtcclxuICAgICAgICBsZXQgc3ByaXRlWEluUGl4ZWxzIDogbnVtYmVyID0gY2lyY2xlLmdldFBvc2l0aW9uKCkuZ2V0WCgpICsgKHNwcml0ZVdpZHRoLzIpO1xyXG4gICAgICAgIGxldCBzcHJpdGVZSW5QaXhlbHMgOiBudW1iZXIgPSBjaXJjbGUuZ2V0UG9zaXRpb24oKS5nZXRZKCkgKyAoc3ByaXRlSGVpZ2h0LzIpO1xyXG4gICAgICAgIGxldCBzcHJpdGVYVHJhbnNsYXRlIDogbnVtYmVyID0gKHNwcml0ZVhJblBpeGVscyAtIChjYW52YXNXaWR0aC8yKSkvKGNhbnZhc1dpZHRoLzIpO1xyXG4gICAgICAgIGxldCBzcHJpdGVZVHJhbnNsYXRlIDogbnVtYmVyID0gKHNwcml0ZVlJblBpeGVscyAtIChjYW52YXNIZWlnaHQvMikpLyhjYW52YXNIZWlnaHQvMik7XHJcbiAgICAgICAgdGhpcy5zcHJpdGVUcmFuc2xhdGUuc2V0WChzcHJpdGVYVHJhbnNsYXRlKTtcclxuICAgICAgICB0aGlzLnNwcml0ZVRyYW5zbGF0ZS5zZXRZKC1zcHJpdGVZVHJhbnNsYXRlKTtcclxuXHJcbiAgICAgICAgLy8gQ0FMQ1VMQVRFIEhPVyBNVUNIIFRPIFNDQUxFIFRIRSBRVUFEIFBFUiBUSEUgU1BSSVRFIFNJWkVcclxuICAgICAgICBsZXQgZGVmYXVsdFdpZHRoIDogbnVtYmVyID0gY2FudmFzV2lkdGgvMjtcclxuICAgICAgICBsZXQgZGVmYXVsdEhlaWdodCA6IG51bWJlciA9IGNhbnZhc0hlaWdodC8yO1xyXG4gICAgICAgIGxldCBzY2FsZVggOiBudW1iZXIgPSBzcHJpdGVXaWR0aC9kZWZhdWx0V2lkdGg7XHJcbiAgICAgICAgbGV0IHNjYWxlWSA6IG51bWJlciA9IHNwcml0ZUhlaWdodC9kZWZhdWx0SGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuc3ByaXRlU2NhbGUuc2V0WChzY2FsZVgpO1xyXG4gICAgICAgIHRoaXMuc3ByaXRlU2NhbGUuc2V0WShzY2FsZVkpO1xyXG5cclxuICAgICAgICAvLyBAdG9kbyAtIENPTUJJTkUgVEhJUyBXSVRIIFRIRSBST1RBVEUgQU5EIFNDQUxFIFZBTFVFUyBGUk9NIFRIRSBTUFJJVEVcclxuICAgICAgICBNYXRoVXRpbGl0aWVzLmlkZW50aXR5KHRoaXMuc3ByaXRlVHJhbnNmb3JtKTtcclxuICAgICAgICBNYXRoVXRpbGl0aWVzLm1vZGVsKHRoaXMuc3ByaXRlVHJhbnNmb3JtLCB0aGlzLnNwcml0ZVRyYW5zbGF0ZSwgdGhpcy5zcHJpdGVSb3RhdGUsIHRoaXMuc3ByaXRlU2NhbGUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEZJR1VSRSBPVVQgVEhFIFRFWFRVUkUgQ09PUkRJTkFURSBGQUNUT1IgQU5EIFNISUZUXHJcbiAgICAgICAgLy8gbGV0IHRleENvb3JkRmFjdG9yWCA6IG51bWJlciA9IHNwcml0ZVdpZHRoL3RleHR1cmUud2lkdGg7XHJcbiAgICAgICAgLy8gbGV0IHRleENvb3JkRmFjdG9yWSA6IG51bWJlciA9IHNwcml0ZUhlaWdodC90ZXh0dXJlLmhlaWdodDtcclxuICAgICAgICAvLyBsZXQgc3ByaXRlTGVmdCA6IG51bWJlciA9IHNwcml0ZS5nZXRMZWZ0KCk7XHJcbiAgICAgICAgLy8gbGV0IHNwcml0ZVRvcCA6IG51bWJlciA9IHNwcml0ZS5nZXRUb3AoKTtcclxuICAgICAgICAvLyBsZXQgdGV4Q29vcmRTaGlmdFggOiBudW1iZXIgPSBzcHJpdGVMZWZ0L3RleHR1cmUud2lkdGg7XHJcbiAgICAgICAgLy8gbGV0IHRleENvb3JkU2hpZnRZIDogbnVtYmVyID0gc3ByaXRlVG9wL3RleHR1cmUuaGVpZ2h0OyAgIFxyXG5cclxuICAgICAgICAvLyBVU0UgVEhFIEFUVFJJQlVURVNcclxuICAgICAgICB3ZWJHTC5iaW5kQnVmZmVyKHdlYkdMLkFSUkFZX0JVRkZFUiwgdGhpcy52ZXJ0ZXhUZXhDb29yZEJ1ZmZlcik7XHJcbiAgICAgICAgLy8gd2ViR0wuYmluZFRleHR1cmUod2ViR0wuVEVYVFVSRV8yRCwgdGV4dHVyZS53ZWJHTFRleHR1cmUpO1xyXG5cclxuICAgICAgICAvLyBIT09LIFVQIFRIRSBBVFRSSUJVVEVTXHJcbiAgICAgICAgbGV0IGFfUG9zaXRpb25Mb2NhdGlvbiA6IEdMdWludCA9IHRoaXMud2ViR0xBdHRyaWJ1dGVMb2NhdGlvbnNbQ2lyY2xlRGVmYXVsdHMuQV9QT1NJVElPTl07XHJcbiAgICAgICAgd2ViR0wudmVydGV4QXR0cmliUG9pbnRlcihcclxuICAgICAgICAgICAgYV9Qb3NpdGlvbkxvY2F0aW9uLCBcclxuICAgICAgICAgICAgMywgXHJcbiAgICAgICAgICAgIHdlYkdMLkZMT0FULCBcclxuICAgICAgICAgICAgZmFsc2UsIFxyXG4gICAgICAgICAgICAyMCwgXHJcbiAgICAgICAgICAgIDApO1xyXG4gICAgICAgIHdlYkdMLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGFfUG9zaXRpb25Mb2NhdGlvbik7XHJcblxyXG4gICAgICAgIGxldCBhX1ZhbHVlVG9JbnRlcnBvbGF0ZUxvY2F0aW9uOiBHTHVpbnQgPSB0aGlzLndlYkdMQXR0cmlidXRlTG9jYXRpb25zW0NpcmNsZURlZmF1bHRzLkFfVkFMVUVUT0lOVEVSUE9MQVRFXTtcclxuICAgICAgICB3ZWJHTC52ZXJ0ZXhBdHRyaWJQb2ludGVyKFxyXG4gICAgICAgICAgICBhX1ZhbHVlVG9JbnRlcnBvbGF0ZUxvY2F0aW9uLCBcclxuICAgICAgICAgICAgMiwgXHJcbiAgICAgICAgICAgIHdlYkdMLkZMT0FULCBcclxuICAgICAgICAgICAgZmFsc2UsIFxyXG4gICAgICAgICAgICAyMCwgXHJcbiAgICAgICAgICAgIDEyKTtcclxuICAgICAgICB3ZWJHTC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShhX1ZhbHVlVG9JbnRlcnBvbGF0ZUxvY2F0aW9uKTtcclxuXHJcbiAgICAgICAgbGV0IGNvbG9yT3B0aW9uOiBudW1iZXIgPSBjaXJjbGUuZ2V0Q29sb3IoKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhjb2xvck9wdGlvbik7XHJcbiAgICAgICAgbGV0IHVfb3B0aW9uTG9jYXRpb246IFdlYkdMVW5pZm9ybUxvY2F0aW9uID0gdGhpcy53ZWJHTFVuaWZvcm1Mb2NhdGlvbnNbQ2lyY2xlRGVmYXVsdHMuVV9PUFRJT05dO1xyXG4gICAgICAgIHdlYkdMLnVuaWZvcm0xZih1X29wdGlvbkxvY2F0aW9uLCBjb2xvck9wdGlvbik7XHJcblxyXG5cclxuICAgICAgICAvLyBVU0UgVEhFIFVOSUZPUk1TXHJcbiAgICAgICAgbGV0IHVfU3ByaXRlVHJhbnNmb3JtTG9jYXRpb24gOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbiA9IHRoaXMud2ViR0xVbmlmb3JtTG9jYXRpb25zW0NpcmNsZURlZmF1bHRzLlVfU1BSSVRFVFJBTlNGT1JNXTtcclxuICAgICAgICB3ZWJHTC51bmlmb3JtTWF0cml4NGZ2KHVfU3ByaXRlVHJhbnNmb3JtTG9jYXRpb24sIGZhbHNlLCB0aGlzLnNwcml0ZVRyYW5zZm9ybS5nZXREYXRhKCkpO1xyXG5cclxuICAgICAgICAvLyBEUkFXIFRIRSBTUFJJVEUgQVMgQSBUUklBTkdMRSBTVFJJUCBVU0lORyA0IFZFUlRJQ0VTLCBTVEFSVElORyBBVCBUSEUgU1RBUlQgT0YgVEhFIEFSUkFZIChpbmRleCAwKVxyXG4gICAgICAgIHdlYkdMLmRyYXdBcnJheXMod2ViR0wuVFJJQU5HTEVfRkFOLCAwLCBDaXJjbGVEZWZhdWx0cy5OVU1fVkVSVElDRVMpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgV2ViR0xHYW1lQ2lyY2xlUmVuZGVyZXIgfSBmcm9tICcuL1dlYkdMR2FtZUNpcmNsZVJlbmRlcmVyJztcclxuLypcclxuICogVGhpcyBzZXJ2ZXMgYXMgdGhlIHN1YnN5c3RlbSB0aGF0IG1hbmFnZXMgYWxsIGdhbWUgcmVuZGVyaW5nLlxyXG4gKi9cclxuaW1wb3J0IHtUZXh0UmVuZGVyZXJ9IGZyb20gJy4vVGV4dFJlbmRlcmVyJ1xyXG5pbXBvcnQge1dlYkdMR2FtZVNwcml0ZVJlbmRlcmVyfSBmcm9tICcuL1dlYkdMR2FtZVNwcml0ZVJlbmRlcmVyJ1xyXG5pbXBvcnQge0FuaW1hdGVkU3ByaXRlfSBmcm9tICcuLi9zY2VuZS9zcHJpdGUvQW5pbWF0ZWRTcHJpdGUnXHJcbmltcG9ydCB7V2ViR0xHYW1lVGV4dHVyZSB9IGZyb20gJy4vV2ViR0xHYW1lVGV4dHVyZSc7XHJcbmltcG9ydCB7IEdyYWRpZW50Q2lyY2xlIH0gZnJvbSAnLi4vc2NlbmUvR3JhZGllbnRDaXJjbGUnO1xyXG5pbXBvcnQgeyBTY2VuZU9iamVjdCB9IGZyb20gJy4uL3NjZW5lL1NjZW5lT2JqZWN0JztcclxuXHJcbmV4cG9ydCBjbGFzcyBXZWJHTEdhbWVSZW5kZXJpbmdTeXN0ZW0ge1xyXG4gICAgcHJpdmF0ZSByZW5kZXJpbmdDYW52YXMgOiBIVE1MQ2FudmFzRWxlbWVudDtcclxuICAgIHByaXZhdGUgd2ViR0wgOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQ7XHJcbiAgICBwcml2YXRlIHNwcml0ZVJlbmRlcmVyIDogV2ViR0xHYW1lU3ByaXRlUmVuZGVyZXI7XHJcbiAgICBwcml2YXRlIHRleHRSZW5kZXJlciA6IFRleHRSZW5kZXJlcjtcclxuICAgIHByaXZhdGUgY2lyY2xlUmVuZGVyZXI6IFdlYkdMR2FtZUNpcmNsZVJlbmRlcmVyO1xyXG4gICAgcHJpdmF0ZSBjYW52YXNXaWR0aCA6IG51bWJlcjtcclxuICAgIHByaXZhdGUgY2FudmFzSGVpZ2h0IDogbnVtYmVyO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHt9XHJcblxyXG4gICAgcHVibGljIGdldFRleHR1cmVDb25zdGFudChpZCA6IG51bWJlcikgOiBudW1iZXIge1xyXG4gICAgICAgIC8vIFdFIE9OTFkgSEFWRSA0IEhFUkUsIFdFIFNIT1VMRCBIQVZFIEEgQkVUVEVSIFdBWSBPRiBET0lORyBUSElTXHJcbiAgICAgICAgc3dpdGNoKGlkKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIHRoaXMud2ViR0wuVEVYVFVSRTA7XHJcbiAgICAgICAgICAgIGNhc2UgMTogcmV0dXJuIHRoaXMud2ViR0wuVEVYVFVSRTE7XHJcbiAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIHRoaXMud2ViR0wuVEVYVFVSRTM7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiB0aGlzLndlYkdMLlRFWFRVUkU0O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0V2ViR0woKSA6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMud2ViR0w7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFNwcml0ZVJlbmRlcmVyKCkgOiBXZWJHTEdhbWVTcHJpdGVSZW5kZXJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ByaXRlUmVuZGVyZXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFRleHRSZW5kZXJlcigpIDogVGV4dFJlbmRlcmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50ZXh0UmVuZGVyZXI7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldENpcmNsZVJlbmRlcmVyKCk6IFdlYkdMR2FtZUNpcmNsZVJlbmRlcmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jaXJjbGVSZW5kZXJlcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW5pdChyZW5kZXJpbmdDYW52YXNJZCA6IHN0cmluZywgdGV4dENhbnZhc0lkIDogc3RyaW5nKSA6IHZvaWQge1xyXG4gICAgICAgIC8vIEZJUlNUIFNFVFVQIHdlYkdMXHJcbiAgICAgICAgdGhpcy5yZW5kZXJpbmdDYW52YXMgPSA8SFRNTENhbnZhc0VsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocmVuZGVyaW5nQ2FudmFzSWQpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyaW5nQ2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJpbmdDYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuY2FudmFzV2lkdGggPSB0aGlzLnJlbmRlcmluZ0NhbnZhcy53aWR0aDtcclxuICAgICAgICB0aGlzLmNhbnZhc0hlaWdodCA9IHRoaXMucmVuZGVyaW5nQ2FudmFzLmhlaWdodDtcclxuICAgICAgICB0aGlzLndlYkdMID0gdGhpcy5yZW5kZXJpbmdDYW52YXMuZ2V0Q29udGV4dChcIndlYmdsXCIpO1xyXG5cclxuICAgICAgICAvLyBJRiBUSEUgVVNFUidTIE1BQ0hJTkUvQlJPV1NFUiBET0VTTidUIFNVUFBPUlRcclxuICAgICAgICAvLyBXZWJHTCBUSEVOIFRIRVJFJ1MgTk8gUE9JTlQgT0YgR09JTkcgT05cclxuICAgICAgICBpZiAoIXRoaXMud2ViR0wpIHtcclxuICAgICAgICAgICAgLy8gUFJPVklERSBTT01FIEZFRURCQUNLIFRIQVQgV2ViR0wgV09OJ1QgV09SSyBCRUNBVVNFXHJcbiAgICAgICAgICAgIC8vIFRIRSBVU0VSJ1MnIEdSQVBISUNTIENBUkQgSVMgRk9SIFRIRSBCSVJEU1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiV2ViR0wgaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIGRldmljZVwiKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFORCBFTkQgSU5JVElBTElaQVRJT05cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gV2ViR0wgSVMgU1VQUE9SVEVELCBTTyBJTklUIEVWRVJZVEhJTkcgVEhBVCBVU0VTIElUXHJcblxyXG4gICAgICAgIC8vIE1BS0UgVEhFIENMRUFSIENPTE9SIEJMQUNLXHJcbiAgICAgICAgdGhpcy5zZXRDbGVhckNvbG9yKDAuMCwgMC4wLCAwLjAsIDEuMCk7XHJcblxyXG4gICAgICAgIC8vIEVOQUJMRSBERVBUSCBURVNUSU5HXHJcbiAgICAgICAgdGhpcy53ZWJHTC5kaXNhYmxlKHRoaXMud2ViR0wuREVQVEhfVEVTVCk7XHJcbiAgICAgICAgdGhpcy53ZWJHTC5lbmFibGUodGhpcy53ZWJHTC5CTEVORCk7XHJcbiAgICAgICAgdGhpcy53ZWJHTC5ibGVuZEZ1bmModGhpcy53ZWJHTC5TUkNfQUxQSEEsIHRoaXMud2ViR0wuT05FX01JTlVTX1NSQ19BTFBIQSk7XHJcblxyXG4gICAgICAgIC8vIFRVUk4gT04gQkFDS0ZBQ0UgQ1VMTElOR1xyXG4gICAgICAgIHRoaXMud2ViR0wuZW5hYmxlKHRoaXMud2ViR0wuQ1VMTF9GQUNFKTtcclxuXHJcbiAgICAgICAgLy8gVEhJUyBTUEVDSUZJRVMgVEhBVCBXRSdSRSBVU0lORyBUSEUgRU5USVJFIENBTlZBU1xyXG4gICAgICAgIHRoaXMud2ViR0wudmlld3BvcnQoMCwgMCwgdGhpcy5jYW52YXNXaWR0aCwgdGhpcy5jYW52YXNIZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyBOT1cgTUFLRSBUSEUgU0hBREVSIEZPUiBEUkFXSU5HIFRISVMgVEhJTkdcclxuICAgICAgICB0aGlzLnNwcml0ZVJlbmRlcmVyID0gbmV3IFdlYkdMR2FtZVNwcml0ZVJlbmRlcmVyKCk7XHJcbiAgICAgICAgdGhpcy5zcHJpdGVSZW5kZXJlci5pbml0KHRoaXMud2ViR0wpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY2lyY2xlUmVuZGVyZXIgPSBuZXcgV2ViR0xHYW1lQ2lyY2xlUmVuZGVyZXIoKTtcclxuICAgICAgICB0aGlzLmNpcmNsZVJlbmRlcmVyLmluaXQodGhpcy53ZWJHTCk7XHJcblxyXG4gICAgICAgIC8vIFRISVMgV0lMTCBTVE9SRSBPVVIgVEVYVFxyXG4gICAgICAgIHRoaXMudGV4dFJlbmRlcmVyID0gbmV3IFRleHRSZW5kZXJlcih0ZXh0Q2FudmFzSWQsIFwic2VyaWZcIiwgMTgsIFwiI0ZGRkYwMFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW5pdFdlYkdMVGV4dHVyZSh0ZXh0dXJlVG9Jbml0IDogV2ViR0xHYW1lVGV4dHVyZSwgdGV4dHVyZUlkIDogbnVtYmVyLCBpbWFnZSA6IEhUTUxJbWFnZUVsZW1lbnQsIGNhbGxiYWNrIDogRnVuY3Rpb24pIDogdm9pZCB7XHJcbiAgICAgICAgdGV4dHVyZVRvSW5pdC53aWR0aCA9IGltYWdlLndpZHRoO1xyXG4gICAgICAgIHRleHR1cmVUb0luaXQuaGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0O1xyXG5cclxuICAgICAgICAvLyBDUkVBVEUgQSBXZWJHTCBURVhUVVJFIE9OIFRIRSBHUFVcclxuICAgICAgICB0ZXh0dXJlVG9Jbml0LndlYkdMVGV4dHVyZSA9IHRoaXMud2ViR0wuY3JlYXRlVGV4dHVyZSgpO1xyXG4gICAgICAgIHRleHR1cmVUb0luaXQud2ViR0xUZXh0dXJlSWQgPSB0ZXh0dXJlSWQ7XHJcblxyXG4gICAgICAgIC8vIEZMSVAgVEhFIElNQUdFJ1MgeS1BWElTXHJcbiAgICAgICAgLy93ZWJHTC5waXhlbFN0b3JlaSh3ZWJHTC5VTlBBQ0tfRkxJUF9ZX1dFQkdMLCAxKTtcclxuXHJcbiAgICAgICAgLy8gQUNUSVZBVEUgVEhFIFdlYkdMIFRFWFRVUkUgT04gVEhFIEdQVVxyXG4gICAgICAgIC8vbGV0IHRleHR1cmVOdW1OYW1lIDogc3RyaW5nID0gXCJURVhUVVJFXCIgKyB0ZXh0dXJlSWQ7XHJcbiAgICAgICAgbGV0IHRleHR1cmVOYW1lQ29uc3RhbnQgOiBudW1iZXIgPSB0aGlzLmdldFRleHR1cmVDb25zdGFudCh0ZXh0dXJlSWQpO1xyXG4gICAgICAgIHRoaXMud2ViR0wuYWN0aXZlVGV4dHVyZSh0ZXh0dXJlTmFtZUNvbnN0YW50KTtcclxuXHJcbiAgICAgICAgLy8gQklORCBUSEUgVEVYVFVSRSBUTyBBIDJEIFRZUEVcclxuICAgICAgICB0aGlzLndlYkdMLmJpbmRUZXh0dXJlKHRoaXMud2ViR0wuVEVYVFVSRV8yRCwgdGV4dHVyZVRvSW5pdC53ZWJHTFRleHR1cmUpO1xyXG5cclxuICAgICAgICAvLyBTUEVDSUZZIFJFTkRFUklORyBTRVRUSU5HU1xyXG4gICAgICAgIHRoaXMud2ViR0wudGV4UGFyYW1ldGVyaSh0aGlzLndlYkdMLlRFWFRVUkVfMkQsIHRoaXMud2ViR0wuVEVYVFVSRV9NSU5fRklMVEVSLCB0aGlzLndlYkdMLkxJTkVBUik7XHJcblxyXG4gICAgICAgIC8vIFNFVCBUSEUgSU1BR0UgRk9SIFRIRSBURVhUVVJFXHJcbiAgICAgICAgdGhpcy53ZWJHTC50ZXhJbWFnZTJEKHRoaXMud2ViR0wuVEVYVFVSRV8yRCwgMCwgdGhpcy53ZWJHTC5SR0JBLCB0aGlzLndlYkdMLlJHQkEsIHRoaXMud2ViR0wuVU5TSUdORURfQllURSwgaW1hZ2UpO1xyXG5cclxuICAgICAgICAvLyBLRUVQIElUIEZPUiBXSEVOIFdFIFJFTkRFUlxyXG4gICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldENsZWFyQ29sb3IociA6IG51bWJlciwgZyA6IG51bWJlciwgYiA6IG51bWJlciwgYSA6IG51bWJlcikgOiB2b2lkIHtcclxuICAgICAgICB0aGlzLndlYkdMLmNsZWFyQ29sb3IociwgZywgYiwgYSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbmRlcih2aXNpYmxlU2V0IDogQXJyYXk8U2NlbmVPYmplY3Q+KSA6IHZvaWQge1xyXG4gICAgICAgIC8vIENMRUFSIFRIRSBDQU5WQVNcclxuICAgICAgICB0aGlzLndlYkdMLmNsZWFyKHRoaXMud2ViR0wuQ09MT1JfQlVGRkVSX0JJVCB8IHRoaXMud2ViR0wuREVQVEhfQlVGRkVSX0JJVCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IHNwcml0ZVNldCA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIGxldCBjaXJjbGVTZXQgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICBmb3IgKGxldCB2IG9mIHZpc2libGVTZXQpIHtcclxuICAgICAgICAgICAgaWYgKHYgaW5zdGFuY2VvZiBHcmFkaWVudENpcmNsZSkge1xyXG4gICAgICAgICAgICAgICAgY2lyY2xlU2V0LnB1c2godilcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNwcml0ZVNldC5wdXNoKHYpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJjaXJjbGUgc2V0IHNpemU6IFwiICsgY2lyY2xlU2V0Lmxlbmd0aClcclxuXHJcbiAgICAgICAgLy8gUkVOREVSIFRIRSBTUFJJVEVTIE9OIE9ORSBDQU5WQVNcclxuICAgICAgICB0aGlzLnNwcml0ZVJlbmRlcmVyLnJlbmRlckFuaW1hdGVkU3ByaXRlcyh0aGlzLndlYkdMLCB0aGlzLmNhbnZhc1dpZHRoLCB0aGlzLmNhbnZhc0hlaWdodCwgc3ByaXRlU2V0KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBSRU5ERVIgVEhFIENJUkNMRVMgT04gQ0FOVkFTXHJcbiAgICAgICAgdGhpcy5jaXJjbGVSZW5kZXJlci5yZW5kZXJHcmFkaWVudENpcmNsZXModGhpcy53ZWJHTCwgdGhpcy5jYW52YXNXaWR0aCwgdGhpcy5jYW52YXNIZWlnaHQsIGNpcmNsZVNldCk7XHJcblxyXG4gICAgICAgIC8vIFRIRU4gVEhFIFRFWFQgT04gQU5PVEhFUiBPVkVSTEFQUElORyBDQU5WQVNcclxuICAgICAgICB0aGlzLnRleHRSZW5kZXJlci5yZW5kZXIoKTtcclxuICAgIH1cclxufSIsIi8qXHJcbiAqIFRoaXMgaXMgYSB3cmFwcGVyIGNsYXNzIGZvciBhIFdlYkdMUHJvZ3JhbSwgaS5lLiBhIHNoYWRlciBmb3IgY3VzdG9tIHJlbmRlcmluZ1xyXG4gKiB1c2luZyBXZWJHTCdzIHByb2dyYW1tYWJsZSBwaXBlbGluZS5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBXZWJHTEdhbWVTaGFkZXIge1xyXG4gICAgcHJpdmF0ZSBwcm9ncmFtIDogV2ViR0xQcm9ncmFtO1xyXG4gICAgcHJpdmF0ZSB2ZXJ0ZXhTaGFkZXIgOiBXZWJHTFNoYWRlcjtcclxuICAgIHByaXZhdGUgZnJhZ21lbnRTaGFkZXIgOiBXZWJHTFNoYWRlcjtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKSB7fVxyXG5cclxuICAgIHB1YmxpYyBnZXRQcm9ncmFtKCkgOiBXZWJHTFByb2dyYW0ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnByb2dyYW07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFZlcnRleFNoYWRlcigpOiBXZWJHTFNoYWRlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmVydGV4U2hhZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRGcmFnbWVudFNoYWRlcigpOiBXZWJHTFNoYWRlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmVydGV4U2hhZGVyO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpbml0KHdlYkdMIDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCB2U291cmNlIDogc3RyaW5nLCBmU291cmNlIDogc3RyaW5nKSA6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudmVydGV4U2hhZGVyID0gPFdlYkdMU2hhZGVyPnRoaXMuY3JlYXRlU2hhZGVyKHdlYkdMLCB3ZWJHTC5WRVJURVhfU0hBREVSLCB2U291cmNlKTtcclxuICAgICAgICB0aGlzLmZyYWdtZW50U2hhZGVyID0gPFdlYkdMU2hhZGVyPnRoaXMuY3JlYXRlU2hhZGVyKHdlYkdMLCB3ZWJHTC5GUkFHTUVOVF9TSEFERVIsIGZTb3VyY2UpO1xyXG4gICAgICAgIHRoaXMucHJvZ3JhbSA9IHRoaXMuY3JlYXRlU2hhZGVyUHJvZ3JhbSh3ZWJHTCwgdGhpcy52ZXJ0ZXhTaGFkZXIsIHRoaXMuZnJhZ21lbnRTaGFkZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjcmVhdGVTaGFkZXIod2ViR0wgOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIHR5cGUgOiBudW1iZXIsIHNvdXJjZSA6IHN0cmluZykgOiBXZWJHTFNoYWRlciB7XHJcbiAgICAgICAgLy8gTUFLRSBBIE5FVyBTSEFERVIgT0JKRUNULCBMT0FEIElUJ1MgU09VUkNFLCBBTkQgQ09NUElMRSBJVFxyXG4gICAgICAgIHZhciBzaGFkZXIgPSB3ZWJHTC5jcmVhdGVTaGFkZXIodHlwZSk7XHJcbiAgICAgICAgd2ViR0wuc2hhZGVyU291cmNlKHNoYWRlciwgc291cmNlKTtcclxuICAgICAgICB3ZWJHTC5jb21waWxlU2hhZGVyKHNoYWRlcik7XHJcblxyXG4gICAgICAgIC8vIERJRCBJVCBDT01QSUxFP1xyXG4gICAgICAgIHZhciBzdWNjZXNzID0gd2ViR0wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgd2ViR0wuQ09NUElMRV9TVEFUVVMpO1xyXG4gICAgICAgIGlmIChzdWNjZXNzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzaGFkZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBESVNBU1RFUlxyXG4gICAgICAgIGNvbnNvbGUubG9nKHdlYkdMLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKSk7XHJcbiAgICAgICAgd2ViR0wuZGVsZXRlU2hhZGVyKHNoYWRlcik7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNyZWF0ZVNoYWRlclByb2dyYW0od2ViR0wgOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIHZTaGFkZXIgOiBXZWJHTFNoYWRlciwgZlNoYWRlciA6IFdlYkdMU2hhZGVyKSA6IFdlYkdMUHJvZ3JhbSB7XHJcbiAgICAgICAgLy8gTUFLRSBUSEUgR0xTTCBTSEFERVIgUFJPR1JBTVxyXG4gICAgICAgIGxldCBwcm9ncmFtVG9DcmVhdGUgPSB3ZWJHTC5jcmVhdGVQcm9ncmFtKCk7XHJcblxyXG4gICAgICAgIC8vIExJTksgVEhFIFZFUlQgQU5EIEZSQUdcclxuICAgICAgICB3ZWJHTC5hdHRhY2hTaGFkZXIocHJvZ3JhbVRvQ3JlYXRlLCB2U2hhZGVyKTtcclxuICAgICAgICB3ZWJHTC5hdHRhY2hTaGFkZXIocHJvZ3JhbVRvQ3JlYXRlLCBmU2hhZGVyKTtcclxuXHJcbiAgICAgICAgLy8gTk9XIFdFIENBTiBMSU5LIFRIRSBTSEFERVIgUFJPR1JBTVxyXG4gICAgICAgIHdlYkdMLmxpbmtQcm9ncmFtKHByb2dyYW1Ub0NyZWF0ZSk7XHJcbiAgICAgICAgbGV0IGxpbmtlZCA6IGJvb2xlYW4gPSB3ZWJHTC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW1Ub0NyZWF0ZSwgd2ViR0wuTElOS19TVEFUVVMpO1xyXG5cclxuICAgICAgICAvLyBJUyBJVCBMSU5LRUQ/XHJcbiAgICAgICAgaWYgKCFsaW5rZWQpIHtcclxuICAgICAgICAgICAgLy8gRElTQVNURVJcclxuICAgICAgICAgICAgbGV0IGVycm9yRmVlZGJhY2sgOiBzdHJpbmcgPSB3ZWJHTC5nZXRQcm9ncmFtSW5mb0xvZyhwcm9ncmFtVG9DcmVhdGUpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvckZlZWRiYWNrKTtcclxuXHJcbiAgICAgICAgICAgIC8vIERJU0FTVEVSXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHdlYkdMLmdldFByb2dyYW1JbmZvTG9nKHByb2dyYW1Ub0NyZWF0ZSkpO1xyXG4gICAgICAgICAgICB3ZWJHTC5kZWxldGVQcm9ncmFtKHByb2dyYW1Ub0NyZWF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcm9ncmFtVG9DcmVhdGU7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge1dlYkdMR2FtZVNoYWRlcn0gZnJvbSAnLi9XZWJHTEdhbWVTaGFkZXInXHJcbmltcG9ydCB7TWF0aFV0aWxpdGllc30gZnJvbSAnLi4vbWF0aC9NYXRoVXRpbGl0aWVzJ1xyXG5pbXBvcnQgeyBNYXRyaXggfSBmcm9tICcuLi9tYXRoL01hdHJpeCdcclxuaW1wb3J0IHsgVmVjdG9yMyB9IGZyb20gJy4uL21hdGgvVmVjdG9yMydcclxuaW1wb3J0IHtBbmltYXRlZFNwcml0ZX0gZnJvbSAnLi4vc2NlbmUvc3ByaXRlL0FuaW1hdGVkU3ByaXRlJ1xyXG5pbXBvcnQge0FuaW1hdGVkU3ByaXRlVHlwZX0gZnJvbSAnLi4vc2NlbmUvc3ByaXRlL0FuaW1hdGVkU3ByaXRlVHlwZSdcclxuaW1wb3J0IHtXZWJHTEdhbWVUZXh0dXJlfSBmcm9tICcuL1dlYkdMR2FtZVRleHR1cmUnXHJcbmltcG9ydCB7SGFzaFRhYmxlfSBmcm9tICcuLi9kYXRhL0hhc2hUYWJsZSdcclxuXHJcbnZhciBTcHJpdGVEZWZhdWx0cyA9IHtcclxuICAgIEFfUE9TSVRJT046IFwiYV9Qb3NpdGlvblwiLFxyXG4gICAgQV9URVhfQ09PUkQ6IFwiYV9UZXhDb29yZFwiLFxyXG4gICAgVV9TUFJJVEVfVFJBTlNGT1JNOiBcInVfU3ByaXRlVHJhbnNmb3JtXCIsXHJcbiAgICBVX1RFWF9DT09SRF9GQUNUT1I6IFwidV9UZXhDb29yZEZhY3RvclwiLFxyXG4gICAgVV9URVhfQ09PUkRfU0hJRlQ6IFwidV9UZXhDb29yZFNoaWZ0XCIsXHJcbiAgICBVX1NBTVBMRVI6IFwidV9TYW1wbGVyXCIsXHJcbiAgICBOVU1fVkVSVElDRVM6IDQsXHJcbiAgICBGTE9BVFNfUEVSX1ZFUlRFWDogMixcclxuICAgIEZMT0FUU19QRVJfVEVYVFVSRV9DT09SRElOQVRFOiAyLFxyXG4gICAgVE9UQUxfQllURVM6IDE2LFxyXG4gICAgVkVSVEVYX1BPU0lUSU9OX09GRlNFVDogMCxcclxuICAgIFRFWFRVUkVfQ09PUkRJTkFURV9PRkZTRVQ6IDgsXHJcbiAgICBJTkRFWF9PRl9GSVJTVF9WRVJURVg6IDBcclxufTtcclxuXHJcbmV4cG9ydCBjbGFzcyBXZWJHTEdhbWVTcHJpdGVSZW5kZXJlciB7XHJcbiAgICBwcml2YXRlIHNoYWRlciA6IFdlYkdMR2FtZVNoYWRlcjtcclxuICAgIHByaXZhdGUgdmVydGV4VGV4Q29vcmRCdWZmZXIgOiBXZWJHTEJ1ZmZlcjtcclxuXHJcbiAgICAvLyBXRSdMTCBVU0UgVEhFU0UgRk9SIFRSQU5TT0ZNUklORyBPQkpFQ1RTIFdIRU4gV0UgRFJBVyBUSEVNXHJcbiAgICBwcml2YXRlIHNwcml0ZVRyYW5zZm9ybSA6IE1hdHJpeDtcclxuICAgIHByaXZhdGUgc3ByaXRlVHJhbnNsYXRlIDogVmVjdG9yMztcclxuICAgIHByaXZhdGUgc3ByaXRlUm90YXRlIDogVmVjdG9yMztcclxuICAgIHByaXZhdGUgc3ByaXRlU2NhbGUgOiBWZWN0b3IzOyAgICBcclxuXHJcbiAgICBwcml2YXRlIHdlYkdMQXR0cmlidXRlTG9jYXRpb25zIDogSGFzaFRhYmxlPEdMdWludD47XHJcbiAgICBwcml2YXRlIHdlYkdMVW5pZm9ybUxvY2F0aW9ucyA6IEhhc2hUYWJsZTxXZWJHTFVuaWZvcm1Mb2NhdGlvbj47XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKCkge31cclxuXHJcbiAgICBwdWJsaWMgZ2V0U2hhZGVyKCk6IFdlYkdMR2FtZVNoYWRlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hhZGVyO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgaW5pdCh3ZWJHTCA6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCkgOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNoYWRlciA9IG5ldyBXZWJHTEdhbWVTaGFkZXIoKTtcclxuICAgICAgICB2YXIgdmVydGV4U2hhZGVyU291cmNlID1cclxuICAgICAgICAgICAgJ3VuaWZvcm0gbWF0NCAnICsgU3ByaXRlRGVmYXVsdHMuVV9TUFJJVEVfVFJBTlNGT1JNICsgJztcXG4nICtcclxuICAgICAgICAgICAgJ3VuaWZvcm0gdmVjMiAnICsgU3ByaXRlRGVmYXVsdHMuVV9URVhfQ09PUkRfRkFDVE9SICsgJztcXG4nICtcclxuICAgICAgICAgICAgJ3VuaWZvcm0gdmVjMiAnICsgU3ByaXRlRGVmYXVsdHMuVV9URVhfQ09PUkRfU0hJRlQgKyAnO1xcbicgK1xyXG4gICAgICAgICAgICAnYXR0cmlidXRlIHZlYzQgJyArIFNwcml0ZURlZmF1bHRzLkFfUE9TSVRJT04gKyAnO1xcbicgK1xyXG4gICAgICAgICAgICAnYXR0cmlidXRlIHZlYzIgJyArIFNwcml0ZURlZmF1bHRzLkFfVEVYX0NPT1JEICsgJztcXG4nICtcclxuICAgICAgICAgICAgJ3ZhcnlpbmcgdmVjMiB2X1RleENvb3JkO1xcbicgK1xyXG4gICAgICAgICAgICAndm9pZCBtYWluKCkge1xcbicgK1xyXG4gICAgICAgICAgICAnICBnbF9Qb3NpdGlvbiA9ICcgKyBTcHJpdGVEZWZhdWx0cy5VX1NQUklURV9UUkFOU0ZPUk0gKyAnICogJyArIFNwcml0ZURlZmF1bHRzLkFfUE9TSVRJT04gKyAnO1xcbicgK1xyXG4gICAgICAgICAgICAnICB2ZWMyIHRlbXBUZXhDb29yZCA9ICcgKyBTcHJpdGVEZWZhdWx0cy5BX1RFWF9DT09SRCArICcgKiAnICsgU3ByaXRlRGVmYXVsdHMuVV9URVhfQ09PUkRfRkFDVE9SICsgJztcXG4nICtcclxuICAgICAgICAgICAgJyAgdl9UZXhDb29yZCA9IHRlbXBUZXhDb29yZCArICcgKyBTcHJpdGVEZWZhdWx0cy5VX1RFWF9DT09SRF9TSElGVCArICc7XFxuJyArXHJcbiAgICAgICAgICAgICd9XFxuJztcclxuICAgICAgICB2YXIgZnJhZ21lbnRTaGFkZXJTb3VyY2UgPVxyXG4gICAgICAgICAgICAnI2lmZGVmIEdMX0VTXFxuJyArXHJcbiAgICAgICAgICAgICdwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDtcXG4nICtcclxuICAgICAgICAgICAgJyNlbmRpZlxcbicgK1xyXG4gICAgICAgICAgICAndW5pZm9ybSBzYW1wbGVyMkQgJyArIFNwcml0ZURlZmF1bHRzLlVfU0FNUExFUiArICc7XFxuJyArXHJcbiAgICAgICAgICAgICd2YXJ5aW5nIHZlYzIgdl9UZXhDb29yZDtcXG4nICtcclxuICAgICAgICAgICAgJ3ZvaWQgbWFpbigpIHtcXG4nICtcclxuICAgICAgICAgICAgJyAgZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKCcgKyBTcHJpdGVEZWZhdWx0cy5VX1NBTVBMRVIgKyAnLCB2X1RleENvb3JkKTtcXG4nICtcclxuICAgICAgICAgICAgJ31cXG4nO1xyXG4gICAgICAgIHRoaXMuc2hhZGVyLmluaXQod2ViR0wsIHZlcnRleFNoYWRlclNvdXJjZSwgZnJhZ21lbnRTaGFkZXJTb3VyY2UpO1xyXG5cclxuICAgICAgICAvLyBHRVQgVEhFIHdlYkdMIE9CSkVDVCBUTyBVU0VcclxuICAgICAgICB2YXIgdmVydGljZXNUZXhDb29yZHMgPSBuZXcgRmxvYXQzMkFycmF5KFtcclxuICAgICAgICAgICAgLTAuNSwgIDAuNSwgMC4wLCAwLjAsXHJcbiAgICAgICAgICAgIC0wLjUsIC0wLjUsIDAuMCwgMS4wLFxyXG4gICAgICAgICAgICAgMC41LCAgMC41LCAxLjAsIDAuMCxcclxuICAgICAgICAgICAgIDAuNSwgLTAuNSwgMS4wLCAxLjBcclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgLy8gQ1JFQVRFIFRIRSBCVUZGRVIgT04gVEhFIEdQVVxyXG4gICAgICAgIHRoaXMudmVydGV4VGV4Q29vcmRCdWZmZXIgPSB3ZWJHTC5jcmVhdGVCdWZmZXIoKTtcclxuXHJcbiAgICAgICAgLy8gQklORCBUSEUgQlVGRkVSIFRPIEJFIFZFUlRFWCBEQVRBXHJcbiAgICAgICAgd2ViR0wuYmluZEJ1ZmZlcih3ZWJHTC5BUlJBWV9CVUZGRVIsIHRoaXMudmVydGV4VGV4Q29vcmRCdWZmZXIpO1xyXG5cclxuICAgICAgICAvLyBBTkQgU0VORCBUSEUgREFUQSBUTyBUSEUgQlVGRkVSIFdFIENSRUFURUQgT04gVEhFIEdQVVxyXG4gICAgICAgIHdlYkdMLmJ1ZmZlckRhdGEod2ViR0wuQVJSQVlfQlVGRkVSLCB2ZXJ0aWNlc1RleENvb3Jkcywgd2ViR0wuU1RBVElDX0RSQVcpO1xyXG5cclxuICAgICAgICAvLyBTRVRVUCBUSEUgU0hBREVSIEFUVFJJQlVURVMgQU5EIFVOSUZPUk1TXHJcbiAgICAgICAgdGhpcy53ZWJHTEF0dHJpYnV0ZUxvY2F0aW9ucyA9IHt9O1xyXG4gICAgICAgIHRoaXMud2ViR0xVbmlmb3JtTG9jYXRpb25zID0ge307XHJcbiAgICAgICAgdGhpcy5sb2FkQXR0cmlidXRlTG9jYXRpb25zKHdlYkdMLCBbU3ByaXRlRGVmYXVsdHMuQV9QT1NJVElPTiwgU3ByaXRlRGVmYXVsdHMuQV9URVhfQ09PUkRdKTtcclxuICAgICAgICB0aGlzLmxvYWRVbmlmb3JtTG9jYXRpb25zKHdlYkdMLCBbU3ByaXRlRGVmYXVsdHMuVV9TUFJJVEVfVFJBTlNGT1JNLCBTcHJpdGVEZWZhdWx0cy5VX1NBTVBMRVIsIFNwcml0ZURlZmF1bHRzLlVfVEVYX0NPT1JEX0ZBQ1RPUiwgU3ByaXRlRGVmYXVsdHMuVV9URVhfQ09PUkRfU0hJRlRdKTtcclxuXHJcbiAgICAgICAgLy8gV0UnTEwgVVNFIFRIRVNFIEZPUiBUUkFOU09GTVJJTkcgT0JKRUNUUyBXSEVOIFdFIERSQVcgVEhFTVxyXG4gICAgICAgIHRoaXMuc3ByaXRlVHJhbnNmb3JtID0gbmV3IE1hdHJpeCg0LCA0KTtcclxuICAgICAgICB0aGlzLnNwcml0ZVRyYW5zbGF0ZSA9IG5ldyBWZWN0b3IzKCk7XHJcbiAgICAgICAgdGhpcy5zcHJpdGVSb3RhdGUgPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgICAgIHRoaXMuc3ByaXRlU2NhbGUgPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW5kZXJBbmltYXRlZFNwcml0ZXMoICB3ZWJHTCA6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXNXaWR0aCA6IG51bWJlciwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXNIZWlnaHQgOiBudW1iZXIsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZVNldCA6IEFycmF5PEFuaW1hdGVkU3ByaXRlPikgOiB2b2lkIHtcclxuICAgICAgICAvLyBTRUxFQ1QgVEhFIEFOSU1BVEVEIFNQUklURSBSRU5ERVJJTkcgU0hBREVSIFBST0dSQU0gRk9SIFVTRVxyXG4gICAgICAgIGxldCBzaGFkZXJQcm9ncmFtVG9Vc2UgPSB0aGlzLnNoYWRlci5nZXRQcm9ncmFtKCk7XHJcbiAgICAgICAgd2ViR0wudXNlUHJvZ3JhbShzaGFkZXJQcm9ncmFtVG9Vc2UpO1xyXG5cclxuICAgICAgIC8vIEFORCBUSEVOIFJFTkRFUiBFQUNIIE9ORVxyXG4gICAgICAgZm9yIChsZXQgc3ByaXRlIG9mIHZpc2libGVTZXQpIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJBbmltYXRlZFNwcml0ZSh3ZWJHTCwgY2FudmFzV2lkdGgsIGNhbnZhc0hlaWdodCwgc3ByaXRlKTsgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGxvYWRBdHRyaWJ1dGVMb2NhdGlvbnMod2ViR0wgOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIGF0dHJpYnV0ZUxvY2F0aW9uTmFtZXMgOiBBcnJheTxzdHJpbmc+KSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhdHRyaWJ1dGVMb2NhdGlvbk5hbWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBsb2NhdGlvbk5hbWUgOiBzdHJpbmcgPSBhdHRyaWJ1dGVMb2NhdGlvbk5hbWVzW2ldO1xyXG4gICAgICAgICAgICBsZXQgbG9jYXRpb24gOiBHTHVpbnQgPSB3ZWJHTC5nZXRBdHRyaWJMb2NhdGlvbih0aGlzLnNoYWRlci5nZXRQcm9ncmFtKCksIGxvY2F0aW9uTmFtZSk7XHJcbiAgICAgICAgICAgIHRoaXMud2ViR0xBdHRyaWJ1dGVMb2NhdGlvbnNbbG9jYXRpb25OYW1lXSA9IGxvY2F0aW9uO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGxvYWRVbmlmb3JtTG9jYXRpb25zKHdlYkdMIDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCB1bmlmb3JtTG9jYXRpb25OYW1lcyA6IEFycmF5PHN0cmluZz4pIHtcclxuICAgICAgICBmb3IgKGxldCBpIDogbnVtYmVyID0gMDsgaSA8IHVuaWZvcm1Mb2NhdGlvbk5hbWVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBsb2NhdGlvbk5hbWUgOiBzdHJpbmcgPSB1bmlmb3JtTG9jYXRpb25OYW1lc1tpXTtcclxuICAgICAgICAgICAgbGV0IGxvY2F0aW9uIDogV2ViR0xVbmlmb3JtTG9jYXRpb24gPSB3ZWJHTC5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5zaGFkZXIuZ2V0UHJvZ3JhbSgpLCBsb2NhdGlvbk5hbWUpO1xyXG4gICAgICAgICAgICB0aGlzLndlYkdMVW5pZm9ybUxvY2F0aW9uc1tsb2NhdGlvbk5hbWVdID0gbG9jYXRpb247XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyQW5pbWF0ZWRTcHJpdGUoICAgd2ViR0wgOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzV2lkdGggOiBudW1iZXIsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzSGVpZ2h0IDogbnVtYmVyLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcml0ZSA6IEFuaW1hdGVkU3ByaXRlKSB7XHJcbiAgICAgICAgbGV0IHNwcml0ZVR5cGUgOiBBbmltYXRlZFNwcml0ZVR5cGUgPSBzcHJpdGUuZ2V0U3ByaXRlVHlwZSgpO1xyXG4gICAgICAgIGxldCB0ZXh0dXJlIDogV2ViR0xHYW1lVGV4dHVyZSA9IHNwcml0ZVR5cGUuZ2V0U3ByaXRlU2hlZXRUZXh0dXJlKCk7XHJcblxyXG4gICAgICAgIC8vIENBTENVTEFURSBIT1cgTVVDSCBUTyBUUkFOU0xBVEUgVEhFIFFVQUQgUEVSIFRIRSBTUFJJVEUgUE9TSVRJT05cclxuICAgICAgICBsZXQgc3ByaXRlV2lkdGggOiBudW1iZXIgPSBzcHJpdGVUeXBlLmdldFNwcml0ZVdpZHRoKCk7XHJcbiAgICAgICAgbGV0IHNwcml0ZUhlaWdodCA6IG51bWJlciA9IHNwcml0ZVR5cGUuZ2V0U3ByaXRlSGVpZ2h0KCk7XHJcbiAgICAgICAgbGV0IHNwcml0ZVhJblBpeGVscyA6IG51bWJlciA9IHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFgoKSArIChzcHJpdGVXaWR0aC8yKTtcclxuICAgICAgICBsZXQgc3ByaXRlWUluUGl4ZWxzIDogbnVtYmVyID0gc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WSgpICsgKHNwcml0ZUhlaWdodC8yKTtcclxuICAgICAgICBsZXQgc3ByaXRlWFRyYW5zbGF0ZSA6IG51bWJlciA9IChzcHJpdGVYSW5QaXhlbHMgLSAoY2FudmFzV2lkdGgvMikpLyhjYW52YXNXaWR0aC8yKTtcclxuICAgICAgICBsZXQgc3ByaXRlWVRyYW5zbGF0ZSA6IG51bWJlciA9IChzcHJpdGVZSW5QaXhlbHMgLSAoY2FudmFzSGVpZ2h0LzIpKS8oY2FudmFzSGVpZ2h0LzIpO1xyXG4gICAgICAgIHRoaXMuc3ByaXRlVHJhbnNsYXRlLnNldFgoc3ByaXRlWFRyYW5zbGF0ZSk7XHJcbiAgICAgICAgdGhpcy5zcHJpdGVUcmFuc2xhdGUuc2V0WSgtc3ByaXRlWVRyYW5zbGF0ZSk7XHJcblxyXG4gICAgICAgIC8vIENBTENVTEFURSBIT1cgTVVDSCBUTyBTQ0FMRSBUSEUgUVVBRCBQRVIgVEhFIFNQUklURSBTSVpFXHJcbiAgICAgICAgbGV0IGRlZmF1bHRXaWR0aCA6IG51bWJlciA9IGNhbnZhc1dpZHRoLzI7XHJcbiAgICAgICAgbGV0IGRlZmF1bHRIZWlnaHQgOiBudW1iZXIgPSBjYW52YXNIZWlnaHQvMjtcclxuICAgICAgICBsZXQgc2NhbGVYIDogbnVtYmVyID0gc3ByaXRlV2lkdGgvZGVmYXVsdFdpZHRoO1xyXG4gICAgICAgIGxldCBzY2FsZVkgOiBudW1iZXIgPSBzcHJpdGVIZWlnaHQvZGVmYXVsdEhlaWdodDtcclxuICAgICAgICB0aGlzLnNwcml0ZVNjYWxlLnNldFgoc2NhbGVYKTtcclxuICAgICAgICB0aGlzLnNwcml0ZVNjYWxlLnNldFkoc2NhbGVZKTtcclxuXHJcbiAgICAgICAgLy8gQHRvZG8gLSBDT01CSU5FIFRISVMgV0lUSCBUSEUgUk9UQVRFIEFORCBTQ0FMRSBWQUxVRVMgRlJPTSBUSEUgU1BSSVRFXHJcbiAgICAgICAgTWF0aFV0aWxpdGllcy5pZGVudGl0eSh0aGlzLnNwcml0ZVRyYW5zZm9ybSk7XHJcbiAgICAgICAgTWF0aFV0aWxpdGllcy5tb2RlbCh0aGlzLnNwcml0ZVRyYW5zZm9ybSwgdGhpcy5zcHJpdGVUcmFuc2xhdGUsIHRoaXMuc3ByaXRlUm90YXRlLCB0aGlzLnNwcml0ZVNjYWxlKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBGSUdVUkUgT1VUIFRIRSBURVhUVVJFIENPT1JESU5BVEUgRkFDVE9SIEFORCBTSElGVFxyXG4gICAgICAgIGxldCB0ZXhDb29yZEZhY3RvclggOiBudW1iZXIgPSBzcHJpdGVXaWR0aC90ZXh0dXJlLndpZHRoO1xyXG4gICAgICAgIGxldCB0ZXhDb29yZEZhY3RvclkgOiBudW1iZXIgPSBzcHJpdGVIZWlnaHQvdGV4dHVyZS5oZWlnaHQ7XHJcbiAgICAgICAgbGV0IHNwcml0ZUxlZnQgOiBudW1iZXIgPSBzcHJpdGUuZ2V0TGVmdCgpO1xyXG4gICAgICAgIGxldCBzcHJpdGVUb3AgOiBudW1iZXIgPSBzcHJpdGUuZ2V0VG9wKCk7XHJcbiAgICAgICAgbGV0IHRleENvb3JkU2hpZnRYIDogbnVtYmVyID0gc3ByaXRlTGVmdC90ZXh0dXJlLndpZHRoO1xyXG4gICAgICAgIGxldCB0ZXhDb29yZFNoaWZ0WSA6IG51bWJlciA9IHNwcml0ZVRvcC90ZXh0dXJlLmhlaWdodDsgICBcclxuXHJcbiAgICAgICAgLy8gVVNFIFRIRSBBVFRSSUJVVEVTXHJcbiAgICAgICAgd2ViR0wuYmluZEJ1ZmZlcih3ZWJHTC5BUlJBWV9CVUZGRVIsIHRoaXMudmVydGV4VGV4Q29vcmRCdWZmZXIpO1xyXG4gICAgICAgIHdlYkdMLmJpbmRUZXh0dXJlKHdlYkdMLlRFWFRVUkVfMkQsIHRleHR1cmUud2ViR0xUZXh0dXJlKTtcclxuXHJcbiAgICAgICAgLy8gSE9PSyBVUCBUSEUgQVRUUklCVVRFU1xyXG4gICAgICAgIGxldCBhX1Bvc2l0aW9uTG9jYXRpb24gOiBHTHVpbnQgPSB0aGlzLndlYkdMQXR0cmlidXRlTG9jYXRpb25zW1Nwcml0ZURlZmF1bHRzLkFfUE9TSVRJT05dO1xyXG4gICAgICAgIHdlYkdMLnZlcnRleEF0dHJpYlBvaW50ZXIoYV9Qb3NpdGlvbkxvY2F0aW9uLCBTcHJpdGVEZWZhdWx0cy5GTE9BVFNfUEVSX1RFWFRVUkVfQ09PUkRJTkFURSwgd2ViR0wuRkxPQVQsIGZhbHNlLCBTcHJpdGVEZWZhdWx0cy5UT1RBTF9CWVRFUywgU3ByaXRlRGVmYXVsdHMuVkVSVEVYX1BPU0lUSU9OX09GRlNFVCk7XHJcbiAgICAgICAgd2ViR0wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYV9Qb3NpdGlvbkxvY2F0aW9uKTtcclxuICAgICAgICBsZXQgYV9UZXhDb29yZExvY2F0aW9uIDogR0x1aW50ID0gdGhpcy53ZWJHTEF0dHJpYnV0ZUxvY2F0aW9uc1tTcHJpdGVEZWZhdWx0cy5BX1RFWF9DT09SRF07XHJcbiAgICAgICAgd2ViR0wudmVydGV4QXR0cmliUG9pbnRlcihhX1RleENvb3JkTG9jYXRpb24sIFNwcml0ZURlZmF1bHRzLkZMT0FUU19QRVJfVEVYVFVSRV9DT09SRElOQVRFLCB3ZWJHTC5GTE9BVCwgZmFsc2UsIFNwcml0ZURlZmF1bHRzLlRPVEFMX0JZVEVTLCBTcHJpdGVEZWZhdWx0cy5URVhUVVJFX0NPT1JESU5BVEVfT0ZGU0VUKTtcclxuICAgICAgICB3ZWJHTC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShhX1RleENvb3JkTG9jYXRpb24pO1xyXG5cclxuICAgICAgICAvLyBVU0UgVEhFIFVOSUZPUk1TXHJcbiAgICAgICAgbGV0IHVfU3ByaXRlVHJhbnNmb3JtTG9jYXRpb24gOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbiA9IHRoaXMud2ViR0xVbmlmb3JtTG9jYXRpb25zW1Nwcml0ZURlZmF1bHRzLlVfU1BSSVRFX1RSQU5TRk9STV07XHJcbiAgICAgICAgd2ViR0wudW5pZm9ybU1hdHJpeDRmdih1X1Nwcml0ZVRyYW5zZm9ybUxvY2F0aW9uLCBmYWxzZSwgdGhpcy5zcHJpdGVUcmFuc2Zvcm0uZ2V0RGF0YSgpKTtcclxuICAgICAgICBsZXQgdV9TYW1wbGVyTG9jYXRpb24gOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbiA9IHRoaXMud2ViR0xVbmlmb3JtTG9jYXRpb25zW1Nwcml0ZURlZmF1bHRzLlVfU0FNUExFUl07XHJcbiAgICAgICAgd2ViR0wudW5pZm9ybTFpKHVfU2FtcGxlckxvY2F0aW9uLCB0ZXh0dXJlLndlYkdMVGV4dHVyZUlkKTtcclxuICAgICAgICBsZXQgdV9UZXhDb29yZEZhY3RvckxvY2F0aW9uIDogV2ViR0xVbmlmb3JtTG9jYXRpb24gPSB0aGlzLndlYkdMVW5pZm9ybUxvY2F0aW9uc1tTcHJpdGVEZWZhdWx0cy5VX1RFWF9DT09SRF9GQUNUT1JdO1xyXG4gICAgICAgIHdlYkdMLnVuaWZvcm0yZih1X1RleENvb3JkRmFjdG9yTG9jYXRpb24sIHRleENvb3JkRmFjdG9yWCwgdGV4Q29vcmRGYWN0b3JZKTtcclxuICAgICAgICBsZXQgdV9UZXhDb29yZFNoaWZ0TG9jYXRpb24gOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbiA9IHRoaXMud2ViR0xVbmlmb3JtTG9jYXRpb25zW1Nwcml0ZURlZmF1bHRzLlVfVEVYX0NPT1JEX1NISUZUXTtcclxuICAgICAgICB3ZWJHTC51bmlmb3JtMmYodV9UZXhDb29yZFNoaWZ0TG9jYXRpb24sIHRleENvb3JkU2hpZnRYLCB0ZXhDb29yZFNoaWZ0WSk7XHJcblxyXG4gICAgICAgIC8vIERSQVcgVEhFIFNQUklURSBBUyBBIFRSSUFOR0xFIFNUUklQIFVTSU5HIDQgVkVSVElDRVMsIFNUQVJUSU5HIEFUIFRIRSBTVEFSVCBPRiBUSEUgQVJSQVkgKGluZGV4IDApXHJcbiAgICAgICAgd2ViR0wuZHJhd0FycmF5cyh3ZWJHTC5UUklBTkdMRV9TVFJJUCwgU3ByaXRlRGVmYXVsdHMuSU5ERVhfT0ZfRklSU1RfVkVSVEVYLCBTcHJpdGVEZWZhdWx0cy5OVU1fVkVSVElDRVMpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIFdlYkdMR2FtZVRleHR1cmUge1xyXG4gICAgcHVibGljIHdlYkdMVGV4dHVyZUlkOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgd2ViR0xUZXh0dXJlOiBXZWJHTFRleHR1cmU7XHJcbiAgICBwdWJsaWMgaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQ7XHJcbiAgICBwdWJsaWMgd2lkdGggOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgaGVpZ2h0IDogbnVtYmVyO1xyXG59IiwiaW1wb3J0IHsgU2NlbmVPYmplY3QgfSBmcm9tIFwiLi9TY2VuZU9iamVjdFwiO1xyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBHcmFkaWVudENpcmNsZSBleHRlbmRzIFNjZW5lT2JqZWN0IHtcclxuXHJcbiAgICBwcml2YXRlIHdpZHRoOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGhlaWdodDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSByOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGc6IG51bWJlcjtcclxuICAgIHByaXZhdGUgYjogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBjb2xvcjogbnVtYmVyO1xyXG5cclxuICAgIHByaXZhdGUgcmFkaXVzOiBudW1iZXJcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3Iod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMud2lkdGggPSB3aWR0aFxyXG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0XHJcbiAgICAgICAgdGhpcy5yYWRpdXMgPSAyMDtcclxuICAgICAgICBsZXQgbWF4ID0gNTtcclxuICAgICAgICBsZXQgbWluID0gMDtcclxuICAgICAgICB0aGlzLmNvbG9yID0gTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSArIG1pbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0Q29sb3IoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb2xvcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0V2lkdGgoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53aWR0aDtcclxuICAgIH1cclxuXHJcbiAgICBcclxuICAgIHB1YmxpYyBnZXRIZWlnaHQoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBjb250YWlucyh0ZXN0WCA6IG51bWJlciwgdGVzdFkgOiBudW1iZXIpIDogYm9vbGVhbiB7XHJcbiAgICAgICAgbGV0IHNwcml0ZVdpZHRoID0gdGhpcy5nZXRXaWR0aCgpO1xyXG4gICAgICAgIGxldCBzcHJpdGVIZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpO1xyXG4gICAgICAgIGxldCBzcHJpdGVMZWZ0ID0gdGhpcy5nZXRQb3NpdGlvbigpLmdldFgoKTtcclxuICAgICAgICBsZXQgc3ByaXRlUmlnaHQgPSB0aGlzLmdldFBvc2l0aW9uKCkuZ2V0WCgpICsgc3ByaXRlV2lkdGg7XHJcbiAgICAgICAgbGV0IHNwcml0ZVRvcCA9IHRoaXMuZ2V0UG9zaXRpb24oKS5nZXRZKCk7XHJcbiAgICAgICAgbGV0IHNwcml0ZUJvdHRvbSA9IHRoaXMuZ2V0UG9zaXRpb24oKS5nZXRZKCkgKyBzcHJpdGVIZWlnaHQ7XHJcbiAgICAgICAgaWYgKCAgICAodGVzdFggPCBzcHJpdGVMZWZ0KVxyXG4gICAgICAgICAgICB8fCAgKHNwcml0ZVJpZ2h0IDwgdGVzdFgpXHJcbiAgICAgICAgICAgIHx8ICAodGVzdFkgPCBzcHJpdGVUb3ApXHJcbiAgICAgICAgICAgIHx8ICAoc3ByaXRlQm90dG9tIDwgdGVzdFkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIGAoJHt0aGlzLmdldFBvc2l0aW9uKCkuZ2V0WCgpfSwgJHt0aGlzLmdldFBvc2l0aW9uKCkuZ2V0WSgpfSlgXHJcbiAgICB9XHJcblxyXG4gICAgXHJcbn1cclxuXHJcbiIsImltcG9ydCB7U2NlbmVPYmplY3R9IGZyb20gJy4vU2NlbmVPYmplY3QnXHJcbmltcG9ydCB7QW5pbWF0ZWRTcHJpdGV9IGZyb20gJy4vc3ByaXRlL0FuaW1hdGVkU3ByaXRlJ1xyXG5pbXBvcnQgeyBWZWN0b3IzIH0gZnJvbSAnLi4vbWF0aC9WZWN0b3IzJztcclxuaW1wb3J0IHsgR3JhZGllbnRDaXJjbGUgfSBmcm9tICcuL0dyYWRpZW50Q2lyY2xlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTY2VuZUdyYXBoIHtcclxuICAgIC8vIEFORCBBTEwgT0YgVEhFIEFOSU1BVEVEIFNQUklURVMsIFdISUNIIEFSRSBOT1QgU1RPUkVEXHJcbiAgICAvLyBTT1JURUQgT1IgSU4gQU5ZIFBBUlRJQ1VMQVIgT1JERVIuIE5PVEUgVEhBVCBBTklNQVRFRCBTUFJJVEVTXHJcbiAgICAvLyBBUkUgU0NFTkUgT0JKRUNUU1xyXG4gICAgcHJpdmF0ZSBhbmltYXRlZFNwcml0ZXMgOiBBcnJheTxBbmltYXRlZFNwcml0ZT47XHJcblxyXG4gICAgLy8gU0VUIE9GIFZJU0lCTEUgT0JKRUNUUywgTk9URSBUSEFUIEFUIFRIRSBNT01FTlQgT1VSXHJcbiAgICAvLyBTQ0VORSBHUkFQSCBJUyBRVUlURSBTSU1QTEUsIFNPIFRISVMgSVMgVEhFIFNBTUUgQVNcclxuICAgIC8vIE9VUiBMSVNUIE9GIEFOSU1BVEVEIFNQUklURVNcclxuICAgIHByaXZhdGUgdmlzaWJsZVNldCA6IEFycmF5PFNjZW5lT2JqZWN0PjtcclxuXHJcbiAgICBwcml2YXRlIGdyYWlkZW50Q2lyY2xlczogQXJyYXk8R3JhZGllbnRDaXJjbGU+O1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvLyBERUZBVUxUIENPTlNUUlVDVE9SIElOSVRJQUxJWkVTIE9VUiBEQVRBIFNUUlVDVFVSRVNcclxuICAgICAgICB0aGlzLmFuaW1hdGVkU3ByaXRlcyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZVNldCA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIHRoaXMuZ3JhaWRlbnRDaXJjbGVzID0gbmV3IEFycmF5KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFRvdGFsU2NlbmVOdW1zKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3JhaWRlbnRDaXJjbGVzLmxlbmd0aCArIHRoaXMuYW5pbWF0ZWRTcHJpdGVzLmxlbmd0aFxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXROdW1TcHJpdGVzKCkgOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFuaW1hdGVkU3ByaXRlcy5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZEFuaW1hdGVkU3ByaXRlKHNwcml0ZSA6IEFuaW1hdGVkU3ByaXRlKSA6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuYW5pbWF0ZWRTcHJpdGVzLnB1c2goc3ByaXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkR3JhZGllbnRDaXJjbGUoY2lybGNlOiBHcmFkaWVudENpcmNsZSk6IHZvaWR7XHJcbiAgICAgICAgdGhpcy5ncmFpZGVudENpcmNsZXMucHVzaChjaXJsY2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRPYmpBdCh0ZXN0WCA6IG51bWJlciwgdGVzdFkgOiBudW1iZXIpOiBTY2VuZU9iamVjdCB7XHJcbiAgICAgICAgbGV0IGs6IG51bWJlciA9IHRoaXMudmlzaWJsZVNldC5sZW5ndGggLSAxO1xyXG4gICAgICAgIGxldCBpOiBudW1iZXI7XHJcbiAgICAgICAgZm9yIChpID0gazsgaSA+PSAwOyBpIC0tKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnZpc2libGVTZXRbaV0uY29udGFpbnModGVzdFgsIHRlc3RZKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZpc2libGVTZXRbaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFNwcml0ZUF0KHRlc3RYIDogbnVtYmVyLCB0ZXN0WSA6IG51bWJlcikgOiBBbmltYXRlZFNwcml0ZSB7XHJcbiAgICAgICAgLy8gZm9yIChsZXQgc3ByaXRlIG9mIHRoaXMuYW5pbWF0ZWRTcHJpdGVzKSB7XHJcbiAgICAgICAgLy8gICAgIGlmIChzcHJpdGUuY29udGFpbnModGVzdFgsIHRlc3RZKSlcclxuICAgICAgICAvLyAgICAgICAgIHJldHVybiBzcHJpdGU7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIHJldHVybiBudWxsO1xyXG4gICAgICAgIGxldCBrOiBudW1iZXIgPSB0aGlzLmFuaW1hdGVkU3ByaXRlcy5sZW5ndGggLSAxO1xyXG4gICAgICAgIGxldCBpOiBudW1iZXI7XHJcbiAgICAgICAgZm9yIChpID0gazsgaSA+PSAwOyBpIC0tKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFuaW1hdGVkU3ByaXRlc1tpXS5jb250YWlucyh0ZXN0WCwgdGVzdFkpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYW5pbWF0ZWRTcHJpdGVzW2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbFxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRDaXJjbGVBdCh0ZXN0WDogbnVtYmVyLCB0ZXN0WTogbnVtYmVyKTogR3JhZGllbnRDaXJjbGUge1xyXG4gICAgICAgIC8vIGZvciAobGV0IGMgb2YgdGhpcy5ncmFpZGVudENpcmNsZXMpIHtcclxuICAgICAgICAvLyAgICAgaWYgKGMuY29udGFpbnModGVzdFgsIHRlc3RZKSlcclxuICAgICAgICAvLyAgICAgICAgIHJldHVybiBjXHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIHJldHVybiBudWxsO1xyXG4gICAgICAgIGxldCBpOiBudW1iZXI7XHJcbiAgICAgICAgbGV0IGsgID0gdGhpcy5ncmFpZGVudENpcmNsZXMubGVuZ3RoIC0gMTtcclxuICAgICAgICBmb3IgKGk9IGs7IGkgPj0gMDsgaSAtLSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5ncmFpZGVudENpcmNsZXNbaV0uY29udGFpbnModGVzdFgsIHRlc3RZKSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdyYWlkZW50Q2lyY2xlc1tpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGxcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0QW5pbWF0ZWRTcHJpdGVzKCk6IEFycmF5PEFuaW1hdGVkU3ByaXRlPiB7ICAgIFxyXG4gICAgICAgIHJldHVybiB0aGlzLmFuaW1hdGVkU3ByaXRlcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlQ2lyY2xlKGM6IEdyYWRpZW50Q2lyY2xlKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IGNQb3M6IFZlY3RvcjMgPSBjLmdldFBvc2l0aW9uKCk7XHJcbiAgICAgICAgbGV0IG5ld0FyciA9IG5ldyBBcnJheTxHcmFkaWVudENpcmNsZT4oKTtcclxuICAgICAgICBpZiAoYyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHMgb2YgdGhpcy5ncmFpZGVudENpcmNsZXMpIHtcclxuICAgICAgICAgICAgICAgIGxldCBwb3M6IFZlY3RvcjMgPSBzLmdldFBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocG9zLmdldFgoKSAhPT0gY1Bvcy5nZXRYKCkgJiZcclxuICAgICAgICAgICAgICAgICAgICBwb3MuZ2V0WSgpICE9PSBjUG9zLmdldFkoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld0Fyci5wdXNoKHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZ3JhaWRlbnRDaXJjbGVzID0gbmV3QXJyO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVPYmoob2JqOiBTY2VuZU9iamVjdCk6IHZvaWQge1xyXG4gICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBHcmFkaWVudENpcmNsZSkgeyBcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmVDaXJjbGUob2JqIGFzIEdyYWRpZW50Q2lyY2xlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKG9iaiBpbnN0YW5jZW9mIEFuaW1hdGVkU3ByaXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlU3ByaXRlKChvYmogYXMgQW5pbWF0ZWRTcHJpdGUpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbW92ZVNwcml0ZShzcHJpdGU6IEFuaW1hdGVkU3ByaXRlKTogdm9pZCB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJyZW1vdmluZyBmdW5jdGlvbiBpcyBjYWxsZWRcIilcclxuICAgICAgICB2YXIgc3ByaXRlUG9zOiBWZWN0b3IzID0gc3ByaXRlLmdldFBvc2l0aW9uKCk7XHJcblxyXG4gICAgICAgIGxldCBuZXdBcnIgPSBuZXcgQXJyYXk8QW5pbWF0ZWRTcHJpdGU+KCk7XHJcbiAgICAgICAgaWYgKHNwcml0ZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHMgb2YgdGhpcy5hbmltYXRlZFNwcml0ZXMpIHtcclxuICAgICAgICAgICAgICAgIGxldCBwb3M6IFZlY3RvcjMgPSBzLmdldFBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocG9zLmdldFgoKSAhPT0gc3ByaXRlUG9zLmdldFgoKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHBvcy5nZXRZKCkgIT09IHNwcml0ZVBvcy5nZXRZKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXdBcnIucHVzaChzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZyhgb2xkIHNpemU6ICR7dGhpcy5hbmltYXRlZFNwcml0ZXMubGVuZ3RofSAuLi4gbmV3IHNpemU6JHtuZXdBcnIubGVuZ3RofWApO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKG5ld0FycilcclxuICAgICAgICB0aGlzLmFuaW1hdGVkU3ByaXRlcyA9IG5ld0FycjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHVwZGF0ZVxyXG4gICAgICogXHJcbiAgICAgKiBDYWxsZWQgb25jZSBwZXIgZnJhbWUsIHRoaXMgZnVuY3Rpb24gdXBkYXRlcyB0aGUgc3RhdGUgb2YgYWxsIHRoZSBvYmplY3RzXHJcbiAgICAgKiBpbiB0aGUgc2NlbmUuXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBkZWx0YSBUaGUgdGltZSB0aGF0IGhhcyBwYXNzZWQgc2luY2UgdGhlIGxhc3QgdGltZSB0aGlzIHVwZGF0ZVxyXG4gICAgICogZnVuY2F0aW9uIHdhcyBjYWxsZWQuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyB1cGRhdGUoZGVsdGEgOiBudW1iZXIpIDogdm9pZCB7XHJcbiAgICAgICAgZm9yIChsZXQgc3ByaXRlIG9mIHRoaXMuYW5pbWF0ZWRTcHJpdGVzKSB7XHJcbiAgICAgICAgICAgIHNwcml0ZS51cGRhdGUoZGVsdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2NvcGUoKSA6IEFycmF5PFNjZW5lT2JqZWN0PiB7XHJcbiAgICAgICAgLy8gQ0xFQVIgT1VUIFRIRSBPTERcclxuICAgICAgICB0aGlzLnZpc2libGVTZXQgPSBbXTtcclxuXHJcbiAgICAgICAgLy8gUFVUIEFMTCBUSEUgU0NFTkUgT0JKRUNUUyBJTlRPIFRIRSBWSVNJQkxFIFNFVFxyXG4gICAgICAgIGZvciAobGV0IHNwcml0ZSBvZiB0aGlzLmFuaW1hdGVkU3ByaXRlcykge1xyXG4gICAgICAgICAgICB0aGlzLnZpc2libGVTZXQucHVzaChzcHJpdGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgYyBvZiB0aGlzLmdyYWlkZW50Q2lyY2xlcykge1xyXG4gICAgICAgICAgICB0aGlzLnZpc2libGVTZXQucHVzaChjKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLnZpc2libGVTZXQ7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQge1ZlY3RvcjN9IGZyb20gJy4uL21hdGgvVmVjdG9yMydcclxuXHJcbi8qKlxyXG4gKiBTY2VuZU9iamVjdFxyXG4gKiBcclxuICogQSBTY2VuZU9iamVjdCBpcyBzb21ldGhpbmcgdGhhdCBjYW4gYmUgcGxhY2VkIGludG8gdGhlIHNjZW5lIGdyYXBoLiBJdCBoYXNcclxuICogYSBwb3NpdGlvbiwgcm90YXRpb24sIGFuZCBzY2FsZSBpbiB0aGUgZ2FtZSB3b3JsZC4gTm90ZSB0aGF0IGl0cyBwb3NpdGlvblxyXG4gKiBpcyB0eXBpY2FsbHkgaXRzIGNlbnRlcmVkIGxvY2F0aW9uLCBzbyBpZiB3ZSdyZSB0YWxraW5nIGFib3V0IGEgMmQgYm94LCBcclxuICogaXQgd291bGQgYmUgdGhlIGNlbnRlciBvZiB0aGF0IGJveC5cclxuICovXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTY2VuZU9iamVjdCB7XHJcbiAgICBwcml2YXRlIHBvc2l0aW9uIDogVmVjdG9yMztcclxuICAgIHByaXZhdGUgcm90YXRpb24gOiBWZWN0b3IzO1xyXG4gICAgcHJpdmF0ZSBzY2FsZSA6IFZlY3RvcjM7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgICAgIHRoaXMucm90YXRpb24gPSBuZXcgVmVjdG9yMygpO1xyXG4gICAgICAgIHRoaXMuc2NhbGUgPSBuZXcgVmVjdG9yMygpO1xyXG5cclxuICAgICAgICAvLyBDTEVBUiBBTEwgVkFMVUVTXHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbi5zZXQoMC4wLCAwLjAsIDAuMCwgMS4wKTtcclxuICAgICAgICB0aGlzLnJvdGF0aW9uLnNldCgwLjAsIDAuMCwgMC4wLCAxLjApO1xyXG4gICAgICAgIHRoaXMuc2NhbGUuc2V0KDEuMCwgMS4wLCAxLjAsIDEuMCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFBvc2l0aW9uKCkgOiBWZWN0b3IzIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbjtcclxuICAgIH0gICAgXHJcblxyXG4gICAgcHVibGljIGdldFJvdGF0aW9uKCkgOiBWZWN0b3IzIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yb3RhdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0U2NhbGUoKSA6IFZlY3RvcjMge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNjYWxlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhYnN0cmFjdCBjb250YWlucyh0ZXN0WCA6IG51bWJlciwgdGVzdFkgOiBudW1iZXIpIDogYm9vbGVhbjtcclxufSIsImltcG9ydCB7U2NlbmVPYmplY3R9IGZyb20gJy4uL1NjZW5lT2JqZWN0J1xyXG5pbXBvcnQge0FuaW1hdGVkU3ByaXRlVHlwZX0gZnJvbSAnLi9BbmltYXRlZFNwcml0ZVR5cGUnXHJcblxyXG5leHBvcnQgY2xhc3MgQW5pbWF0ZWRTcHJpdGUgZXh0ZW5kcyBTY2VuZU9iamVjdCB7XHJcbiAgICBwcml2YXRlIHNwcml0ZVR5cGUgOiBBbmltYXRlZFNwcml0ZVR5cGU7XHJcbiAgICBwcml2YXRlIHN0YXRlIDogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBhbmltYXRpb25GcmFtZUluZGV4IDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBmcmFtZUNvdW50ZXIgOiBudW1iZXI7XHJcbiAgICBcclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihpbml0U3ByaXRlVHlwZSA6IEFuaW1hdGVkU3ByaXRlVHlwZSwgaW5pdFN0YXRlIDogc3RyaW5nKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLnNwcml0ZVR5cGUgPSBpbml0U3ByaXRlVHlwZTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBTVEFSVCBSRVNFVFxyXG4gICAgICAgIHRoaXMuc3RhdGUgPSBpbml0U3RhdGU7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb25GcmFtZUluZGV4ID0gMDtcclxuICAgICAgICB0aGlzLmZyYW1lQ291bnRlciA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEFuaW1hdGlvbkZyYW1lSW5kZXgoKSA6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYW5pbWF0aW9uRnJhbWVJbmRleDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0RnJhbWVDb3VudGVyKCkgOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZyYW1lQ291bnRlcjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0U3ByaXRlVHlwZSgpIDogQW5pbWF0ZWRTcHJpdGVUeXBlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zcHJpdGVUeXBlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRTdGF0ZSgpIDogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIHNldFN0YXRlKGluaXRTdGF0ZSA6IHN0cmluZykgOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnN0YXRlID0gaW5pdFN0YXRlO1xyXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uRnJhbWVJbmRleCA9IDA7XHJcbiAgICAgICAgdGhpcy5mcmFtZUNvdW50ZXIgPSAwO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBwdWJsaWMgdXBkYXRlKGRlbHRhIDogbnVtYmVyKSA6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZnJhbWVDb3VudGVyKys7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gSEFWRSBXRSBHT05FIFBBU1QgVEhFIExBU1QgRlJBTUUgSU4gVEhFIEFOSU1BVElPTj9cclxuICAgICAgICB2YXIgY3VycmVudEFuaW1hdGlvbiA9IHRoaXMuc3ByaXRlVHlwZS5nZXRBbmltYXRpb24odGhpcy5zdGF0ZSk7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRGcmFtZSA9IGN1cnJlbnRBbmltYXRpb25bdGhpcy5hbmltYXRpb25GcmFtZUluZGV4XTtcclxuICAgICAgICBpZiAodGhpcy5mcmFtZUNvdW50ZXIgPiAoY3VycmVudEZyYW1lLmR1cmF0aW9uKSkge1xyXG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbkZyYW1lSW5kZXgrKztcclxuICAgICAgICAgICAgaWYgKHRoaXMuYW5pbWF0aW9uRnJhbWVJbmRleCA+PSBjdXJyZW50QW5pbWF0aW9uLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb25GcmFtZUluZGV4ID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmZyYW1lQ291bnRlciA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjb250YWlucyhwb2ludFggOiBudW1iZXIsIHBvaW50WSA6IG51bWJlcikgOiBib29sZWFuIHtcclxuICAgICAgICBsZXQgc3ByaXRlV2lkdGggPSB0aGlzLmdldFNwcml0ZVR5cGUoKS5nZXRTcHJpdGVXaWR0aCgpO1xyXG4gICAgICAgIGxldCBzcHJpdGVIZWlnaHQgPSB0aGlzLmdldFNwcml0ZVR5cGUoKS5nZXRTcHJpdGVIZWlnaHQoKTtcclxuICAgICAgICBsZXQgc3ByaXRlTGVmdCA9IHRoaXMuZ2V0UG9zaXRpb24oKS5nZXRYKCk7XHJcbiAgICAgICAgbGV0IHNwcml0ZVJpZ2h0ID0gdGhpcy5nZXRQb3NpdGlvbigpLmdldFgoKSArIHNwcml0ZVdpZHRoO1xyXG4gICAgICAgIGxldCBzcHJpdGVUb3AgPSB0aGlzLmdldFBvc2l0aW9uKCkuZ2V0WSgpO1xyXG4gICAgICAgIGxldCBzcHJpdGVCb3R0b20gPSB0aGlzLmdldFBvc2l0aW9uKCkuZ2V0WSgpICsgc3ByaXRlSGVpZ2h0O1xyXG4gICAgICAgIGlmICggICAgKHBvaW50WCA8IHNwcml0ZUxlZnQpXHJcbiAgICAgICAgICAgIHx8ICAoc3ByaXRlUmlnaHQgPCBwb2ludFgpXHJcbiAgICAgICAgICAgIHx8ICAocG9pbnRZIDwgc3ByaXRlVG9wKVxyXG4gICAgICAgICAgICB8fCAgKHNwcml0ZUJvdHRvbSA8IHBvaW50WSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqUkVOQU1FIFRISVMgTUVUSE9EIFNPIElUIERFTk9URVMgUElYRUwgTE9DQVRJT04gSU4gVEVYVFVSRSAqL1xyXG4gICAgcHVibGljIGdldExlZnQoKSA6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ByaXRlVHlwZS5nZXRMZWZ0KHRoaXMuc3RhdGUsIHRoaXMuYW5pbWF0aW9uRnJhbWVJbmRleCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBnZXRUb3AoKSA6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ByaXRlVHlwZS5nZXRUb3AodGhpcy5zdGF0ZSwgdGhpcy5hbmltYXRpb25GcmFtZUluZGV4KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdG9TdHJpbmcoKSA6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IHN1bW1hcnkgOiBzdHJpbmcgPSAgXCJ7IHBvc2l0aW9uOiAoXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgICB0aGlzLmdldFBvc2l0aW9uKCkuZ2V0WCgpICsgXCIsIFwiICsgdGhpcy5nZXRQb3NpdGlvbigpLmdldFkoKSArIFwiKSBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAgIFwiKHN0YXRlOiBcIiArIHRoaXMuZ2V0U3RhdGUoKSArIFwiKSBcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAgIFwiKGFuaW1hdGlvbkZyYW1lSW5kZXg6IFwiICsgdGhpcy5nZXRBbmltYXRpb25GcmFtZUluZGV4KCkgKyBcIikgXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgICBcIihmcmFtZUNvdW50ZXI6IFwiICsgdGhpcy5nZXRGcmFtZUNvdW50ZXIoKSArIFwiKSBcIjtcclxuICAgICAgICByZXR1cm4gc3VtbWFyeTtcclxuICAgIH1cclxufSIsImltcG9ydCB7V2ViR0xHYW1lVGV4dHVyZX0gZnJvbSAnLi4vLi4vcmVuZGVyaW5nL1dlYkdMR2FtZVRleHR1cmUnXHJcbmltcG9ydCB7SGFzaFRhYmxlfSBmcm9tICcuLi8uLi9kYXRhL0hhc2hUYWJsZSdcclxuXHJcbmV4cG9ydCBjbGFzcyBBbmltYXRpb25GcmFtZSB7XHJcbiAgICBwdWJsaWMgbGVmdCA6IG51bWJlcjtcclxuICAgIHB1YmxpYyB0b3AgOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgZHVyYXRpb24gOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoaW5pdExlZnQgOiBudW1iZXIsIGluaXRUb3AgOiBudW1iZXIsIGluaXREdXJhdGlvbiA6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMubGVmdCA9IGluaXRMZWZ0O1xyXG4gICAgICAgIHRoaXMudG9wID0gaW5pdFRvcDtcclxuICAgICAgICB0aGlzLmR1cmF0aW9uID0gaW5pdER1cmF0aW9uO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQW5pbWF0ZWRTcHJpdGVUeXBlIHtcclxuICAgIHByaXZhdGUgc3ByaXRlU2hlZXRUZXh0dXJlIDogV2ViR0xHYW1lVGV4dHVyZTtcclxuICAgIHByaXZhdGUgYW5pbWF0aW9ucyA6IEhhc2hUYWJsZTxBcnJheTxBbmltYXRpb25GcmFtZT4+O1xyXG4gICAgcHJpdmF0ZSBzcHJpdGVXaWR0aCA6IG51bWJlcjtcclxuICAgIHByaXZhdGUgc3ByaXRlSGVpZ2h0IDogbnVtYmVyO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihpbml0U3ByaXRlU2hlZXRUZXh0dXJlIDogV2ViR0xHYW1lVGV4dHVyZSwgXHJcbiAgICAgICAgICAgICAgICBpbml0U3ByaXRlV2lkdGggOiBudW1iZXIsIGluaXRTcHJpdGVIZWlnaHQgOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnNwcml0ZVNoZWV0VGV4dHVyZSA9IGluaXRTcHJpdGVTaGVldFRleHR1cmU7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb25zID0ge307XHJcbiAgICAgICAgdGhpcy5zcHJpdGVXaWR0aCA9IGluaXRTcHJpdGVXaWR0aDtcclxuICAgICAgICB0aGlzLnNwcml0ZUhlaWdodCA9IGluaXRTcHJpdGVIZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZEFuaW1hdGlvbihzdGF0ZSA6IHN0cmluZykgOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbnNbc3RhdGVdID0gbmV3IEFycmF5PEFuaW1hdGlvbkZyYW1lPigpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRBbmltYXRpb25GcmFtZShzdGF0ZSA6IHN0cmluZywgaW5kZXggOiBudW1iZXIsIGZyYW1lRHVyYXRpb24gOiBudW1iZXIpIDogdm9pZCB7XHJcbiAgICAgICAgdmFyIGNvbHVtbnMgPSB0aGlzLnNwcml0ZVNoZWV0VGV4dHVyZS53aWR0aC90aGlzLnNwcml0ZVdpZHRoO1xyXG4gICAgICAgIHZhciByb3dzID0gdGhpcy5zcHJpdGVTaGVldFRleHR1cmUuaGVpZ2h0L3RoaXMuc3ByaXRlSGVpZ2h0O1xyXG4gICAgICAgIHZhciBjb2wgPSBpbmRleCAlIGNvbHVtbnM7XHJcbiAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoaW5kZXggLyAgY29sdW1ucyk7XHJcbiAgICAgICAgdmFyIGxlZnQgPSBjb2wgKiB0aGlzLnNwcml0ZVdpZHRoO1xyXG4gICAgICAgIHZhciB0b3AgPSByb3cgKiB0aGlzLnNwcml0ZUhlaWdodDtcclxuICAgICAgICB0aGlzLmFuaW1hdGlvbnNbc3RhdGVdLnB1c2gobmV3IEFuaW1hdGlvbkZyYW1lKGxlZnQsIHRvcCwgZnJhbWVEdXJhdGlvbikpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRTcHJpdGVXaWR0aCgpIDogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zcHJpdGVXaWR0aDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0U3ByaXRlSGVpZ2h0KCkgOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNwcml0ZUhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0U3ByaXRlU2hlZXRUZXh0dXJlKCkgOiBXZWJHTEdhbWVUZXh0dXJlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zcHJpdGVTaGVldFRleHR1cmU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEFuaW1hdGlvbihzdGF0ZSA6IHN0cmluZykgOiBBcnJheTxBbmltYXRpb25GcmFtZT4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFuaW1hdGlvbnNbc3RhdGVdO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRMZWZ0KHN0YXRlIDogc3RyaW5nLCBmcmFtZUluZGV4IDogbnVtYmVyKSA6IG51bWJlciB7XHJcbiAgICAgICAgbGV0IGFuaW1hdGlvbkZyYW1lIDogQW5pbWF0aW9uRnJhbWUgPSB0aGlzLmFuaW1hdGlvbnNbc3RhdGVdW2ZyYW1lSW5kZXhdO1xyXG4gICAgICAgIHJldHVybiBhbmltYXRpb25GcmFtZS5sZWZ0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRUb3Aoc3RhdGUgOiBzdHJpbmcsIGZyYW1lSW5kZXggOiBudW1iZXIpIDogbnVtYmVyIHtcclxuICAgICAgICBsZXQgYW5pbWF0aW9uRnJhbWUgOiBBbmltYXRpb25GcmFtZSA9IHRoaXMuYW5pbWF0aW9uc1tzdGF0ZV1bZnJhbWVJbmRleF07XHJcbiAgICAgICAgcmV0dXJuIGFuaW1hdGlvbkZyYW1lLnRvcDtcclxuICAgIH1cclxufSIsImltcG9ydCB7IGdhbWUgfSBmcm9tICcuLy4uLy4uL2FuaW1hdGVkX3Nwcml0ZV9kZW1vL0FuaW1hdGVkU3ByaXRlRGVtbyc7XHJcbmltcG9ydCB7IEdyYWRpZW50Q2lyY2xlIH0gZnJvbSAnLi8uLi9zY2VuZS9HcmFkaWVudENpcmNsZSc7XHJcbmltcG9ydCB7IEFuaW1hdGVkU3ByaXRlVHlwZSB9IGZyb20gJy4vLi4vc2NlbmUvc3ByaXRlL0FuaW1hdGVkU3ByaXRlVHlwZSc7XHJcbmltcG9ydCB7IFJlc291cmNlTWFuYWdlciB9IGZyb20gJy4vLi4vZmlsZXMvUmVzb3VyY2VNYW5hZ2VyJztcclxuXHJcblxyXG4vKlxyXG4gKiBUaGlzIHByb3ZpZGVzIHJlc3BvbnNlcyB0byBVSSBpbnB1dC5cclxuICovXHJcbmltcG9ydCB7QW5pbWF0ZWRTcHJpdGV9IGZyb20gXCIuLi9zY2VuZS9zcHJpdGUvQW5pbWF0ZWRTcHJpdGVcIlxyXG5pbXBvcnQge1NjZW5lR3JhcGh9IGZyb20gXCIuLi9zY2VuZS9TY2VuZUdyYXBoXCJcclxuaW1wb3J0IHsgVGV4dFRvUmVuZGVyLCBUZXh0UmVuZGVyZXIgfSBmcm9tICcuLy4uL3JlbmRlcmluZy9UZXh0UmVuZGVyZXInO1xyXG5pbXBvcnQgeyBXZWJHTEdhbWVSZW5kZXJpbmdTeXN0ZW0gfSBmcm9tICcuLy4uL3JlbmRlcmluZy9XZWJHTEdhbWVSZW5kZXJpbmdTeXN0ZW0nO1xyXG5pbXBvcnQgeyBTY2VuZU9iamVjdCB9IGZyb20gJy4uL3NjZW5lL1NjZW5lT2JqZWN0JztcclxuXHJcblxyXG5cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgVUlDb250cm9sbGVyIHtcclxuICAgIHByaXZhdGUgc3ByaXRlVG9EcmFnIDogQW5pbWF0ZWRTcHJpdGU7XHJcbiAgICBwcml2YXRlIHNjZW5lIDogU2NlbmVHcmFwaDtcclxuICAgIHByaXZhdGUgZHJhZ09mZnNldFggOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIGRyYWdPZmZzZXRZIDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSByZW5kZXJpbmdTeXN0ZW0gOiBXZWJHTEdhbWVSZW5kZXJpbmdTeXN0ZW07XHJcbiAgICBwcml2YXRlIGRldGFpbDogVGV4dFRvUmVuZGVyO1xyXG4gICAgcHJpdmF0ZSBtb3VzZU92ZXJTcHJpdGU6IEFuaW1hdGVkU3ByaXRlO1xyXG4gICAgcHJpdmF0ZSBjaXJjbGVUb0RyYWc6IEdyYWRpZW50Q2lyY2xlO1xyXG4gICAgcHJpdmF0ZSBtb3VzZU92ZXJDaXJjbGU6IEdyYWRpZW50Q2lyY2xlO1xyXG4gICAgcHJpdmF0ZSBtb3VzZU92ZXJPYmo6IFNjZW5lT2JqZWN0O1xyXG5cclxuICAgIHByaXZhdGUgbW91c2VYOiBudW1iZXI7XHJcbiAgICBwcml2YXRlIG1vdXNlWTogbnVtYmVyO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHt9XHJcblxyXG4gICAgcHVibGljIGluaXQoY2FudmFzSWQgOiBzdHJpbmcsIGluaXRTY2VuZSA6IFNjZW5lR3JhcGgsXHJcbiAgICAgICAgICAgIHJlbmRlcmluZ1N5c3RlbTogV2ViR0xHYW1lUmVuZGVyaW5nU3lzdGVtXHJcbiAgICAgICAgKSA6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc3ByaXRlVG9EcmFnID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNjZW5lID0gaW5pdFNjZW5lO1xyXG4gICAgICAgIHRoaXMuZHJhZ09mZnNldFggPSAtMTtcclxuICAgICAgICB0aGlzLmRyYWdPZmZzZXRZID0gLTE7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJpbmdTeXN0ZW0gPSByZW5kZXJpbmdTeXN0ZW07XHJcblxyXG4gICAgICAgIGxldCBjYW52YXMgOiBIVE1MQ2FudmFzRWxlbWVudCA9IDxIVE1MQ2FudmFzRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChjYW52YXNJZCk7XHJcbiAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5tb3VzZURvd25IYW5kbGVyKTtcclxuICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLm1vdXNlTW92ZUhhbmRsZXIpO1xyXG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzLm1vdXNlVXBIYW5kbGVyKTtcclxuICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMubW91c2VPbmVDbGlja0hhbmRsZXIpO1xyXG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIiwgdGhpcy5tb3VzZURvdWJsZUNsaWNrSGFuZGxlcik7XHJcbiAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5tb3VzZU92ZXJIYW5kbGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TW91c2VYKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubW91c2VYO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNb3VzZVkoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tb3VzZVk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldE1vdXNlT3ZlclNwcml0ZSgpOiBBbmltYXRlZFNwcml0ZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubW91c2VPdmVyU3ByaXRlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRNb3VzZU92ZXJDaXJjbGUoKTogR3JhZGllbnRDaXJjbGUge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1vdXNlT3ZlckNpcmNsZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0TW91c2VPdmVyT2JqKCk6IFNjZW5lT2JqZWN0IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tb3VzZU92ZXJPYmo7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG1vdXNlT3ZlckhhbmRsZXIgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIk1PVVNJTkcgT1ZFUiBZT1wiKTtcclxuICAgICAgICBsZXQgbW91c2VQcmVzc1ggOiBudW1iZXIgPSBldmVudC5jbGllbnRYO1xyXG4gICAgICAgIGxldCBtb3VzZVByZXNzWSA6IG51bWJlciA9IGV2ZW50LmNsaWVudFk7XHJcbiAgICAgICAgbGV0IHNwcml0ZSA6IEFuaW1hdGVkU3ByaXRlID0gdGhpcy5zY2VuZS5nZXRTcHJpdGVBdChtb3VzZVByZXNzWCwgbW91c2VQcmVzc1kpO1xyXG4gICAgICAgIGxldCBjaXJjbGU6IEdyYWRpZW50Q2lyY2xlICA9IHRoaXMuc2NlbmUuZ2V0Q2lyY2xlQXQobW91c2VQcmVzc1gsIG1vdXNlUHJlc3NZKTtcclxuICAgICAgICBsZXQgb2JqOiBTY2VuZU9iamVjdCA9IHRoaXMuc2NlbmUuZ2V0T2JqQXQobW91c2VQcmVzc1gsIG1vdXNlUHJlc3NZKTtcclxuICAgICAgICB2YXIgdGV4dFJlbmRlcmVyOiBUZXh0UmVuZGVyZXIgPSB0aGlzLnJlbmRlcmluZ1N5c3RlbS5nZXRUZXh0UmVuZGVyZXIoKTtcclxuICAgICAgICB0aGlzLm1vdXNlWCA9IGV2ZW50LmNsaWVudFg7XHJcbiAgICAgICAgdGhpcy5tb3VzZVkgPSBldmVudC5jbGllbnRZO1xyXG5cclxuICAgICAgICBpZiAob2JqICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5tb3VzZU92ZXJPYmogPSBvYmo7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5tb3VzZU92ZXJPYmogPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG5cclxuICAgICAgICAvLyBpZiAoc3ByaXRlICE9IG51bGwpIHtcclxuICAgICAgICAvLyAgICAgY29uc29sZS5sb2coXCJNb3VzaW5nIG92ZXIgdGhlIHNwcml0ZVwiKTtcclxuICAgICAgICAvLyAgICAgdGhpcy5tb3VzZU92ZXJTcHJpdGUgPSBzcHJpdGU7XHJcbiAgICAgICAgLy8gfSBlbHNlIGlmIChjaXJjbGUgIT0gbnVsbCkge1xyXG4gICAgICAgIC8vICAgICB0aGlzLm1vdXNlT3ZlckNpcmNsZSA9IGNpcmNsZTtcclxuICAgICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAgIC8vICAgICB0aGlzLm1vdXNlT3ZlclNwcml0ZSA9IG51bGw7XHJcbiAgICAgICAgLy8gICAgIHRoaXMubW91c2VPdmVyQ2lyY2xlID0gbnVsbDtcclxuICAgICAgICAvLyB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG1vdXNlRG91YmxlQ2xpY2tIYW5kbGVyID0gKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJyZW1vdmluZyBvcGVyYXRpb25cIik7XHJcbiAgICAgICAgbGV0IG1vdXNlUHJlc3NYIDogbnVtYmVyID0gZXZlbnQuY2xpZW50WDtcclxuICAgICAgICBsZXQgbW91c2VQcmVzc1kgOiBudW1iZXIgPSBldmVudC5jbGllbnRZO1xyXG4gICAgICAgIGxldCBvYmo6IFNjZW5lT2JqZWN0ID0gdGhpcy5zY2VuZS5nZXRPYmpBdChtb3VzZVByZXNzWCwgbW91c2VQcmVzc1kpO1xyXG4gICAgICAgIGxldCBzcHJpdGUgOiBBbmltYXRlZFNwcml0ZSA9IHRoaXMuc2NlbmUuZ2V0U3ByaXRlQXQobW91c2VQcmVzc1gsIG1vdXNlUHJlc3NZKTtcclxuICAgICAgICBsZXQgY2lyY2xlOiBHcmFkaWVudENpcmNsZSAgPSB0aGlzLnNjZW5lLmdldENpcmNsZUF0KG1vdXNlUHJlc3NYLCBtb3VzZVByZXNzWSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJtb3VzZVByZXNzWDogXCIgKyBtb3VzZVByZXNzWCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJtb3VzZVByZXNzWTogXCIgKyBtb3VzZVByZXNzWSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJzcHJpdGU6IFwiICsgc3ByaXRlKTtcclxuICAgICAgICBpZiAob2JqICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5zY2VuZS5yZW1vdmVPYmoob2JqKTtcclxuICAgICAgICB9ICAgICAgXHJcbiAgICAgICAgLy8gaWYgKHNwcml0ZSAhPSBudWxsKSB7XHJcbiAgICAgICAgLy8gICAgIC8vIFJlbW92ZSBzcHJpdGVcclxuICAgICAgICAvLyAgICAgdGhpcy5zY2VuZS5yZW1vdmVTcHJpdGUoc3ByaXRlKTtcclxuICAgICAgICAvLyB9IGVsc2UgaWYgKGNpcmNsZSAhPSBudWxsKSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuc2NlbmUucmVtb3ZlQ2lyY2xlKGNpcmNsZSk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBtb3VzZU9uZUNsaWNrSGFuZGxlciA9IChldmVudDogTW91c2VFdmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIGNvbnN0IERFTU9fU1BSSVRFX1RZUEVTIDogc3RyaW5nW10gPSBbXHJcbiAgICAgICAgICAgICdyZXNvdXJjZXMvYW5pbWF0ZWRfc3ByaXRlcy9SZWRDaXJjbGVNYW4uanNvbicsXHJcbiAgICAgICAgICAgICdyZXNvdXJjZXMvYW5pbWF0ZWRfc3ByaXRlcy9NdWx0aUNvbG9yQmxvY2suanNvbidcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IERFTU9fU1BSSVRFX1NUQVRFUyA9IHtcclxuICAgICAgICAgICAgRk9SV0FSRF9TVEFURTogJ0ZPUldBUkQnLFxyXG4gICAgICAgICAgICBSRVZFUlNFX1NUQVRFOiAnUkVWRVJTRSdcclxuICAgICAgICB9O1xyXG4gICAgICAgIGxldCBtb3VzZVByZXNzWCA6IG51bWJlciA9IGV2ZW50LmNsaWVudFg7XHJcbiAgICAgICAgbGV0IG1vdXNlUHJlc3NZIDogbnVtYmVyID0gZXZlbnQuY2xpZW50WTtcclxuICAgICAgICBsZXQgc3ByaXRlIDogQW5pbWF0ZWRTcHJpdGUgPSB0aGlzLnNjZW5lLmdldFNwcml0ZUF0KG1vdXNlUHJlc3NYLCBtb3VzZVByZXNzWSk7XHJcbiAgICAgICAgbGV0IGNpcmNsZSA6IEdyYWRpZW50Q2lyY2xlID0gdGhpcy5zY2VuZS5nZXRDaXJjbGVBdChtb3VzZVByZXNzWCwgbW91c2VQcmVzc1kpO1xyXG4gICAgICAgIHZhciBSZXNvdXJjZU1hbmFnZXI6IFJlc291cmNlTWFuYWdlciA9IGdhbWUuZ2V0UmVzb3VyY2VNYW5hZ2VyKCk7XHJcbiAgICAgICAgbGV0IG1heCA9IDE7XHJcbiAgICAgICAgbGV0IG1pbiA9IDA7XHJcbiAgICAgICAgbGV0IGsgID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcclxuICAgICAgICBpZiAoayA8IDEpIHtcclxuICAgICAgICAgICAgaWYgKHNwcml0ZSA9PSBudWxsICYmIGNpcmNsZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAvLyByYW5kb21seSBhZGQgYSBuZXcgc3ByaXRlXHJcbiAgICAgICAgICAgICAgICBsZXQgbWF4ID0gMTtcclxuICAgICAgICAgICAgICAgIGxldCBtaW4gPSAwO1xyXG4gICAgICAgICAgICAgICAgbGV0IGkgID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiYWRkaW5nIHNwcml0ZSBvcGVyYXRpb25cIik7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3ByaXRlVHlwZVRvVXNlIDogc3RyaW5nID0gREVNT19TUFJJVEVfVFlQRVNbaV07XHJcbiAgICAgICAgICAgICAgICBsZXQgYW5pbWF0ZWRTcHJpdGVUeXBlIDogQW5pbWF0ZWRTcHJpdGVUeXBlID0gUmVzb3VyY2VNYW5hZ2VyLmdldEFuaW1hdGVkU3ByaXRlVHlwZUJ5SWQoc3ByaXRlVHlwZVRvVXNlKTtcclxuICAgICAgICAgICAgICAgIGxldCBzcHJpdGVUb0FkZCA6IEFuaW1hdGVkU3ByaXRlID0gbmV3IEFuaW1hdGVkU3ByaXRlKGFuaW1hdGVkU3ByaXRlVHlwZSwgREVNT19TUFJJVEVfU1RBVEVTLkZPUldBUkRfU1RBVEUpO1xyXG4gICAgICAgICAgICAgICAgc3ByaXRlVG9BZGQuZ2V0UG9zaXRpb24oKS5zZXQobW91c2VQcmVzc1gsIG1vdXNlUHJlc3NZLCAwLjAsIDEuMCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLmFkZEFuaW1hdGVkU3ByaXRlKHNwcml0ZVRvQWRkKTtcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoc3ByaXRlID09IG51bGwgJiYgY2lyY2xlID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGxldCBjaXJjbGVUb0FkZDogR3JhZGllbnRDaXJjbGUgPSBuZXcgR3JhZGllbnRDaXJjbGUoMzAwLCAzMDApO1xyXG4gICAgICAgICAgICAgICAgY2lyY2xlVG9BZGQuZ2V0UG9zaXRpb24oKS5zZXQobW91c2VQcmVzc1gsIG1vdXNlUHJlc3NZLCAwLjAsIDEuMCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lLmFkZEdyYWRpZW50Q2lyY2xlKGNpcmNsZVRvQWRkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgXHJcblxyXG4gICAgcHVibGljIG1vdXNlRG93bkhhbmRsZXIgPSAoZXZlbnQgOiBNb3VzZUV2ZW50KSA6IHZvaWQgPT4ge1xyXG4gICAgICAgIGxldCBtb3VzZVByZXNzWCA6IG51bWJlciA9IGV2ZW50LmNsaWVudFg7XHJcbiAgICAgICAgbGV0IG1vdXNlUHJlc3NZIDogbnVtYmVyID0gZXZlbnQuY2xpZW50WTtcclxuICAgICAgICBsZXQgc3ByaXRlIDogQW5pbWF0ZWRTcHJpdGUgPSB0aGlzLnNjZW5lLmdldFNwcml0ZUF0KG1vdXNlUHJlc3NYLCBtb3VzZVByZXNzWSk7XHJcbiAgICAgICAgbGV0IGNpcmNsZSA6IEdyYWRpZW50Q2lyY2xlID0gdGhpcy5zY2VuZS5nZXRDaXJjbGVBdChtb3VzZVByZXNzWCwgbW91c2VQcmVzc1kpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwibW91c2VQcmVzc1g6IFwiICsgbW91c2VQcmVzc1gpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwibW91c2VQcmVzc1k6IFwiICsgbW91c2VQcmVzc1kpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwic3ByaXRlOiBcIiArIHNwcml0ZSk7XHJcbiAgICAgICAgaWYgKHNwcml0ZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIC8vIFNUQVJUIERSQUdHSU5HIElUXHJcbiAgICAgICAgICAgIHRoaXMuc3ByaXRlVG9EcmFnID0gc3ByaXRlO1xyXG4gICAgICAgICAgICB0aGlzLmRyYWdPZmZzZXRYID0gc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WCgpIC0gbW91c2VQcmVzc1g7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ09mZnNldFkgPSBzcHJpdGUuZ2V0UG9zaXRpb24oKS5nZXRZKCkgLSBtb3VzZVByZXNzWTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNpcmNsZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2lyY2xlVG9EcmFnID0gY2lyY2xlO1xyXG4gICAgICAgICAgICB0aGlzLmRyYWdPZmZzZXRYID0gY2lyY2xlLmdldFBvc2l0aW9uKCkuZ2V0WCgpIC0gbW91c2VQcmVzc1g7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhZ09mZnNldFkgPSBjaXJjbGUuZ2V0UG9zaXRpb24oKS5nZXRZKCkgLSBtb3VzZVByZXNzWTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyBtb3VzZU1vdmVIYW5kbGVyID0gKGV2ZW50IDogTW91c2VFdmVudCkgOiB2b2lkID0+IHtcclxuICAgICAgICBpZiAodGhpcy5zcHJpdGVUb0RyYWcgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLnNwcml0ZVRvRHJhZy5nZXRQb3NpdGlvbigpLnNldChldmVudC5jbGllbnRYICsgdGhpcy5kcmFnT2Zmc2V0WCwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LmNsaWVudFkgKyB0aGlzLmRyYWdPZmZzZXRZLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcHJpdGVUb0RyYWcuZ2V0UG9zaXRpb24oKS5nZXRaKCksIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNwcml0ZVRvRHJhZy5nZXRQb3NpdGlvbigpLmdldFcoKSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNpcmNsZVRvRHJhZyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2lyY2xlVG9EcmFnLmdldFBvc2l0aW9uKCkuc2V0KGV2ZW50LmNsaWVudFggKyB0aGlzLmRyYWdPZmZzZXRYLCBcclxuICAgICAgICAgICAgICAgIGV2ZW50LmNsaWVudFkgKyB0aGlzLmRyYWdPZmZzZXRZLCBcclxuICAgICAgICAgICAgICAgIHRoaXMuY2lyY2xlVG9EcmFnLmdldFBvc2l0aW9uKCkuZ2V0WigpLCBcclxuICAgICAgICAgICAgICAgIHRoaXMuY2lyY2xlVG9EcmFnLmdldFBvc2l0aW9uKCkuZ2V0VygpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG1vdXNlVXBIYW5kbGVyID0gKGV2ZW50IDogTW91c2VFdmVudCkgOiB2b2lkID0+IHtcclxuICAgICAgICB0aGlzLnNwcml0ZVRvRHJhZyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jaXJjbGVUb0RyYWcgPSBudWxsO1xyXG4gICAgfVxyXG59Il19"}